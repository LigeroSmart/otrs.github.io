

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Performance Tuning &mdash; OTRS Installation Guide 7.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/otrs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Updating" href="updating.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> OTRS Installation Guide
          

          
            
            <img src="../_static/otrs-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="updating.html">Updating</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Performance Tuning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ticket-index-module">Ticket Index Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ticket-search-index">Ticket Search Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="#article-storage">Article Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#archiving-tickets">Archiving Tickets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#caching">Caching</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OTRS Installation Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Performance Tuning</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/content/performance-tuning.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="performance-tuning">
<h1>Performance Tuning<a class="headerlink" href="#performance-tuning" title="Permalink to this headline">¶</a></h1>
<p>There is a list of performance enhancing techniques for your OTRS installation, including configuration, coding, memory use, and more.</p>
<div class="section" id="ticket-index-module">
<h2>Ticket Index Module<a class="headerlink" href="#ticket-index-module" title="Permalink to this headline">¶</a></h2>
<p>Ticket index module can be set in system configuration setting <code class="docutils literal notranslate"><span class="pre">Ticket::IndexModule</span></code>. There are two backend modules for the index for the ticket queue view:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Kernel::System::Ticket::IndexAccelerator::RuntimeDB</span></code></dt>
<dd>This is the default option, and will generate each queue view on the fly from the ticket table. You will not have performance trouble until you have about 60,000 open tickets in your system.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Kernel::System::Ticket::IndexAccelerator::StaticDB</span></code></dt>
<dd><p class="first">The most powerful module, should be used when you have above 80,000 open tickets. It uses an extra <code class="docutils literal notranslate"><span class="pre">ticket_index</span></code> table, which will be populated with keywords based on ticket data. Use the following command for generating an initial index after switching backends:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">otrs</span><span class="o">&gt;</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">otrs</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">otrs</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">pl</span> <span class="n">Maint</span><span class="p">::</span><span class="n">Ticket</span><span class="p">::</span><span class="n">QueueIndexRebuild</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="ticket-search-index">
<h2>Ticket Search Index<a class="headerlink" href="#ticket-search-index" title="Permalink to this headline">¶</a></h2>
<p>OTRS uses a special search index to perform full-text searches across fields in articles from different communication channels.</p>
<p>To create an initial index, use this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">otrs</span><span class="o">&gt;</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">otrs</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">otrs</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">pl</span> <span class="n">Maint</span><span class="p">::</span><span class="n">Ticket</span><span class="p">::</span><span class="n">FulltextIndex</span> <span class="o">--</span><span class="n">rebuild</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Actual article indexing happens via an OTRS daemon job in the background. While articles which were just added in the system are marked for indexing immediately, it could happen their index is available within a few minutes.</p>
</div>
<p>There are some options available for fine tuning the search index:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Ticket::SearchIndex::IndexArchivedTickets</span></code></dt>
<dd>Defines if archived tickets will be included in the search index (not enabled by default). This is advisable to keep the index small on large systems with archived tickets. If this is enabled, archived tickets will not be found by full-text searches.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Ticket::SearchIndex::Attribute</span></code></dt>
<dd><p class="first">Basic fulltext index settings.</p>
<div class="figure" id="id1">
<img alt="``Ticket::SearchIndex::Attribute`` Setting" src="../_images/sysconfig-ticket-searchindex-attribute.png" />
<p class="caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">Ticket::SearchIndex::Attribute</span></code> Setting</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Run the following command in order to generate a new index:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">otrs</span><span class="o">&gt;</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">otrs</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">otrs</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">pl</span> <span class="n">Maint</span><span class="p">::</span><span class="n">Ticket</span><span class="p">::</span><span class="n">FulltextIndexRebuild</span>
</pre></div>
</div>
</div>
<dl class="last docutils">
<dt><code class="docutils literal notranslate"><span class="pre">WordCountMax</span></code></dt>
<dd>Defines the maximum number of words which will be processed to build up the index. For example only the first 1000 words of an article body are stored in the article search index.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">WordLengthMin</span></code> and <code class="docutils literal notranslate"><span class="pre">WordLengthMax</span></code></dt>
<dd>Used as word length boundaries. Only words with a length between these two values are stored in the article search index.</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Ticket::SearchIndex::Filters</span></code></dt>
<dd><p class="first">Fulltext index regex filters to remove parts of the text.</p>
<div class="figure" id="id2">
<img alt="``Ticket::SearchIndex::Filters`` Setting" src="../_images/sysconfig-ticket-searchIndex-filters.png" />
<p class="caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">Ticket::SearchIndex::Filters</span></code> Setting</span></p>
</div>
<p>There are three default filters defined:</p>
<ul class="last simple">
<li>The first filter strips out special chars like: , &amp; &lt; &gt; ? ” ! * | ; [ ] ( ) + $ ^ =</li>
<li>The second filter strips out words which begin or ends with one of following chars: ‘ : .</li>
<li>The third filter strips out words which do not contain a word-character: a-z, A-Z, 0-9, _</li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Ticket::SearchIndex::StopWords</span></code></dt>
<dd><p class="first">English stop words for fulltext index. These words will be removed from the search index.</p>
<div class="figure" id="id3">
<img alt="``Ticket::SearchIndex::StopWords###en`` Setting" src="../_images/sysconfig-ticket-searchindex-stopwords.png" />
<p class="caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">Ticket::SearchIndex::StopWords###en</span></code> Setting</span></p>
</div>
<p>There are so-called stop-words defined for some languages. These stop-words will be skipped while creating the search index.</p>
<div class="last admonition seealso">
<p class="first admonition-title">See also</p>
<p>If your language is not in the system configuration settings or you want to add more words, you can add them to this setting:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">Ticket::SearchIndex::StopWords###Custom</span></code></li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="section" id="article-storage">
<h2>Article Storage<a class="headerlink" href="#article-storage" title="Permalink to this headline">¶</a></h2>
<p>There are two different backend modules for the article storage of phone, email and internal articles. The used article storage can be configured in the setting <code class="docutils literal notranslate"><span class="pre">Ticket::Article::Backend::MIMEBase::ArticleStorage</span></code>.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">Kernel::System::Ticket::Article::Backend::MIMEBase::ArticleStorageDB</span></code></dt>
<dd><p class="first">This default module will store attachments in the database. It also works with multiple front end servers, but requires much storage space in the database.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Don’t use this with large setups.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Kernel::System::Ticket::Article::Backend::MIMEBase::ArticleStorageFS</span></code></dt>
<dd><p class="first">Use this module to store attachments on the local file system. It is fast, but if you have multiple front end servers, you must make sure the file system is shared between the servers. Place it on an NFS share or preferably a SAN or similar solution.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Recommended for large setups.</p>
</div>
</dd>
</dl>
<p>You can switch from one back-end to the other on the fly. You can switch the backend in the system configuration, and then run this command line utility to put the articles from the database onto the filesystem or the other way around:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">otrs</span><span class="o">&gt;</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">otrs</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">otrs</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">pl</span> <span class="n">Admin</span><span class="p">::</span><span class="n">Article</span><span class="p">::</span><span class="n">StorageSwitch</span> <span class="o">--</span><span class="n">target</span> <span class="n">ArticleStorageFS</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">--target</span></code> option to specify the target backend.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The entire process can take considerable time to run, depending on the number of articles you have and the available CPU power and/or network capacity.</p>
</div>
<p>If you want to keep old attachments in the database, you can activate the system configuration option <code class="docutils literal notranslate"><span class="pre">Ticket::Article::Backend::MIMEBase::CheckAllStorageBackends</span></code> to make sure OTRS will still find them.</p>
</div>
<div class="section" id="archiving-tickets">
<h2>Archiving Tickets<a class="headerlink" href="#archiving-tickets" title="Permalink to this headline">¶</a></h2>
<p>As OTRS can be used as an audit-proof system, deleting closed tickets may not be a good idea. Therefore we implemented a feature that allows you to archive tickets.</p>
<p>Tickets that match certain criteria can be marked as archived. These tickets are not accessed if you do a regular ticket search or run a generic agent job. The system itself does not have to deal with a huge amount of tickets any longer as only the latest tickets are taken into consideration when using OTRS. This can result in a huge performance gain on large systems.</p>
<p>To use the archive feature:</p>
<ol class="arabic">
<li><p class="first">Activate the <code class="docutils literal notranslate"><span class="pre">Ticket::ArchiveSystem</span></code> setting in the system configuration.</p>
</li>
<li><p class="first">Define a generic agent job:
- Click on the <em>Add Job</em> button in the <em>Generic Agent</em> screen.
- <em>Job Settings</em>: provide a name for the archiving job.
- <em>Automatic Execution</em>: select proper options to schedule this job.
- <em>Select Tickets</em>: it might be a good idea to only archive those tickets in a closed state that have been closed a few months before.
- <em>Update/Add Ticket Attributes</em>: set the field <em>Archive selected tickets</em> to <em>archive tickets</em>.
- Save the job at the end of the page.
- Click on the <em>Run this task</em> link in the overview table to see the affected tickets.
- Click on the <em>Run Job</em> button.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is only 5000 tickets can be modified by running this job manually.</p>
</div>
</li>
</ol>
<p>When you search for tickets, the system default is to search tickets which are not archived.</p>
<p>To search for archived tickets:</p>
<ol class="arabic simple">
<li>Open the ticket search screen.</li>
<li>Set <em>Archive search</em> to <em>Archived tickets</em> or <em>All tickets</em>.</li>
<li>Perform the search.</li>
</ol>
</div>
<div class="section" id="caching">
<h2>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h2>
<p>OTRS caches a lot of temporary data in <code class="docutils literal notranslate"><span class="pre">/opt/otrs/var/tmp</span></code>. Please make sure that this uses a high performance file system and storage. If you have enough RAM, you can also try to put this directory on a ramdisk like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">otrs</span><span class="o">&gt;</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">otrs</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">otrs</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">pl</span> <span class="n">Maint</span><span class="p">::</span><span class="n">Session</span><span class="p">::</span><span class="n">DeleteAll</span>
<span class="n">otrs</span><span class="o">&gt;</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">otrs</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">otrs</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">pl</span> <span class="n">Maint</span><span class="p">::</span><span class="n">Cache</span><span class="p">::</span><span class="n">Delete</span>
<span class="n">root</span><span class="o">&gt;</span> <span class="n">mount</span> <span class="o">-</span><span class="n">o</span> <span class="n">size</span><span class="o">=</span><span class="mi">16</span><span class="n">G</span> <span class="o">-</span><span class="n">t</span> <span class="n">tmpfs</span> <span class="n">none</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">otrs</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">tmp</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Add persistent mount point in <code class="docutils literal notranslate"><span class="pre">/etc/fstab</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This will be a non-permanent storage that will be lost on server reboot. All your sessions (if you store them in the filesystem) and your cache data will be lost.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">There is also a centralized <a class="reference external" href="https://otrs.com/otrs-feature/feature-add-on-cache-memcached-fast/">memcached based cache backend</a> available for purchase from OTRS Group.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="updating.html" class="btn btn-neutral" title="Updating" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, OTRS AG

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>