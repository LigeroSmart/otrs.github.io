<html><head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<link rel="icon" type="image/png" sizes="32x32" href="../../../../../../images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../../../images/favicon-16x16.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
$(document).ready(function() {

    // Hint languages to prevent false matches (php for example).
    hljs.configure({
        languages: ['perl', 'javascript', 'xml', 'html', 'css', 'json', 'yaml']
    });

    // programlistings in manuals
    $('pre.programlisting').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    // code snippets in Perl API docs
    $('.pod pre').addClass('perl').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});</script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>视频和语音通话</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OTRS商业解决方案™ 6手册"><link rel="up" href="otrs-business-solution-features.html" title="Chapter 3. OTRS商业解决方案™ 的特色功能"><link rel="prev" href="otrs-business-solution-features.html" title="Chapter 3. OTRS商业解决方案™ 的特色功能"><link rel="next" href="dynamicfield-contact-with-data.html" title="联系信息动态字段"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">视频和语音通话</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="otrs-business-solution-features.html">Prev</a> </td><th width="60%" align="center">Chapter 3. <span class="bold"><strong>OTRS商业解决方案</strong></span>™ 的特色功能</th><td width="20%" align="right"> <a accesskey="n" href="dynamicfield-contact-with-data.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="video-calls"></a>视频和语音通话</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="video-calls.html#id-1.4.3.2">描述</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.4.3.3">配置</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.4.3.4">设置</a></span></dt><dd><dl><dt><span class="section"><a href="video-calls.html#id-1.4.3.4.3">聊天设置</a></span></dt><dt><span class="section"><a href="video-calls.html#chrome-ssl-required">启用了HTTPS的Web服务器</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.4.3.4.5">通话可用性</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.4.3.4.6">在线用户仪表板小部件</a></span></dt></dl></dd><dt><span class="section"><a href="video-calls.html#id-1.4.3.5">用法</a></span></dt><dd><dl><dt><span class="section"><a href="video-calls.html#id-1.4.3.5.2">聊天要求</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.4.3.5.3">进行视频通话</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.4.3.5.4">语音通话</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.4.3.5.5">通话邀请</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.4.3.5.6">启动视频和语音通话的其他方式</a></span></dt></dl></dd><dt><span class="section"><a href="video-calls.html#id-1.4.3.6">连接</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.4.3.2"></a>描述</h3></div></div></div><p>
             <span class="bold"><strong>OTRS商业解决方案</strong></span>™的视频和语音通话功能提供了通过OTRS舒适的前端开始两个用户之间的实时通话。
在可能的情况下，通话将通过在两个用户之间建立直接的点对点连接提供。视频和音频通话功能很大程度上取决于聊天功能，必须激活聊天功能才可能使用此功能。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                视频和语音通话基于相当年轻的技术WebRTC。在现代浏览器中实现WebRTC API的工作仍在持续进行中。 目前，只有最新版本的Mozilla
Firefox和Google Chrome才支持OTRS视频和语音通话（Chrome需要一个<a class="link" href="video-calls.html#chrome-ssl-required" title="启用了HTTPS的Web服务器">启用了HTTPS的Web服务器</a>）。
            </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.4.3.3"></a>配置</h3></div></div></div><p>
            以下系统配置选项与此功能相关。
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ChatEngine::Active(聊天引擎::激活)</code></span></dt><dd><p>
                    控制是否启用视频和语音通话功能。 请注意，这个开关也用于控制<a class="link" href="otrs-business-solution-features.html#chat" title="聊天">聊天</a>功能。
                </p></dd><dt><span class="term"><code class="literal">ChatEngine::PermissionGroup::VideoChatAgents</code></span></dt><dd><p>
                    定义视频和语音通话功能的组。 只有在此组中有权限的服务人员才能进行视频和语音通话。
                </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.4.3.4"></a>设置</h3></div></div></div><p>
            为了能够启动视频和语音通话，您需要在OTRS实例中设置一些内容。
        </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.3.4.3"></a>聊天设置</h4></div></div></div><p>
                您需要在系统中有一个可用的聊天设置。 请务必仔细阅读聊天功能的<a class="link" href="otrs-business-solution-features.html#chat-setup-availability" title="服务人员：设置可用性">设置可用性</a>部分。
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="chrome-ssl-required"></a>启用了HTTPS的Web服务器</h4></div></div></div><p>
                目前，Google Chrome浏览器只允许通过HTTPS协议（SSL）且具有有效签名证书访问用户媒体流的Web应用程序。 您还需确保将
<span class="bold"><strong>HttpType</strong></span> 配置选项设置为<span class="emphasis"><em>https</em></span>。
设置可通过HTTPS访问的Web服务器超出了本手册的范围。
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.3.4.5"></a>通话可用性</h4></div></div></div><p>
                为了能够进行视频和语音通话，您必须确保您也可以聊天。 有关详细信息，请参阅 <a class="link" href="otrs-business-solution-features.html#chat-setup-availability" title="服务人员：设置可用性">服务人员：设置可用性</a>中的说明。
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.3.4.6"></a>在线用户仪表板小部件</h4></div></div></div><p>
                要方便启动通话，请在仪表板上激活<span class="emphasis"><em>在线</em></span>小部件。
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                        转到仪表板并展开<span class="emphasis"><em>设置</em></span>小部件。
                    </p></li><li class="listitem"><p>
                        选中<span class="emphasis"><em>在线</em></span>小部件，并确保点击<span class="emphasis"><em>保存设置</em></span>。
                    </p><p>
                        </p><div class="figure"><a name="id-1.4.3.4.6.3.2.2.1"></a><p class="title"><b>Figure 3.17. 在仪表板上设置在线（用户）小部件</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/DashboardSettingsOnlineWidget.png" alt="在仪表板上设置在线（用户）小部件"></div></div></div></div><p><br class="figure-break">
                    </p></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.4.3.5"></a>用法</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.3.5.2"></a>聊天要求</h4></div></div></div><p>
                视频和语音通话与现有聊天相关。 作为服务人员，您可以启动聊天内外的通话，客户用户只能从活动聊天中发起通话。
            </p><p>
                如果还没有一个聊天，则在启动通话时会创建一个聊天。 在这些“临时”聊天中，聊天方将自动加入。 当通话终止时，这些聊天会保持活动状态，直到手动关闭。
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.3.5.3"></a>进行视频通话</h4></div></div></div><p>
                要在活动聊天中进行视频通话，只需点击聊天室顶部的小型摄像机按钮即可。
            </p><p>
                </p><div class="figure"><a name="id-1.4.3.5.3.3.1"></a><p class="title"><b>Figure 3.18. 从聊天内进行通话</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentChatVideoButtons.png" alt="从聊天内进行通话"></div></div></div></div><p><br class="figure-break">
            </p><p>
                将打开一个弹出窗口，并取决于您的浏览器，会要求您分享您的视频和音频流。 在具有多个摄像头和麦克风的系统上，您可以从下拉列表中选择要使用的那个。
            </p><p>
                </p><div class="figure"><a name="id-1.4.3.5.3.5.1"></a><p class="title"><b>Figure 3.19. 媒体许可请求</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/MediaPermissionRequest.png" alt="媒体许可请求"></div></div></div></div><p><br class="figure-break">
            </p><p>
                一旦确认了您的选择，将发送给另一方一个邀请，请求他们通话。 您可以通过屏幕中心的消息获取进度情况。
            </p><p>
                </p><div class="figure"><a name="id-1.4.3.5.3.7.1"></a><p class="title"><b>Figure 3.20. 等待对方</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentVideoWaitingOtherParty.png" alt="等待对方"></div></div></div></div><p><br class="figure-break">
            </p><p>
                请稍等一会儿，直到建立连接。 然后你就可以看到并听到对方了。
            </p><p>
                </p><div class="figure"><a name="id-1.4.3.5.3.9.1"></a><p class="title"><b>Figure 3.21. 已建立连接</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentVideoEstablishedConnection.png" alt="已建立连接"></div></div></div></div><p><br class="figure-break">
            </p><p>
                要控制媒体流，只需切换左侧的静音按钮即可。
            </p><p>
                </p><div class="figure"><a name="id-1.4.3.5.3.11.1"></a><p class="title"><b>Figure 3.22. 静音按钮</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentVideoMuteButtons.png" alt="静音按钮"></div></div></div></div><p><br class="figure-break">
            </p><p>
                要离开通话，只需点击大红色<span class="emphasis"><em>关闭</em></span>按钮。 将通知另一方。
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.3.5.4"></a>语音通话</h4></div></div></div><p>
                视频和语音通话之间的唯一区别在于，语音通话会使您的视频流初始化为静音（您可以稍后在通话中打开）。 默认情况下，视频流将被双方默认静音，但可以控制打开。
            </p><p>
                如果对方关闭了他们的视频流，您将在中心看到一个较大的麦克风图标而没有视频图标，以及他们的名字。
该图标将反映他们的音频流状态，如果将它们也关闭，通话将被注销。
            </p><p>
                </p><div class="figure"><a name="id-1.4.3.5.4.4.1"></a><p class="title"><b>Figure 3.23. 仅语音通话</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentAudioOnly.png" alt="仅语音通话"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.3.5.5"></a>通话邀请</h4></div></div></div><p>
                如果您已经可以使用聊天（内部或外部），视频和语音通话邀请将由同一用户会话中的一个活动选项卡自动接收。
当您收到邀请时，您的屏幕上将显示一个模态对话框，允许您接受或拒绝邀请。
            </p><p>
                </p><div class="figure"><a name="id-1.4.3.5.5.3.1"></a><p class="title"><b>Figure 3.24. 通话邀请</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentVideoInvitationDialog.png" alt="通话邀请"></div></div></div></div><p><br class="figure-break">
            </p><p>
                您的浏览器也可能会向您发送声音通知。 这很大程度上取决于所使用的浏览器和操作系统设置，并且是否授权OTRS触发此类通知。
首次更改聊天可用性时，将显示权限请求。
            </p><p>
                </p><div class="figure"><a name="id-1.4.3.5.5.5.1"></a><p class="title"><b>Figure 3.25. 通知许可请求</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentNotificationPermissionRequest.png" alt="通知许可请求"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.3.5.6"></a>启动视频和语音通话的其他方式</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em>服务人员到服务人员</em></span></p><p>
                        要和其他与您没有活动聊天的服务人员进行视频或语音通话，您可以在仪表板上使用<span class="emphasis"><em> 在线</em></span>小部件。
                    </p><p>
                        </p><div class="figure"><a name="id-1.4.3.5.6.2.1.3.1"></a><p class="title"><b>Figure 3.26. 仪表板上的在线(用户)小部件</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/DashboardOnlineWidgetAgents.png" alt="仪表板上的在线(用户)小部件"></div></div></div></div><p><br class="figure-break">
                    </p><p>
                        能够接听通话的服务人员在他们的姓名旁边有一个摄像机和麦克风图标，您可以点击它们。 点击它们之后，将打开一个弹出窗口，要求您分享您的媒体流。
之后就能建立连接。
                    </p><p>
                        通过工单详情中的所有者和负责人字段也可以呼叫其他服务人员。 在这种情况下，在允许启动通话之前，还要进行检查以确保其他服务人员可以通话。
                    </p><p>
                        </p><div class="figure"><a name="id-1.4.3.5.6.2.1.6.1"></a><p class="title"><b>Figure 3.27. 从工单详情与其他服务人员通话</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentVideoTicketZoomOwner.png" alt="从工单详情与其他服务人员通话"></div></div></div></div><p><br class="figure-break">
                    </p></li><li class="listitem"><p><span class="emphasis"><em>服务人员到客户</em></span></p><p>
                        要和一个与您没有活动聊天的客户进行视频或语音通话，您可以在客户信息中心查看某个客户时使用客户用户小部件。可用的客户将在其姓名旁边显示可以点击的通话图标。
点击图标之后，将打开一个弹出窗口，要求您分享您的媒体流。 之后就能建立连接。
                    </p><p>
                        </p><div class="figure"><a name="id-1.4.3.5.6.2.2.3.1"></a><p class="title"><b>Figure 3.28. 从客户信息中心发起通话</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentVideoCIC.png" alt="从客户信息中心发起通话"></div></div></div></div><p><br class="figure-break">
                    </p><p>
                        另一种可能是直接从工单详情屏幕发起通话。 如果分配给这个工单的客户用户当前正在线上，您可以在右侧栏的客户信息框中使用用户名旁边的通话按钮。
                    </p><p>
                        </p><div class="figure"><a name="id-1.4.3.5.6.2.2.5.1"></a><p class="title"><b>Figure 3.29. 从工单详情屏幕发起通话</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/AgentVideoTicketZoomCustomer.png" alt="从工单详情屏幕发起通话"></div></div></div></div><p><br class="figure-break">
                    </p></li><li class="listitem"><p><span class="emphasis"><em>客户到服务人员</em></span></p><p>
                        客户用户只能从主动聊天发起通话。 为此，客户可以使用活动聊天顶部的视频和语音通话链接来发起通话。
                    </p><p>
                        </p><div class="figure"><a name="id-1.4.3.5.6.2.3.3.1"></a><p class="title"><b>Figure 3.30. 从客户界面发起通话</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/video-calls/CustomerVideoCall.png" alt="从客户界面发起通话"></div></div></div></div><p><br class="figure-break">
                    </p><p>
                        当客户点击链接时，将要求他们媒体流的许可，类似于服务人员。 这将会发送一个邀请，如果另一方的服务人员接受请求，就会建立连接。
                    </p><p>
                        视频和语音通话在客户界面与服务人员界面之间的区别很小。 客户将在聊天屏幕中看到他们的通话。 只提供一个附加按钮：全屏。
它将在浏览器屏幕的范围内调整视频的大小。 除此之外，服务人员界面中的一切都适用。
                    </p></li><li class="listitem"><p><span class="emphasis"><em>公共用户到服务人员</em></span></p><p>
                        公共界面的用户无法进行视频和语音通话。
                    </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.4.3.6"></a>连接</h3></div></div></div><p>
            在最佳情况下，视频和语音通话将通过用户浏览器之间的直接点对点连接传输媒体流。
要求是用户的网络允许通过WebRTC使用的高端口进行连接，并且可以将其通告给另一方。 为此，有几种机制可以帮助连接。
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em>STUN (NAT会话穿透效用)</em></span></p><p>
                    STUN是一组标准化的方法和网络协议，允许终端主机发现其公共IP地址（如果它位于NAT后面）。 OTRS向所有使用 <span class="bold"><strong>OTRS商业解决方案</strong></span>™的用户提供一个具备STUN的云服务，并且该数据会共享给其他方以允许建立连接。
                </p><p>
                    在通过STUN进行连接的情况下，只有连接数据存储在OTRS服务器上，连接本身仍然在两个用户之间。
                </p></li><li class="listitem"><p><span class="emphasis"><em>基于UDP 的TURN (使用中继穿透NAT) </em></span></p><p>
                    TURN是协助多媒体应用跨越NAT或防火墙的协议。
OTRS还提供TURN云服务，可以帮助客户端通过对称NAT设备在网络上伪装，并支持NAT后的用户连接。
                </p><p>
                    在通过TURN服务器建立连接的情况下，媒体流将通过服务器（如代理）路由。 在这种情况下，所有数据包都被安全地传输到另一侧。
通过自动提供的经常更改的凭据对TURN服务器的访问进行加密和保护。
                </p></li><li class="listitem"><p><span class="emphasis"><em>基于TCP的TURN</em></span></p><p>
                    如果两个用户之间的所有UDP流量都被阻塞，基于TCP的TURN服务器是连接成功的最后手段。
虽然TCP不是用于传输媒体数据包的理想协议，但是为了连接两个用户并共享其媒体流，这是最后的手段。
                </p><p>
                    与基于UDP的TURN相同，媒体流将通过服务器路由并发送到另一端。所有STUN和TURN服务的基础设施可按需高度扩展，甚至可以通过不同的地理位置提供，以提供可能的最佳吞吐量。
                </p></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="otrs-business-solution-features.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="otrs-business-solution-features.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="dynamicfield-contact-with-data.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 3. <span class="bold"><strong>OTRS商业解决方案</strong></span>™ 的特色功能 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="emphasis"><em>联系信息</em></span>动态字段</td></tr></table></div></body></html>
