<html><head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
$(document).ready(function() {

    // Hint languages to prevent false matches (php for example).
    hljs.configure({
        languages: ['perl', 'javascript', 'xml', 'html', 'css', 'json', 'yaml']
    });

    // programlistings in manuals
    $('pre.programlisting').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    // code snippets in Perl API docs
    $('.pod pre').addClass('perl').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});</script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>通用接口</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OTRS 7 - Admin Manual"><link rel="up" href="administration.html" title="第 4 章 管理"><link rel="prev" href="dynamicfields.html" title="动态字段"><link rel="next" href="daemon.html" title="OTRS守护进程"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">通用接口</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dynamicfields.html">上一页</a> </td><th width="60%" align="center">第 4 章 管理</th><td width="20%" align="right"> <a accesskey="n" href="daemon.html">下一页</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="genericinterface"></a>通用接口</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="genericinterface.html#genericinterface-layers">通用接口层</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#id-1.6.12.4.6">网络传输</a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.4.7">数据映射</a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.4.8">控制器</a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.4.9">操作（OTRS作为提供者）</a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.4.10">调用程序（OTRS作为请求者）</a></span></dt></dl></dd><dt><span class="section"><a href="genericinterface.html#genericinterface_communication_flow">通用接口通讯流程</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#id-1.6.12.5.4">OTRS作为提供者</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#id-1.6.12.5.4.2">
                    远程请求：
                </a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.5.4.3">
                    OTRS响应：
                </a></span></dt></dl></dd><dt><span class="section"><a href="genericinterface.html#id-1.6.12.5.5">OTRS作为请求者</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#id-1.6.12.5.5.2">OTRS请求：</a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.5.5.3">远程响应：</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="genericinterface.html#genericinterface-webservices">Web服务</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice_gui">WEB服务图形界面</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#webservice_gui_overview">WEB服务概览</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice_gui_add">添加WEB服务</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice_gui_examples">导入WEB服务样例</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice_gui_change">修改WEB服务</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#webservice-clone">克隆WEB服务</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice-export">导出WEB服务</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice-import">导入WEB服务</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice-history">WEB服务历史</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice-delete">删除WEB服务</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice-debugger">WEB服务调试器</a></span></dt><dt><span class="section"><a href="genericinterface.html#webservice-configuration-change">修改WEB服务配置</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="genericinterface.html#webservice_cli">WEB服务命令行接口</a></span></dt><dt><span class="section"><a href="genericinterface.html#genericinterface-webservice-configuration">WEB服务配置</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#id-1.6.12.9.7">
            配置详细信息
        </a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#id-1.6.12.9.7.2">
                一般
            </a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.9.7.3">
                <code class="literal">Debugger</code>
            </a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.9.7.4">
                <code class="literal">Provider</code>
            </a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.9.7.5">
                <code class="literal">Requester</code>
            </a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="genericinterface.html#genericinterface-connectors">连接器</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#genericinterface-bundled-connectors">捆绑的连接器</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#generic-faq-connector">FAQ Connector</a></span></dt><dt><span class="section"><a href="genericinterface.html#generic-session-connector">会话连接器</a></span></dt><dt><span class="section"><a href="genericinterface.html#generic-ticket-connector">工单连接器</a></span></dt></dl></dd><dt><span class="section"><a href="genericinterface.html#genericinterface-bundled-connectors-examples">例子：</a></span></dt><dd><dl><dt><span class="section"><a href="genericinterface.html#id-1.6.12.10.7.2">WEB服务配置</a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.10.7.3">Perl SOAP请求者</a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.10.7.4">Perl REST请求者</a></span></dt><dt><span class="section"><a href="genericinterface.html#id-1.6.12.10.7.5">REST请求的cURL例子</a></span></dt></dl></dd></dl></dd></dl></div><p>
        OTRS通用接口包含一个多层框架，让OTRS能够通过一个WEB服务与其它系统通讯，这个通讯可以是双向的：
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="emphasis"><em>OTRS作为提供者：</em></span>OTRS作为一个服务器运行，监听来自外部系统的请求、处理信息、执行请求的操作并答复请求。
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>OTRS作为请求者：</em></span>OTRS作为一个客户端运行，收集信息、发送请求到远程系统并等待答复。
            </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="genericinterface-layers"></a>通用接口层</h3></div></div></div><p>
        通用接口是基于层构建的模型，使用灵活且易于定制。
    </p><p>
        层是一个文件的集合，控制通用接口如何执行一个WEB服务的不同部分。使用正确的配置，你可以给不同的外部系统构建不同的WEB服务，而不用创建新的模块。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
            如果远程系统不支持目前通用接口捆绑的模块，需要为那个特定的WEB服务开发特殊的模块。
        </p><p>
            OTRS自带的通用接口模块随着时间流逝会更新和增长。
        </p></div><p>
        </p><div class="figure"><a name="id-1.6.12.4.5.1"></a><p class="title"><b>图 4.120. 接口的‘层’图解</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-layers.png" alt="接口的‘层’图解"></div></div></div></div><p><br class="figure-break">
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.12.4.6"></a>网络传输</h4></div></div></div><p>
            本层负责与远程系统的正确通讯。它在OTRS作为提供者时接收请求并生成响应，在OTRS作为请求者时生成请求并接收响应。
        </p><p>
            提供者通讯由一个新的WEB服务处理程序“nph-genericinterface.pl”处理。
        </p><p>
            请求者通讯可以在一个通用接口模块或其它任何OTRS模块触发事件过程中初始化。这个事件由事件处理程序捕获，取决于配置，这个事件由请求者对象直接处理或委派给计划程序（一个单独的守护进程，设计来异步处理任务）处理。
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.12.4.7"></a>数据映射</h4></div></div></div><p>
            本层负责在OTRS和远程系统之间转化数据结构（内部数据和外部数据层）。通常远程系统拥有与OTRS不同的数据结构（包括不同的值和这些值的名称），这就是本层的重要性：将收到的信息转为OTRS能够理解的东西，在相反的方向上将这些信息使用远程系统的数据字典发送给每个远程系统。
        </p><p>
            <em><span class="remark">示例：</span></em>OTRS中的“Priority（优先级）”在远程系统中可能叫做“Prio”，它的值“1-低”（OTRS）应当映射为远程系统中的“Information”。
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.12.4.8"></a>控制器</h4></div></div></div><p>
            控制器是相似的操作或调用程序的合集。例如，一个工单控制器可能包含数个标准工单操作。可以定制控制器，例如，一个“TicketExternalCompany”控制器可能包含与标准工单控制器相似的功能，但有不同的数据接口或函数名称（适应远程系统的函数名称）或完全不同的代码。
        </p><p>
            一个通用接口应用可以与一个远程系统同步信息，只可以跟另一个相同类型的远程系统。在这种情况下,需要开发新的控制器，并且操作和调用程序必须模拟远程系统行为，这样OTRS暴露的接口就类似于远程系统的接口。
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.12.4.9"></a>操作（OTRS作为提供者）</h4></div></div></div><p>
            操作是一个能在OTRS内执行的单个动作。所有的操作有相同的编程接口，它们接收数据到一个指定的参数，并返回一个数据结构，包含成功状态、潜在的错误消息和返回数据。
        </p><p>
            通常操作使用已经映射的数据（内部）来调用核心模块并执行OTRS中的动作如：创建一个工单、更新一个用户、使一个队列无效、发送一个通知等等。一个操作有OTRS
API的全部权限以执行这个动作。
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.12.4.10"></a>调用程序（OTRS作为请求者）</h4></div></div></div><p>
            调用程序是OTRS在一个远程系统上执行的动作。调用程序使用OTRS核心模块来处理和收集需要的信息以创建一个请求。当信息准备好后它必须映射到远程系统格式以便发送给远程系统，远程系统处理这个信息、执行动作并发回响应，要么处理成功要么处理错误。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="genericinterface_communication_flow"></a>通用接口通讯流程</h3></div></div></div><p>
            通用接口有定义的流程来执行作为提供者和请求者的操作。
        </p><p>
            这些流程描述如下：
        </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.12.5.4"></a>OTRS作为提供者</h4></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.5.4.2"></a>
                    远程请求：
                </h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                            HTTP请求
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    OTRS接收到HTTP请求并传递它。
                                </p></li><li class="listitem"><p>
                                    提供者模块负责执行和控制这些操作。
                                </p></li></ul></div></li><li class="listitem"><p>
                            网络传输
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    网络传输模块解码数据有效载荷并从剩余数据中分离操作的名称。
                                </p></li><li class="listitem"><p>
                                    操作名称和操作数据都返回给提供者。
                                </p></li></ul></div></li><li class="listitem"><p>
                            <em><span class="remark">外部数据</span></em>
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    从远程系统发来的数据（这不是一个基于模块的层）。
                                </p></li></ul></div></li><li class="listitem"><p>
                            映射
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    按这个操作指定的映射配置（进入的请求数据映射）将数据从外部系统格式转化为OTRS内部格式。
                                </p></li><li class="listitem"><p>
                                    已转化的数据返回给提供者。
                                </p></li></ul></div></li><li class="listitem"><p>
                            <em><span class="remark">内部数据</span></em>
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    数据已经转化并准备传递到操作（这不是一个基于模块的层）。
                                </p></li></ul></div></li><li class="listitem"><p>
                            操作
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    接收并验证数据。
                                </p></li><li class="listitem"><p>
                                    执行用户访问控制。
                                </p></li><li class="listitem"><p>
                                    执行操作。
                                </p></li></ul></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.5.4.3"></a>
                    OTRS响应：
                </h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                                操作
                            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                        返回结果数据到提供者。
                                    </p></li></ul></div></li><li class="listitem"><p>
                            <em><span class="remark">内部数据</span></em>
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    数据从操作返回。
                                </p></li></ul></div></li><li class="listitem"><p>
                            映射
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    数据按映射配置中指定的映射（出站响应数据的映射）转化回远程系统的格式。
                                </p></li><li class="listitem"><p>
                                    已转化的数据返回给提供者。
                                </p></li></ul></div></li><li class="listitem"><p>
                            <em><span class="remark">外部数据</span></em>
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    转化的数据准备传递给网络传输作为响应。
                                </p></li></ul></div></li><li class="listitem"><p>
                            网络传输
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    接收远程系统格式的数据。
                                </p></li><li class="listitem"><p>
                                    为这个网络传输类型构建一个有效的响应。
                                </p></li></ul></div></li><li class="listitem"><p>
                            HTTP响应
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    响应发送回WEB服务客户端。
                                </p></li><li class="listitem"><p>
                                    如果出现一个错误（例如SOAP错误、HTTP错误等等），发送一个错误响应给远程系统。
                                </p></li></ul></div></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.12.5.5"></a>OTRS作为请求者</h4></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.5.5.2"></a>OTRS请求：</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                                事件触发器处理程序
                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        基于WEB服务配置确定请求是同步还是异步。
                                    </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                同步
                                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                        直接调用请求者以便创建一个新的请求，并通过这个层传递。
                                                    </p></li></ul></div></li><li class="listitem"><p>
                                                异步
                                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                        为OTRS守护进程创建一个新的通用接口（请求者）任务，通过委派该请求执行到计划程序进程，大大改善了用户体验。否则准备该请求和远程执行需要的所有时间都会加到触发这些请求的OTRS事件上。
                                                    </p></li><li class="listitem"><p>
                                                        在下一个循环中OTRS守护进程读取新任务并创建一个到请求者的调用，请求者会创建一个新的请求并通过这个层传递它。
                                                    </p></li></ul></div></li></ul></div></li></ul></div></li><li class="listitem"><p>
                                调用程序
                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        接收来自事件的数据。
                                    </p></li><li class="listitem"><p>
                                        验证收到的数据（如果需要）。
                                    </p></li><li class="listitem"><p>
                                        调用核心模块来补足数据（如果需要）。
                                    </p></li><li class="listitem"><p>
                                        返回请求数据结构，或发送一个中止通讯信号给请求者以取消这个请求。
                                    </p></li></ul></div></li><li class="listitem"><p>
                                <em><span class="remark">内部数据</span></em>
                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        自请求者传来的数据（这不是一个基于模块的层）。
                                    </p></li></ul></div></li><li class="listitem"><p>
                                映射
                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        按映射配置（出站响应数据的映射）指定的格式将数据转化为远程系统的格式。
                                    </p></li><li class="listitem"><p>
                                        已经转化的数据返回给请求者。
                                    </p></li></ul></div></li><li class="listitem"><p>
                                <em><span class="remark">外部数据</span></em>
                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        转化后的数据准备发送给远程系统。
                                    </p></li></ul></div></li><li class="listitem"><p>
                                网络传输
                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                            从请求者接收远程操作名称和已经转化为远程系统格式的数据。
                                        </p></li><li class="listitem"><p>
                                            为网络传输构建一个有效的请求。
                                        </p></li><li class="listitem"><p>
                                            将请求发送给远程系统并等待响应。
                                        </p></li></ul></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.5.5.3"></a>远程响应：</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                                网络传输
                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        接收响应并解码数据的有效载荷。
                                    </p></li><li class="listitem"><p>
                                        将数据返回给请求者。
                                    </p></li></ul></div></li><li class="listitem"><p>
                                <em><span class="remark">外部数据</span></em>
                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        从远程系统收到的数据。
                                    </p></li></ul></div></li><li class="listitem"><p>
                            映射
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    数据已用这个操作的映射配置指定的映射（进入的响应数据映射）从外部系统格式转化为OTRS内部格式。
                                </p></li><li class="listitem"><p>
                                    已经转化的数据返回给请求者。
                                </p></li></ul></div></li><li class="listitem"><p>
                            <em><span class="remark">内部数据</span></em>
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    已经转化的数据返回给请求者。
                                </p></li></ul></div></li><li class="listitem"><p>
                            调用程序
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    接收返回的数据。
                                </p></li><li class="listitem"><p>
                                    根据每个调用程序的特殊需要处理数据（包括可能有的错误处理）。
                                </p></li><li class="listitem"><p>
                                    返回调用程序结果和数据到请求者。
                                </p></li></ul></div></li><li class="listitem"><p>
                            事件处理程序或OTRS守护进程
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    接收来自请求的数据。在使用OTRS守护进程的情况下，将来在数据中可能还包含了创建一个任务的信息。
                                </p></li></ul></div></li></ol></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="genericinterface-webservices"></a>Web服务</h3></div></div></div><p>
            一个WEB服务是两个系统（在我们的例子中，就是OTRS和一个远程系统）间进行通讯的方法。
         </p><p>
            WEB服务的核心是它的配置，在配置中定义了WEB服务能够在内部执行什么操作(Operation操作)、OTRS请求能够在远程系统执行什么操作(Invokers调用程序)，数据如何从一个系统转换到另外的系统(Mapping映射)以及通过什么协议进行通讯
(Transport传输)
         </p><p>
             通用接口是一个框架，使得在OTRS中能够用预定义的方法、使用已经构建的相互独立且可互换的块来创建WEB服务。
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="webservice_gui"></a>WEB服务图形界面</h3></div></div></div><p>
        WEB服务图形界面是一个工具，允许你在用户友好、便捷的界面构建复杂的WEB服务配置。它允许：
    </p><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                    创建和删除WEB服务。
                </p></li><li class="listitem"><p>
                    导入和导出已有WEB服务的配置（用YAML文件格式）。
                </p></li><li class="listitem"><p>
                    在WEB服务历史窗口查看、还原和导出已有WEB服务的老配置。
                </p></li><li class="listitem"><p>
                    在调试窗口跟踪每个WEB服务所有的通讯日志。
                </p></li></ul></div><p>
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="webservice_gui_overview"></a>WEB服务概览</h4></div></div></div><p>
            The <span class="emphasis"><em>Web Services</em></span> link in the main screen of Admin
Interface (in the System Administration box) leads to the web services
overview screen, where you are able to manage your web service
configurations. You can add new web services or change the configuration of
the existing ones from this screen.
        </p><p>
            Every web service configuration screen has in the upper part of the screen a
<span class="emphasis"><em>bread crumbs</em></span> style navigation path. This navigation
path is useful to know exactly in which part of the web service
configuration we are, and also enables the user to jump back to any part of
the configuration process at any time (this action will not save any
changes).
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                To create a new web service, press the button <span class="emphasis"><em>Add web
service</em></span>, and provide the required information.
            </p></div><p>
            </p><div class="figure"><a name="id-1.6.12.7.4.5.1"></a><p class="title"><b>图 4.121. WEB服务概览</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-overview.png" alt="WEB服务概览"></div></div></div></div><p><br class="figure-break">
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="webservice_gui_add"></a>添加WEB服务</h4></div></div></div><p>
            The only required field in this part is the web service
<span class="emphasis"><em>Name</em></span> that needs to be unique in the system and can not
be left empty. Other fields are also necessary for the configuration like
the <span class="emphasis"><em>Debug Threshold</em></span> and <span class="emphasis"><em>Validity</em></span>
but these fields are already populated with the default value for each list.
        </p><p>
            The default value for <span class="emphasis"><em>Debug Threshold</em></span> is
<span class="emphasis"><em>debug</em></span>. When configured in this manner all communication
logs are registered in the database. Each subsequent <span class="emphasis"><em>Debug
Threshold</em></span> value is more restrictive and discards communication
logs of lower order than the one set in the system.
        </p><p>
            </p><div class="itemizedlist"><p class="title"><b>调试阈值级别(从低到高)</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        Debug（调试）
                    </p></li><li class="listitem"><p>
                        Info（信息）
                    </p></li><li class="listitem"><p>
                        Notice（注意）
                    </p></li><li class="listitem"><p>
                        Error（错误）
                    </p></li></ul></div><p>
        </p><p>
            It is also possible to define the network transport protocol for
<span class="emphasis"><em>OTRS as Provider</em></span> and <span class="emphasis"><em>OTRS as
requester</em></span>.
        </p><p>
            Click on the <span class="emphasis"><em>Save</em></span> button to register the new web
service in the database or click <span class="emphasis"><em>Cancel</em></span> to discard this
operation. You will now be returned to the web service overview screen.
        </p><p>
            If you already have a web service configuration file in YAML format you can
click on the <span class="emphasis"><em>Import web service</em></span> button on the left side
of the screen. For more information on importing web services please check
the next section <span class="emphasis"><em>Web Service Change</em></span>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                要为一个WEB服务添加或修改更多细节，点击WEB服务概览窗口中WEB服务的名称。
            </p></div><p>
            </p><div class="figure"><a name="id-1.6.12.7.5.9.1"></a><p class="title"><b>图 4.122. 添加WEB服务</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-add.png" alt="添加WEB服务"></div></div></div></div><p><br class="figure-break">
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="webservice_gui_examples"></a>导入WEB服务样例</h4></div></div></div><p>
            在  <a class="ulink" href="http://otrs.github.io/doc/manual/otrs-business-solution/stable/en/html/import-example-web-service.html" target="_top">OTRS
Business Solution™</a>中有可用的示例Web服务，你知道吗？
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="webservice_gui_change"></a>修改WEB服务</h4></div></div></div><p>
            在这个窗口你有处理一个WEB服务所有部分的完整功能集。在左侧的操作栏中你可以找到一些按钮，允许你在一个WEB服务上执行所有可能的操作：
        </p><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                    克隆WEB服务。
                </p></li><li class="listitem"><p>
                    导出WEB服务。
                </p></li><li class="listitem"><p>
                    导入WEB服务。
                </p></li><li class="listitem"><p>
                    配置历史。
                </p></li><li class="listitem"><p>
                    删除WEB服务。
                </p></li><li class="listitem"><p>
                    调试器。
                </p></li></ul></div><p>
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                <span class="emphasis"><em>Configuration history</em></span> and <span class="emphasis"><em>Debugger</em></span>
will lead you to different screens.
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="webservice-clone"></a>克隆WEB服务</h5></div></div></div><p>
                To clone a web service, you need to click on the <span class="emphasis"><em>Clone web
service</em></span> button. A dialog will be shown where you can use the
default name or set a new name for the (cloned) web service.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                    <span class="emphasis"><em>Remember</em></span> that the name of the web service must be
unique within the system.
                </p></div><p>Click on <span class="emphasis"><em>Clone</em></span> button to create the web service clone
or <span class="emphasis"><em>Cancel</em></span> to close the dialog.</p><p>
                </p><div class="figure"><a name="id-1.6.12.7.7.5.5.1"></a><p class="title"><b>图 4.123. 克隆WEB服务</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-clone.png" alt="克隆WEB服务"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="webservice-export"></a>导出WEB服务</h5></div></div></div><p>
                The <span class="emphasis"><em>Export web service</em></span> button gives you the opportunity
to dump the configuration of the current web service into a YAML file, to
download it and to store it on your file system. This can be specially
useful if you want to migrate the web service from one server to another,
for example from a testing environment to a production system.
            </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">警告</h3><p>
                    所有存储在WEB服务配置中的密码都将以纯文本格式导出。
                </p></div><p>
                Right after clicking the <span class="emphasis"><em>Export web service</em></span> button a
save dialog of your browser will appear, just like when you click on a file
download link on a web page.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                    不同操作系统中不同浏览器有它自己的保存对话框窗口和风格。取决于浏览器和它的配置，可能不会显示对话框而是直接将文件保存到一个默认目录中。如有需要请检查你的浏览器文档以获取更多的特定说明。
                </p></div><p>
                </p><div class="figure"><a name="id-1.6.12.7.7.6.6.1"></a><p class="title"><b>图 4.124. 导出WEB服务</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-export.png" alt="导出WEB服务"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="webservice-import"></a>导入WEB服务</h5></div></div></div><p>
                A valid web service configuration YAML file is required to use the import
web service feature. Click on the <span class="emphasis"><em>Import web service</em></span>
button, browse for the configuration file or provide the complete path in
the input box.
            </p><p>
                Click <span class="emphasis"><em>Import</em></span> button to create a new web service from a
file or "Cancel" to close the dialog.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                    The web service name will be taken from the configuration file name (e.g. if
the file name is <code class="filename">MyWebservice.yml</code> the resulting web
service will be named <span class="emphasis"><em>MyWebservice</em></span>). If a web service
is registered in the system with the same name as the web service that you
want to import, the system will lead you to the web service change screen to
let you change the name of the imported web service.
                </p></div><p>
                </p><div class="figure"><a name="id-1.6.12.7.7.7.5.1"></a><p class="title"><b>图 4.125. 导入WEB服务</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-import.png" alt="导入WEB服务"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="webservice-history"></a>WEB服务历史</h5></div></div></div><p>
                Every change to the web service configuration creates a new entry in the web
service history (as a journal). The web service history screen displays a
list of all configuration versions for a web service. Each row (version) in
the <span class="emphasis"><em>Configuration History List</em></span> represents a single
revision in the web service history.
            </p><p>
                Click on one of the rows to show the whole configuration as it was on that
particular date / time. The configuration will be shown in the
<span class="emphasis"><em>History details</em></span> section of this screen. Here you are
also able to export the selected web service configuration version or to
restore that version into the current web service configuration.
            </p><p>
                The <span class="emphasis"><em>Export web service configuration</em></span> behaves exactly as
the "Export web service" feature in the web service change screen. For more
information refer to that section.
            </p><p>
                If changes to the current web service configuration do not work as expected
and it is not easy to revert the changes manually, you can click on the
<span class="emphasis"><em>Revert web service configuration</em></span> button. This will open
a dialog to ask you if you are sure to revert the web service
configuration. Click <span class="emphasis"><em>Revert web service configuration</em></span>
in this dialog to replace the current configuration with the selected
version, or click <span class="emphasis"><em>Cancel</em></span> to close the dialog.
            </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">警告</h3><p>
                    记住：存储在WEB服务配置中的任何密码都将以纯文本格式导出。
                </p><p>
                    恢复一个配置时请一定小心，因为这个过程是不可逆的。
                </p></div><p>
                </p><div class="figure"><a name="id-1.6.12.7.7.8.7.1"></a><p class="title"><b>图 4.126. WEB服务历史</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-history.png" alt="WEB服务历史"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="webservice-delete"></a>删除WEB服务</h5></div></div></div><p>
                Sometimes it is necessary to delete a web service completely.  To do this
you can press on the <span class="emphasis"><em>Delete web service</em></span> button and a
new dialog will appear asking for confirmation.
            </p><p>
                Click on <span class="emphasis"><em>Delete</em></span> to confirm the removal of the web
service or on <span class="emphasis"><em>Cancel</em></span> to close the dialog.
            </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">警告</h3><p>
                    删除一个WEB服务后无法撤销，请在删除一个WEB服务时一定要小心。
                </p></div><p>
                </p><div class="figure"><a name="id-1.6.12.7.7.9.5.1"></a><p class="title"><b>图 4.127. 删除WEB服务</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-delete.png" alt="删除WEB服务"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="webservice-debugger"></a>WEB服务调试器</h5></div></div></div><p>
                调试器存储了一个WEB服务的日志。在调试器窗口你可以跟踪该WEB服务作为提供者或请求者类型的所有通讯日志。
            </p><p>
                显示这个窗口后，请求列表开始载入。在列表完全载入后你可以选择一行（即一条通讯序列）来检查它的详细信息，这个详细信息显示在窗口下方。
            </p><p>
                你可以使用窗口右边的过滤器来收缩通讯列表，你可以过滤的内容有：
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        通讯类型（提供者或请求者）
                    </p></li><li class="listitem"><p>
                        日期：在一个特定日期之前或之后
                    </p></li><li class="listitem"><p>
                        远程IP地址
                    </p></li><li class="listitem"><p>
                        以上所有组合
                    </p></li></ul></div><p>
                After filter settings are set, push the <span class="emphasis"><em>Refresh</em></span> button
and a new list will be displayed meeting your search criteria.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                    取决于过滤器的搜索条件，新列表可能无返回结果。
                </p></div><p>
                On the left part of the screen under the action column you can select
<span class="emphasis"><em>Go back to the web service</em></span> or clear the debugger log by
pushing the <span class="emphasis"><em>Clear</em></span> button.  This will open a dialog that
ask you to confirm erasing of the log. Click <span class="emphasis"><em>Clear</em></span> in
the dialog button to perform the action or click on
<span class="emphasis"><em>Cancel</em></span> to close this dialog.
            </p><p>
                In the <span class="emphasis"><em>Request details</em></span> section you can see all the
details for the selected communication. Here you can track the complete flow
and check for possible errors or confirm success responses.
            </p><p>
                </p><div class="figure"><a name="id-1.6.12.7.7.10.10.1"></a><p class="title"><b>图 4.128. WEB服务调试器</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-debugger.png" alt="WEB服务调试器"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="webservice-configuration-change"></a>修改WEB服务配置</h5></div></div></div><p>
                Returning to the web service change screen, now we are going to review the
right side of it. Here we have the possibility to modify all the general
data for a web service such as name, description, debug threshold, etc. Also
there are two more sections below that allows us to modify specific
parameters for communication types <span class="emphasis"><em>OTRS as Provider</em></span> and
<span class="emphasis"><em>OTRS as Requester</em></span>.
            </p><p>
                WEB服务配置需要在每个级别保存，这意味着如果修改了一个设置，到其它部分（这个配置更深层次的部分）的链接将被禁用，强迫你保存当前的配置级别。在保存后禁用了的链接会被重新启用，允许你使用这个配置继续。
            </p><p>
                On the <span class="emphasis"><em>OTRS as provider</em></span> section it is possible to set
or configure the network transport protocol. Only network transport
back-ends that are registered are shown on the list. To configure the
network transport click on the <span class="emphasis"><em>Configure</em></span> button.  It is
also possible to add new operations in this box. To do this select one of
the available operations from the <span class="emphasis"><em>Add Operation</em></span>
list. This will lead you to the operation configuration screen. After saving
the new operation it will be listed in the table above.
            </p><p>
                <span class="emphasis"><em>OTRS as requester</em></span> is very similar to the previous one,
but instead of <span class="emphasis"><em>operations</em></span> you can add invokers here.
            </p><p>
                Click the <span class="emphasis"><em>Save</em></span> button to save and continue configuring
the web service, <span class="emphasis"><em>Save and finish</em></span> to save and return to
the web service overview screen, or <span class="emphasis"><em>Cancel</em></span> to discard
current configuration level changes and return to web service overview
screen.
            </p><p>
                </p><div class="figure"><a name="id-1.6.12.7.7.11.7.1"></a><p class="title"><b>图 4.129. 修改WEB服务</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-change.png" alt="修改WEB服务"></div></div></div></div><p><br class="figure-break">
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                    Like the other Generic Interface configuration screens such as Network
Transport, Operation, Invoker and Mapping, the initial configuration (add)
screen will only present two options: <span class="emphasis"><em>Save</em></span> and
<span class="emphasis"><em>Cancel</em></span>. If the configuration is re-visited, a new
option <span class="emphasis"><em>Save and Finish</em></span> will appear.  The behavior of
this feature is defined below.
                </p><p>
                    <span class="emphasis"><em>Save</em></span> will store the current configuration level in the
database and it will return to the previous screen to review your changes or
to configure deeper settings.
                </p><p>
                    <span class="emphasis"><em>Save and Finish</em></span> will store the current configuration
level in the database and it will return to the previous screen in the
configuration hierarchy (to the immediate upper configuration level).
                </p><p>
                    <span class="emphasis"><em>Cancel</em></span> will discard any configuration change to the
current configuration level and will return to the previous screen in the
configuration hierarchy.
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="webservice-provider-network-transport"></a>WEB服务提供都网络传输</h6></div></div></div><p>
                    In future the list of available network transports will be
increased. Currently only <span class="emphasis"><em>HTTP::SOAP</em></span> and
<span class="emphasis"><em>HTTP::REST</em></span> transports are available. Each transport has
different configuration options to setup and they might use different
frontend modules to configure them.
                </p><p>
                    It is quite simple to configure the <span class="emphasis"><em>HTTP::SOAP</em></span> protocol
as provider.  There are only two settings: <span class="emphasis"><em>Namespace</em></span>
and <span class="emphasis"><em>Maximum message length</em></span>. These fields are
required. The first one is a URI to give SOAP methods a context, reducing
ambiguities, and the second one is a field where you can specify the maximum
size (in bytes) for SOAP messages that OTRS will process.
                </p><p>
                    </p><div class="figure"><a name="id-1.6.12.7.7.11.9.4.1"></a><p class="title"><b>图 4.130. WEB服务提供者网络传输（HTTP::SOAP）</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-provider-transport-soap.png" alt="WEB服务提供者网络传输（HTTP::SOAP）"></div></div></div></div><p><br class="figure-break">
                </p><p>
                    或者，你可能需要定义附加的响应头，它们可用于为每个响应添加静态标头值。 只需点击“添加响应头”并填充键和值字段。 附加的标头行的数量没有限制。
                </p><p>
                    For <span class="emphasis"><em>HTTP::REST</em></span> the configuration might be a bit more
complicated, as it grows dynamically for each configured operation by
adding: <span class="emphasis"><em>Route mapping for Operation
'&lt;OperationName&gt;':</em></span> and <span class="emphasis"><em>Valid request methods for
Operation '&lt;OperationName&gt;':</em></span> settings to the default
transport settings <span class="emphasis"><em>Maximum message length:</em></span> and
<span class="emphasis"><em>Send Keep-Alive:</em></span>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>路由映射，用于操作 ‘&lt;操作名称&gt;’:</p><p>
                            在这个设置中设置一个资源路径，这个路径必须根据WEB服务考虑的需求来定义，这个路径与HTTP请求方法相结合来确定要执行的通用接口操作。
                        </p><p>
                            路径中可以包含变量，格式为‘:&lt;VariableName&gt;’。在变量位置的每个路径字符串会用这个设置中定义的变量名称替换后添加到请求的有效载荷中。
                        </p><p>
                            例子：
                        </p><div class="itemizedlist"><p>
                                路由映射：/Resource
                            </p><ul class="itemizedlist" type="round"><li class="listitem"><p>有效的请求：</p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource
                                </p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource?Param1=One
                                </p></li><li class="listitem"><p>无效的请求：</p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/
                                </p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource
                                </p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource?Param1=One
                                </p></li></ul></div><div class="itemizedlist"><p>
                                路由映射：/Resource/:ID
                            </p><ul class="itemizedlist" type="round"><li class="listitem"><p>有效的请求：</p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/1
                                </p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/1?Param1=One
                                </p><p>
                                    在这两种情况下，ID=1都会发送到操作作为有效载荷的一部分。在这2种情况还添加了Param1=One，取决于HTTP请求方法还会添加其它参数（如果它们在请求头字段中作为一个JSON字符串）。
                                </p></li><li class="listitem"><p>无效的请求：</p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource
                                </p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource?Param1=One
                                </p></li></ul></div><div class="itemizedlist"><p>
                                路由映射：/Resource/OtherResource/:ID/:Color
                            </p><ul class="itemizedlist" type="round"><li class="listitem"><p>有效的请求：</p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource/1/Red
                                </p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherReosurce/123/Blue?Param1=One
                                </p><p>
                                    在第一个例子中，ID = 1且Color = Red，第二个例子中ID = 123且Color = Blue。
                                </p></li><li class="listitem"><p>无效的请求：</p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/1
                                </p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource/1
                                </p><p>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource/1?Param1=One
                                </p><p>
                                    在第一个例子中，路径缺失了'/OtherResource'和:Color变量，在第二个例子中只缺失了:Color变量。
                                </p></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>有效的请求方法，用于操作‘&lt;操作名称&gt;’：</p><p>
                            HTTP请求方法结合路由映射来确定要使用的操作，可能的选项有：CONNECT、DELETE、GET、HEAD、OPTIONS、PATCH、POST、PUT和TRACE。
                        </p><p>
                            完全不同的操作可以共享完全相同的映射路径，但是为了正确地确定使用的操作，每个操作的请求方法必须是唯一的。
                        </p></li></ul></div><p>
                    </p><div class="figure"><a name="id-1.6.12.7.7.11.9.9.1"></a><p class="title"><b>图 4.131. WEB服务提供者网络传输（HTTP::REST）</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-provider-transport-rest.png" alt="WEB服务提供者网络传输（HTTP::REST）"></div></div></div></div><p><br class="figure-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="webservice-operation"></a>WEB服务操作</h6></div></div></div><p>
                    The actions that can be performed when you are using OTRS as a provider are
called <span class="emphasis"><em>Operations</em></span>. Each operation belongs to a
controller. Controllers are collections of operations or invokers, normally
operations from the same controller need similar settings and share the same
configuration dialog. But each operation can have independent configuration
dialogs if needed.
                </p><p>
                    <span class="emphasis"><em>Name</em></span>, <span class="emphasis"><em>Description</em></span>,
<span class="emphasis"><em>Backend</em></span> and <span class="emphasis"><em>Mappings</em></span> are fields
that normally appear on every operation, other special fields can appear in
non default configuration dialogs to fulfill specific needs of the
operation.
                </p><p>
                    每个操作一般有两个映射配置部分，一个是进入数据映射，另外一个是出站数据映射。你可以为每个映射方向选择不同的映射类型（后端），因为它们的配置是彼此独立的，并且操作后端也是独立的。通常和最普遍的做法是操作在这两种情况下（反向的配置）使用相同的映射类型。完整的映射配置在一个单独的窗口（取决于映射类型）中完成。
                </p><p>
                    操作后端是预先选择的，不能编辑。如果在WEB服务编辑窗口选择了该操作你就会看到这个参数。这个字段仅用于提供信息。
                </p><p>
                    In the left part of the screen on the action column you have the options:
<span class="emphasis"><em>Go back to web service</em></span> (discarding all changes since
the last save) and <span class="emphasis"><em>Delete</em></span>.  If you click on the last
one, a dialog will open and ask you if you like to remove the
operation. Click on <span class="emphasis"><em>Delete</em></span> button to confirm the
removal of the operation and its configuration or
<span class="emphasis"><em>Cancel</em></span> to close the delete dialog.
                </p><p>
                    </p><div class="figure"><a name="id-1.6.12.7.7.11.10.7.1"></a><p class="title"><b>图 4.132. WEB服务的操作</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-operation.png" alt="WEB服务的操作"></div></div></div></div><p><br class="figure-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="webservice-requester-transport"></a>WEB服务请求者网络传输</h6></div></div></div><p>
                    The network transport configuration for the requester is similar to the
configuration for the provider. For the Requester
<span class="emphasis"><em>HTTP::SOAP</em></span> network transport there are more fields to
be set.
                </p><p>
                    Apart from the <span class="emphasis"><em>Endpoint</em></span> (URI of the Remote System web
service interface to accept requests) and <span class="emphasis"><em>Namespace</em></span>
which are required fields, you can also specify:
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                            SOAP消息的编码（如utf-8、latin1、iso-8859-1、cp1250等等）
                        </p></li><li class="listitem"><p>
                            SOAPAction Header: you can use this to send an empty or filled SOAPAction
header. Set to <span class="emphasis"><em>No</em></span> and the SOAPAction header on the SOAP
message will be an empty string, or set to <span class="emphasis"><em>Yes</em></span> to send
the SOAP action in Namespace#Action format and define the separator
(typically "/" for .Net web services and "#" for the REST).
                        </p></li><li class="listitem"><p>
                            身份认证：设置身份认证机制，设置为“-”不使用任何身份认证，或从列表中选择一个身份认证后会出现相关的详细字段。
                        </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                        Currently only the <span class="emphasis"><em>BasicAuth</em></span> (HTTP) authentication
mechanism is implemented. You can decide whether or not to use it depending
on the Remote System configuration. If used, you must provide the User Name
and the Password to access the remote system.
                    </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">警告</h3><p>
                        如果你提供了一个身份认证密码并且随后你导出这个WEB服务到一个YAML文件，这个密码会以明文字符串导出到YAML文件中。请知悉这一点并在需要时采取必要的预防措施。
                    </p></div><p>
                    </p><div class="figure"><a name="id-1.6.12.7.7.11.11.7.1"></a><p class="title"><b>图 4.133. WEB服务请求者的网络传输（HTTP::SOAP）</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-requester-transport-soap.png" alt="WEB服务请求者的网络传输（HTTP::SOAP）"></div></div></div></div><p><br class="figure-break">
                </p><p>
                    In the case of HTTP::REST, this configuration also grows dynamically
depending on the configured invokers by adding <span class="emphasis"><em>Controller mapping
for Invoker '&lt;InvokerName&gt;':</em></span> and <span class="emphasis"><em>Valid request
command for Invoker '&lt;InvokerName&gt;':</em></span> for each
invoke. Authentication and SSL options are similar to the ones in HTTP::SOAP
                </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>主机</p><p>
                            远程系统的主机名称或IP地址和端口号，如果没有端口号，默认使用80端口。
                        </p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>控制器映射，用于调用程序&lt;调用程序名称&gt;:</p><p>
                            在这个设置中设置一个资源路径，这个路径必须根据远程WEB服务的需求来定义，并遵从它的规定。
                        </p><p>
                            路径可以包含‘:&lt;变量名称&gt;’格式的变量，每个变量名称匹配（要发送的）当前数据将被对应的数据值替换。匹配的变量名称和值将从当前数据中移除。取决于HTTP请求命令，剩余的数据可以在请求正文中作为一个JSON字符串或在URI中作为查询参数发送。
                        </p><p>
                            例子：
                        </p><p>
                            当前数据：Var1 = One, Var2 = Two, Var3 = Three and Var4 = Four。
                        </p><div class="itemizedlist"><p>
                                控制器映射：/Resource
                            </p><ul class="itemizedlist" type="round"><li class="listitem"><p>替换后：</p><p>/Resource</p></li><li class="listitem"><p>剩余数据：</p><p> Var1 = One, Var2 = Two, Var3 = Three and Var4 = Four</p></li></ul></div><div class="itemizedlist"><p>
                                控制器映射：/Resource/:Var1
                            </p><ul class="itemizedlist" type="round"><li class="listitem"><p>替换后：</p><p>/Resource/One</p></li><li class="listitem"><p>剩余数据：</p><p> Var2 = Two, Var3 = Three and Var4 = Four</p></li></ul></div><div class="itemizedlist"><p>
                                控制器映射：/Resource/:Var1?Param1=:Var2&amp;Var3=:Var3
                            </p><ul class="itemizedlist" type="round"><li class="listitem"><p>替换后：</p><p>/Resource/One?Param1=Two&amp;Var3=Three</p></li><li class="listitem"><p>剩余数据：</p><p>Var4 = Four</p></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>有效的请求命令，用于调用程序 ‘&lt;调用程序名称&gt;’：</p><p>
                            这个字段确定使用的HTTP请求方法，可能的选项有：CONNECT、DELETE、GET、HEAD、OPTIONS、PATCH、POST、PUT和TRACE。如果没有选择命令，则使用默认命令。
                        </p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>默认命令</p><p>
                            用作所有没有定义请求命令的调用程序的最后依靠。
                        </p></li></ul></div><p>
                    </p><div class="figure"><a name="id-1.6.12.7.7.11.11.13.1"></a><p class="title"><b>图 4.134. WEB服务请求者网络传输（HTTP::REST）</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-requester-transport-rest.png" alt="WEB服务请求者网络传输（HTTP::REST）"></div></div></div></div><p><br class="figure-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="webservice-invoker"></a>WEB服务调用程序</h6></div></div></div><p>
                    The actions that can be performed when you are using OTRS as a requester are
called <span class="emphasis"><em>Invokers</em></span>. Each invoker belongs to a controller
(controllers are collections of operations or invokers). Usually invokers
from the same controller need similar settings and share the same
configuration dialogs.  Each invoker can have independent configuration
dialogs if needed.
                </p><p>
                    <span class="emphasis"><em>Name</em></span>, <span class="emphasis"><em>Description</em></span>,
<span class="emphasis"><em>Backend</em></span> and <span class="emphasis"><em>Mappings</em></span> are fields
that normally appear on every invoker. Additionally the list of event
triggers and other special fields can appear on non default configuration
dialogs to fulfill special needs of the invoker.
                </p><p>
                    每个调用程序通常有两个映射配置部分，一个是对进入的数据，另外一个是对发出的数据。你可以给每个映射方向选择不同的映射类型（后端），因为它们的配置是彼此独立的，调用程序后端也是独立的。通常和最普遍的做法是调用程序在这两种情况下（反射的配置）使用相同的映射类型。完整的映射配置在一个单独的窗口（取决于映射类型）中完成。
                </p><p>
                    操作后端是预先选择的，不能编辑。如果在WEB服务编辑窗口选择了该调用程序你就会看到这个参数。这个字段仅用于提供信息。
                </p><p>
                    Event triggers are events within OTRS such as
<code class="literal">TicketCreate</code>, <code class="literal">ArticleSend</code>, etc. These
can act as triggers to execute the invoker. Each invoker needs to have at
least one event trigger registered, or the invoker will be useless, because
it will never be called. Additionally a set of rules (conditions) for each
event can be defined to have more control over the triggering of the
events.  These rules depend on the data of the object associated with the
event.  The asynchronous property of the event triggers define if the OTRS
process will handle the invoker or if it will be delegated to the OTRS
Daemon.
                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                        OTRS守护进程是一个执行后台任务的单独的进程集，使用守护进程就不会影响OTRS进程本身，比如服务不可用或有网络问题，远程系统花费大量时间才响应。如果你不使用OTRS守护进程，则使用WEB服务会导致OTRS变慢或无法响应。所以强烈推荐尽可能使用异步事件触发器。
                    </p></div><p>
                    To add an Event trigger, first select the event family from the first list,
then the event name from the second list, then set the asynchronous property
(if unchecked means that the event trigger will not be asynchronous) and
finally click on the plus button. A new event trigger will be created and it
will be listed on the invoker <span class="emphasis"><em>Event Triggers</em></span> list.
                </p><p>
                    From the <span class="emphasis"><em>Event Triggers</em></span> list each events shows if it
contains conditions or not.  The edit button next to the condition property
allows to add or edit the current conditions of the event.
                </p><p>
                    To delete an Event trigger, simply locate the event trigger to be deleted in
the <span class="emphasis"><em>Event Triggers</em></span> list and click on the trash icon at
the end of the row. This will open a dialog that asks you if you are sure to
delete the event trigger.  Click <span class="emphasis"><em>Delete</em></span> to remove the
event trigger from the list, or <span class="emphasis"><em>Cancel</em></span> to close the
dialog.
                </p><p>
                    In the left part of the screen on the action column you have the options:
<span class="emphasis"><em>Go back to web service</em></span> (discarding all changes since
the last save) and "Delete".  If you click on the last one, a dialog will
emerge and ask you if you like to remove the invoker. Click on the
<span class="emphasis"><em>Delete</em></span> button to confirm the removal of the invoker and
its configuration or <span class="emphasis"><em>Cancel</em></span> to close the delete dialog.
                </p><p>
                    </p><div class="figure"><a name="id-1.6.12.7.7.11.12.12.1"></a><p class="title"><b>图 4.135. WEB服务调用程序</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-invoker.png" alt="WEB服务调用程序"></div></div></div></div><p><br class="figure-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="webservice-invoker-event"></a>WEB服务调用程序事件</h6></div></div></div><p>
                    有时定义一个事件来触发一个调用程序可能会导致对远程服务器的许多不必要或错误的请求。 在这种情况下，可以设置事件条件来限制调用程序的触发。
                </p><p>
                    To access the event settings screen where the conditions can be defined is
necessary to be in the invoker screen and from there click on the edit icon
next to the condition status on the event where this condition should take
effect.
                </p><p>
                    Within the event settings screen in the action bar there is a button to go
back to the invoker screen as well as a button to remove all the event
conditions.  By default the screen is pre-populated with the first
condition. Update the Type of linkings between conditions if more than one
condition is planned, then change the Type of linking from
<span class="emphasis"><em>Condition 1</em></span> if more than one field is planned. Both
linking fields accept <span class="emphasis"><em>and</em></span>, <span class="emphasis"><em>or</em></span> or
<span class="emphasis"><em>xor</em></span> as values.
                </p><p>
                    Fill the <span class="emphasis"><em>Field</em></span> name, set the matching type
(<span class="emphasis"><em>String</em></span> for exact match, <span class="emphasis"><em>Regexp</em></span>
for regular expression or <span class="emphasis"><em>Validation Module</em></span>) and set
Value to match (in case of <span class="emphasis"><em>Validation Module</em></span> the full
class name like:
<code class="literal">Kernel::GenericInterface::Event::Validation::ValidateDemo</code>).
                </p><p>
                    To add more fields to the condition, click on the <span class="emphasis"><em>+</em></span>
button in the fields header. To remove a field, click on the
<span class="emphasis"><em>-</em></span> button in the field row. It is necessary to keep at
least one field per condition.
                </p><p>
                    To add more conditions click on the button below the last condition box.  To
remove a condition, click on the <span class="emphasis"><em>-</em></span> button in the
condition header.  It is necessary to keep at least one condition in the
set. To remove all conditions use the button in the sidebar.
                </p><p>
                    </p><div class="figure"><a name="id-1.6.12.7.7.11.13.8.1"></a><p class="title"><b>图 4.136. WEB服务调用程序事件</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-invoker-event.png" alt="WEB服务调用程序事件"></div></div></div></div><p><br class="figure-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="webservice-mapping"></a>WEB服务映射</h6></div></div></div><p>
                    有这种情况：你需要将一种格式的数据转化为另外的格式（映射或修改数据结构），因为通常一个WEB服务用来与一个远程系统交互，很可能不是另外一个OTRS系统并且/或者不能理解OTRS数据结构和值。在这些情况下一些或所有值必须被修改，有些时候甚至值的名称（键）或整个结构都需要修改，才能匹配另外一端期望的数据。
                </p><p>
                    Each Remote System has it own data structures and it is possible to create
new mapping modules for each case (e.g. there is a customized mapping module
for SAP Solution Manager shipped with OTRS), but it is not always
necessary.  The module <code class="literal">Mapping::Simple</code> should cover most
of the mapping needs.
                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                        When <code class="literal">Mapping::Simple</code> does not cover all mapping needs for
a web service, a new mapping module should be created. To learn more about
how to create new mapping modules please consult the OTRS Development
Manual.
                    </p></div><p>
                    这个模块让你有机会设置默认值来映射整个通讯数据中的每个键或值。
                </p><p>
                    在窗口的开始部分你会看到一个通用部分，在这里你可以设置默认规则，适用于所有没有映射的键和值。还有3个选项可用，如下列表：
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                            保持（保持不变）：不对键或值做任何改动。
                        </p></li><li class="listitem"><p>
                            忽略（丢弃键/值对）：当这个选项用于键时它会删除键和值，因为当一个键被删除时结果就是键相关的值也被删除。当这个选项用于值时，只有这个值被删除，保留键（现在会关联一个空值）。
                        </p></li><li class="listitem"><p>
                            映射到（使用提供键或值为默认）：所有没有定义映射规则的键和/或值，使用这个映射作为默认映射，当你选择这个选项后会出现一个新的文本字段，用来设置默认键或值。
                        </p></li></ul></div><p>
                    Clicking on the <span class="emphasis"><em>+</em></span> button for new key map, will display
a new box for a single mapping configuration. You can add as many key
mappings as needed. Just click on the <span class="emphasis"><em>+</em></span> button again
and a new mapping box will appear below the existing one. From this mapping
boxes you can define a map for a single key, with the next options:
                </p><p>
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                准确值：如果原键完全匹配，原键字符串会变为一个新的键。
                            </p></li><li class="listitem"><p>
                                正则表达式：键字符串会按照一个正则表达式规则进行替换。
                            </p></li></ul></div><p>
                </p><p>
                    Pressing the new value map <span class="emphasis"><em>+</em></span> button will display a new
row for a value map.  Here it is also possible to define rules for each
value to be mapped with the same options as for the key map (Exact value and
Regular expression). You can add as many values to map as needed, and if you
want to delete one of them, just click on the <span class="emphasis"><em>-</em></span> button
for each mapping value row.
                </p><p>
                    Deleting the complete key mapping section (box) is possible, just push on
the <span class="emphasis"><em>-</em></span> button located on the up right corner of each box
that you want to delete.
                </p><p>
                    If you need to delete a complete mapping configuration: go back to the
corresponding operation or invoker screen, look for the mapping direction
that you select before and set its value to <span class="emphasis"><em>-</em></span>, and save
the configuration to apply changes.
                </p><p>
                    </p><div class="figure"><a name="id-1.6.12.7.7.11.14.13.1"></a><p class="title"><b>图 4.137. WEB服务映射</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/administration/genericinterface/genericinterface-webservice-mapping.png" alt="WEB服务映射"></div></div></div></div><p><br class="figure-break">
                </p></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="webservice_cli"></a>WEB服务命令行接口</h3></div></div></div><p>
        <code class="filename">bin/otrs.Console.pl
Admin::WebService::*</code>系列命令被设计为一组基本但快速、强大的的工具以处理WEB服务配置。它们让你能够执行下列操作：
    </p><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Add（添加）：使用一个YAML文件作为配置源来创建WEB服务。</p></li><li class="listitem"><p>Update（更新）：修改一个已有的WEB服务，使用一个不同的或修改过的YAML文件来修改WEB服务的配置。</p></li><li class="listitem"><p>Dump（转储）：将当前的WEB服务的配置保存到一个文件。</p></li><li class="listitem"><p>List（列表）：获取当前系统中注册的所有WEB服务的完整清单。</p></li><li class="listitem"><p>Delete（删除）：从系统中删除一个WEB服务。使用它的时候要小心，因为这个操作无法复原。</p></li></ul></div><p>
    </p><p>
        例子：创建一个新的WEB服务配置：
    </p><p>
        </p><pre class="screen">
shell&gt; bin/otrs.Console.pl Admin::WebService::Add --name &lt;webservice_name&gt; --source-path /path/to/yaml/file
        </pre><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="genericinterface-webservice-configuration"></a>WEB服务配置</h3></div></div></div><p>
        从WEB服务的设计来说，它主要考虑从一个OTRS系统到另外一个OTRS系统的可移植性，例如从一个测试或开发环境移植到生产系统。所以需要有一种容易的方式来从数据库提取WEB服务配置，并将它导入到另外一个系统。为完成这个任务，通用接口使用YAML文件作为WEB服务的配置基础。
    </p><p>
        为什么是YAML？YAML是一种标记语言，设计为人类友好的读和写（它比JSON更容易理解）。它没有XML的一些限制如数字标签，它是开放的和标准化的，并且完全足够用来存储整个WEB服务配置。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
            要学习关于YAML的更多内容，请访问<a class="ulink" href="http://www.yaml.org/" target="_top">http://www.yaml.org/</a>。
        </p></div><p>
        下面是一个YAML格式的WEB服务配置文件例子：
    </p><p>
        </p><pre class="programlisting">
---
Debugger:
  DebugThreshold: debug
Description: This an example of a web service configuration
Provider:
  Operation:
    CloseIncident:
      Description: This is a test operation
      MappingInbound: {}
      MappingOutbound: {}
      RemoteSystemGuid: ''
      Type: Test::Test
    Test:
      Description: This is a test operation
      MappingInbound:
        Config:
          KeyMapDefault:
            MapTo: ''
            MapType: Keep
          KeyMapExact:
            Prio: Priority
          ValueMap:
            Priority:
              ValueMapExact:
                Critical: 5 Very High
                Information: 1 Very Low
                Warning: 3 Normal
          ValueMapDefault:
            MapTo: 3 Normal
            MapType: MapTo
        Type: Simple
      MappingOutbound:
        Config:
          KeyMapDefault:
            MapTo: ''
            MapType: Ignore
          KeyMapExact:
            Priority: Prio
          ValueMap:
            Prio:
              ValueMapExact:
                1 Very Low: Information
                3 Normal: Warning
                5 Very High: Critical
          ValueMapDefault:
            MapTo: ''
            MapType: Ignore
        Type: Simple
      Type: Test::Test
  Transport:
    Config:
      MaxLength: 10000000
      NameSpace: http://www.example.com/actions
    Type: HTTP::SOAP
RemoteSystem: remote.system.description.example.com
Requester:
  Invoker:
    Test:
      Description: This is a test invoker
      Events:
        - Asynchronous: 1
        Condition:
          Condition:
            '1':
              Fields:
                Queue:
                  Match: Raw
                  Type: String
              Type: and
          ConditionLinking: and
          Event: TicketCreate
        - Asynchronous: 0
          Event: ArticleUpdate
      MappingInbound:
        Type: Simple
      MappingOutbound:
        Type: Simple
      Type: Test::Test
  Transport:
    Config:
      Authentication:
        Password: '*******'
        Type: BasicAuth
        User: otrs
      Encoding: utf-8
      Endpoint: http://www.example.com:8080/endpoint
      NameSpace: http://www.example.com/actions
      SOAPAction: Yes
      SOAPActionSeparator: '#'
    Type: HTTP::SOAP
            
        </pre><p>
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.6.12.9.7"></a>
            配置详细信息
        </h4></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.9.7.2"></a>
                一般
            </h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                        <code class="literal">Description</code>: a short text that describes the web service.
                    </p></li><li class="listitem"><p>
                        <code class="literal">RemoteSystem</code>: a short description of the Remote System.
                    </p></li><li class="listitem"><p>
                        <code class="literal">Debugger</code>: a container for the debugger settings.
                    </p></li><li class="listitem"><p>
                        <code class="literal">Provider</code>: a container for the provider settings.
                    </p></li><li class="listitem"><p>
                        <code class="literal">Requester</code>: a container for the requester settings.
                    </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.9.7.3"></a>
                <code class="literal">Debugger</code>
            </h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                        <code class="literal">DebugThreshold</code>: the debugger level.
                    </p><div class="itemizedlist"><p class="title"><b>
                            可能值
                        </b></p><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                <code class="literal">debug</code>: all logs are stored in the database.
                            </p></li><li class="listitem"><p>
                                <code class="literal">info</code>: info, notice and error level logs are stored in the
database.
                            </p></li><li class="listitem"><p>
                                <code class="literal">notice</code>: notice and error level logs are stored in the
database.
                            </p></li><li class="listitem"><p>
                                <code class="literal">error</code>: only error level logs are stored in the database.
                            </p></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.9.7.4"></a>
                <code class="literal">Provider</code>
            </h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                        <code class="literal">Operation</code>: a container for each operation settings.
                    </p></li><li class="listitem"><p>
                        <code class="literal">Transport</code>: a container for provider network transport
settings.
                    </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3"></a>
                    <code class="literal">Operation</code>
                </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                            <code class="literal">&lt;OperationName&gt;</code>: Unique name for the operation,
container for its own operation settings (cardinality 0..n, but not
duplicate).
                        </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3"></a>
                        <code class="literal">&lt;OperationName&gt;</code>
                    </h6></div></div></div><p>
                        This section is based on operations from type <code class="literal">Test::Test</code>
other operations might contain more or different settings.
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                <code class="literal">Description</code>: a short text that describes the operation.
                            </p></li><li class="listitem"><p>
                                <code class="literal">MappingInbound</code>: a container for the mapping settings for
the incoming request data.
                            </p></li><li class="listitem"><p>
                                <code class="literal">MappingOutbound</code>: a container for the mapping settings for
the outgoing response data.
                            </p></li><li class="listitem"><p>
                                <code class="literal">Type</code>: the operation backend, in Controller::Operation
format.
                            </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4"></a>
                            <code class="literal">MappingInbound</code>
                        </h6></div></div></div><p>
                            This section is based on mappings from type <code class="literal">Simple</code>. Other
mappings might contain more or different settings.
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    <code class="literal">Config</code>: a container for this mapping settings.
                                </p></li><li class="listitem"><p>
                                    <code class="literal">Type</code>: the mapping backend.
                                </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4.4"></a>
                                    <code class="literal">Config</code>
                                </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                            <code class="literal">KeyMapDefault</code>: a container for all non mapped keys
settings.
                                        </p></li><li class="listitem"><p>
                                            <code class="literal">ValueMapDefault</code>: a container for all non mapped values
settings.
                                        </p></li><li class="listitem"><p>
                                            <code class="literal">KeyMapExact</code>: a container for all exact key mappings
(cardinality 0 .. 1).
                                        </p></li><li class="listitem"><p>
                                            <code class="literal">KeyMapRegEx</code>: a container for all regular expression key
mappings (cardinality 0 .. 1).
                                        </p></li><li class="listitem"><p>
                                            <code class="literal">ValueMap</code>: a container for all value mappings (cardinality
0 .. 1).
                                        </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4.4.3"></a>
                                        <code class="literal">KeyMapDefault</code>
                                    </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                <code class="literal">MapTo</code>: the new value to be used (only applicable if
<code class="literal">MapType</code> is set to <code class="literal">MapTo</code>).
                                            </p></li><li class="listitem"><p>
                                                <code class="literal">MapType</code>: the rule for the mapping.
                                            </p><div class="itemizedlist"><p class="title"><b>可能值</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                        <code class="literal">Keep</code>: leave unchanged.
                                                    </p></li><li class="listitem"><p>
                                                        <code class="literal">Ignore</code>: drop.
                                                    </p></li><li class="listitem"><p>
                                                        <code class="literal">MapTo</code>: change to the <code class="literal">MapTo</code> value.
                                                    </p></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4.4.4"></a>
                                        <code class="literal">ValueMapDefault</code>
                                    </h6></div></div></div><p>
                                        Similar to <code class="literal">KeyMapDefault</code>.
                                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4.4.5"></a>
                                        <code class="literal">KeyMapExact</code>
                                    </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                <code class="literal">&lt;oldkey&gt;</code>: <code class="literal">&lt;newkey&gt;</code>
(cardinality 0 .. n but not duplicate).
                                            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4.4.6"></a>
                                        <code class="literal">KeyMapRegEx</code>
                                    </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                <code class="literal">&lt;oldkey(RegEx)&gt;</code>: <code class="literal">&lt;newkey&gt;</code>
( cardinality 0 .. n but no duplicates).
                                            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4.4.7"></a>
                                        <code class="literal">ValueMap</code>
                                    </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                <code class="literal">&lt;newkey&gt;</code>: a container for value mappings for this
new key (cardinality depends on the new keys from
<code class="literal">KeyMapExact</code> and <code class="literal">KeyMapRegEx</code>).
                                            </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4.4.7.3"></a>
                                            <code class="literal">&lt;newkey&gt;</code>
                                        </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                    <code class="literal">ValueMapExact</code>: a container for all exact value mappings
(cardinality 0 .. 1).
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">ValueMapRegEx</code>: a container for all regular expression
value mappings (cardinality 0 .. 1).
                                                </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4.4.7.3.3"></a>
                                                <code class="literal">ValueMapExact</code>
                                            </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                        <code class="literal">&lt;oldvalue&gt;</code>: <code class="literal">&lt;newvalue&gt;</code> (
cardinality 0 .. n but not duplicate).
                                                    </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.4.4.7.3.4"></a>
                                                <code class="literal">ValueMapRegEx</code>
                                            </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                        <code class="literal">&lt;oldvalue(RegEx)&gt;</code>:
<code class="literal">&lt;newvalue&gt;</code> ( cardinality 0 .. n but not duplicate).
                                                    </p></li></ul></div></div></div></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.5"></a>
                            <code class="literal">MappingOutbound</code>
                        </h6></div></div></div><p>
                            Same as <code class="literal">MappingInbound</code>.
                        </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.6"></a>
                            <code class="literal">Transport</code>
                        </h6></div></div></div><p>
                            本部分基于提供者的网络传输HTTP::SOAP，其它的传输可能包含更多或不同的设置。
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    <code class="literal">Config</code>: a container for the specific network transport
configuration settings.
                                </p></li><li class="listitem"><p>
                                    <code class="literal">Type</code>: the provider network transport backend.
                                </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.4.3.3.6.4"></a>
                                <code class="literal">Config</code>
                            </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        <code class="literal">MaxLength</code>: the maximum length in bytes to be read in a
SOAP message by OTRS.
                                    </p></li><li class="listitem"><p>
                                        <code class="literal">NameSpace</code>: an URI that gives a context to all operations
that belongs to this web service.
                                    </p></li></ul></div></div></div></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.9.7.5"></a>
                <code class="literal">Requester</code>
            </h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                        <code class="literal">Invoker</code>: a container for each invokers' settings.
                    </p></li><li class="listitem"><p>
                        <code class="literal">Transport</code>: a container for requester network transport
settings.
                    </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3"></a>
                    <code class="literal">Invoker</code>
                </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                            <code class="literal">&lt;InvokerName&gt;</code>: Unique name for the invoker,
container for its own invoker settings (cardinality 0..n, but not
duplicate).
                        </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3"></a>
                        <code class="literal">&lt;InvokerName&gt;</code>
                    </h6></div></div></div><p>
                        This section is based on invokers from type <code class="literal">Test::Test</code>
other invokers might contain more or different settings.
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                <code class="literal">Description</code>: a short text that describes the invoker.
                            </p></li><li class="listitem"><p>
                                <code class="literal">Events</code>: a container for a unnamed list of event trigger
settings.
                            </p></li><li class="listitem"><p>
                                <code class="literal">MappingInbound</code>: a container for the mapping settings for
the incoming response data.
                            </p></li><li class="listitem"><p>
                                <code class="literal">MappingOutbound</code>: a container for the mapping settings for
the outgoing request data.
                            </p></li><li class="listitem"><p>
                                <code class="literal">Type</code>: the invoker backend, in
<code class="literal">Controller::Invoker</code> format.
                            </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.4"></a>
                            <code class="literal">Events</code>
                        </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    <em><span class="remark">列表元素</span></em>：（基数 0 .. n）。
                                </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                            <code class="literal">Asynchronous</code>: to set if the invoker execution will be
delegated to the OTRS Daemon.
                                        </p><div class="itemizedlist"><p class="title"><b>可能值</b></p><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                    0：不由OTRS守护进程执行调用程序。
                                                </p></li><li class="listitem"><p>
                                                    1：由OTRS守护进程执行调用程序。
                                                </p></li></ul></div></li><li class="listitem"><p>
                                            <code class="literal">Condition</code>: Container for event conditions to trigger the
invoker, if there are no conditions, event will always trigger the invoker.
                                        </p></li><li class="listitem"><p>
                                            <code class="literal">Event</code>: the name of the event trigger.
                                        </p><div class="itemizedlist"><p class="title"><b>Possible values (for ticket events)</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                    <code class="literal">TicketCreate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketDelete</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketTitleUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketUnlockTimeoutUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketQueueUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketTypeUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketServiceUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketSLAUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketCustomerUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketPendingTimeUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketLockUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketArchiveFlagUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketStateUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketOwnerUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketResponsibleUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketPriorityUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">HistoryAdd</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">HistoryDelete</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketAccountTime</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketMerge</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketSubscribe</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketUnsubscribe</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketFlagSet</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketFlagDelete</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketSlaveLinkAdd</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketSlaveLinkDelete</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">TicketMasterLinkDelete</code>
                                                </p></li></ul></div><div class="itemizedlist"><p class="title"><b>Possible values (for article events)</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                    <code class="literal">ArticleCreate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">ArticleUpdate</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">ArticleSend</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">ArticleBounce</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">ArticleAgentNotification</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">ArticleCustomerNotification</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">ArticleAutoResponse</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">ArticleFlagSet</code>
                                                </p></li><li class="listitem"><p>
                                                    <code class="literal">ArticleFlagDelete</code>
                                                </p></li></ul></div></li></ul></div></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.4.3"></a>
                                <code class="literal">Condition</code>
                            </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        <code class="literal">Condition</code>: Container to actual event conditions.
                                    </p></li><li class="listitem"><p>
                                        <code class="literal">ConditionLinking</code>: Defines how multiple condition
interacts with each other.
                                    </p><div class="itemizedlist"><p class="title"><b>Possible values (for condition linking)</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                <code class="literal">and</code>
                                            </p></li><li class="listitem"><p>
                                                <code class="literal">or</code>
                                            </p></li><li class="listitem"><p>
                                                <code class="literal">xor</code>
                                            </p></li></ul></div></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.4.3.3"></a>
                                    <code class="literal">Condition</code> -&gt; <code class="literal">Condition</code>
                                </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                            <code class="literal">&lt;ConditionName&gt;</code>: Container for the condition
elements.
                                        </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.4.3.3.3"></a>
                                        <code class="literal">&lt;ConditionName&gt;</code>
                                    </h6></div></div></div><p>
                                        调用程序和事件中的条件的唯一名称，图形用户界面从1开始分配连续的整数作为条件名称。
                                    </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                <code class="literal">Fields</code>: Container for field conditions.
                                            </p></li><li class="listitem"><p>
                                                <code class="literal">Type</code>: Define how multiple fields interact within its
condition.
                                            </p><div class="itemizedlist"><p class="title"><b>Possible values (for condition linking)</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                        <code class="literal">and</code>
                                                    </p></li><li class="listitem"><p>
                                                        <code class="literal">or</code>
                                                    </p></li><li class="listitem"><p>
                                                        <code class="literal">xor</code>
                                                    </p></li></ul></div></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.4.3.3.3.4"></a>
                                            <code class="literal">Fields</code>
                                        </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                    <code class="literal">&lt;FieldName&gt;</code>: Container field attributes.
                                                </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.4.3.3.3.4.3"></a>
                                                <code class="literal">&lt;FieldName&gt;</code>
                                            </h6></div></div></div><p>
                                                The name of a field from the event object (e.g.  for Ticket Events, the
fields could be <code class="literal">Queue</code>, <code class="literal">Priority</code>,
<code class="literal">Type</code>, etc).
                                            </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                        <code class="literal">Match</code>: The value to match from the selected against the
event object using the <code class="literal">Type</code> modifier.
                                                    </p></li><li class="listitem"><p>
                                                        <code class="literal">Type</code>: Modifier to the <code class="literal">Match</code> value.
                                                    </p><div class="itemizedlist"><p class="title"><b>Possible values (for type modifier)</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                                                <code class="literal">String</code>: Direct compare between object field value and
<code class="literal">Match</code> value.
                                                            </p></li><li class="listitem"><p>
                                                                <code class="literal">Regexp</code>: Compare object field value with the regular
expression defined in the <code class="literal">Match</code> value.
                                                            </p></li><li class="listitem"><p>
                                                                <code class="literal">Module</code>: Use the module defined in the
<code class="literal">Match</code> with the object data.
                                                            </p></li></ul></div></li></ul></div></div></div></div></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.5"></a>
                            <code class="literal">MappingInbound</code>
                        </h6></div></div></div><p>
                            Same as <code class="literal">Operation</code> <code class="literal">MappingInbound</code>.
                        </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.6"></a>
                            <code class="literal">MappingOutbound</code>
                        </h6></div></div></div><p>
                            Same as <code class="literal">Operation</code> <code class="literal">MappingInbound</code>.
                        </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.7"></a>
                            <code class="literal">Transport</code>
                        </h6></div></div></div><p>
                            本部分基于请求者的网络传输HTTP::SOAP，其它的传输可能包含更多或不同的设置。
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                    <code class="literal">Config</code>: a container for the specific network transport
configuration settings.
                                </p></li><li class="listitem"><p>
                                    <code class="literal">Type</code>: the requester network transport backend.
                                </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.7.4"></a>
                                <code class="literal">Config</code>
                            </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                        <code class="literal">Authentication</code>: a container for authentication settings.
                                    </p></li><li class="listitem"><p>
                                        <code class="literal">Encoding</code>: the SOAP Message request encoding.
                                    </p></li><li class="listitem"><p>
                                        <code class="literal">Endpoint</code>: the URI of the Remote Server web service to
accept OTRS requests.
                                    </p></li><li class="listitem"><p>
                                        <code class="literal">NameSpace</code>: an URI that gives a context to all invokers
that belongs to this web service.
                                    </p></li><li class="listitem"><p>
                                        <code class="literal">SOAPAction</code>: to send an empty or filled
<code class="literal">SOAPAction</code> header in the SOAP message (in
<code class="literal">&lt;NameSpace&gt; &lt;Separator&gt; &lt;Action&gt;</code>
format).
                                    </p><div class="itemizedlist"><p class="title"><b>可能值</b></p><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                <code class="literal">Yes</code>: to send a filled <code class="literal">SOAPAction</code>
header.
                                            </p></li><li class="listitem"><p>
                                                <code class="literal">No</code>: to send an empty <code class="literal">SOAPAction</code>
header.
                                            </p></li></ul></div></li><li class="listitem"><p>
                                        <code class="literal">SOAPActionSeparator</code>: to set the
<code class="literal">&lt;Separator&gt;</code> of a filled
<code class="literal">SOAPAction</code> header.
                                    </p><div class="itemizedlist"><p class="title"><b>可能值</b></p><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                                <code class="literal">'/'</code>: used for .net web services.
                                            </p></li><li class="listitem"><p>
                                                <code class="literal">'#'</code>: used for all the rest web services.
                                            </p></li></ul></div></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.9.7.5.3.3.7.4.3"></a>
                                    <code class="literal">Authentication</code>
                                </h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="round"><li class="listitem"><p>
                                            <code class="literal">User</code>: the privileged user name that has access to the
remote web service.
                                        </p></li><li class="listitem"><p>
                                            <code class="literal">Password</code>: the password for privileged user in plain text.
                                        </p></li><li class="listitem"><p>
                                            <code class="literal">Type</code>: the type of authentication.
                                        </p></li></ul></div></div></div></div></div></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="genericinterface-connectors"></a>连接器</h3></div></div></div><p>
        连接器本质上是动作（在OTRS作为WEB服务提供者时叫操作，在OTRS作为WEB服务请求者时啊调用程序）的集合。但是它也可以包含特殊的映射或传输。
    </p><p>
        一个连接器可以只有操作、只有调用程序或者两者都有。一个连接器甚至可以使用其它连接器的一部分如映射或传输（如果它们不是部署为特定的连接器的话）。
    </p><p>
        换句话说，连接器不局限于控制器层，在需要时还能扩展到数据映射或网络传输层。
    </p><p>
        由于通用接口的模块化设计，连接器可以看作是一个插件；这意味着通过添加连接器，通用接口的能力可以扩展使用在：OTRS功能插件、OTRS定制模块、第三方模块等等。
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="genericinterface-bundled-connectors"></a>捆绑的连接器</h4></div></div></div><p>
            在当前版本的OTRS中有下列连接器可以使用：
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                    FAQ 知识库
                </p></li><li class="listitem"><p>
                    会话
                </p></li><li class="listitem"><p>
                    工单
                </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="generic-faq-connector"></a>FAQ Connector</h5></div></div></div><p>
                This connector get and search public FAQ items, as well as list FAQ
languages and categories.
            </p><div class="itemizedlist"><p>
                    提供：
                </p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        操作：
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                LanguageList
                            </p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                PublicCategoryList
                            </p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                PublicFAQGet
                            </p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                PublicFAQSearch
                            </p></li></ul></div></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-faq-connector-operations"></a>操作</h6></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-faq-connector-operations-languagelist"></a>LanguageList</h6></div></div></div><p>
                        For this operation is not necessary to send any special parameter to the
server, you just need to request the web service directly indicating the
"LanguageList" operation. The operation will return a list of languages
including ID and the Name for each language on the system.
                    </p><p>可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;LanguageList/&gt;
                            
                        </pre><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-faq-connector-operations-publiccategorylist"></a>PublicCategoryList</h6></div></div></div><p>
                        For this operation is also not necessary any special parameter, just the
simple call for requesting the web service with the operation name
'PublicCategoryList' as a response you will receive a list of categories
including the ID and the Name (long format) for each category.
                    </p><p> 可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;PublicCategoryList/&gt;
                            
                        </pre><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-faq-connector-operations-publicfaqget"></a>PublicFAQGet</h6></div></div></div><p>
                        To be able to get one or more FAQ entries, you should send the ItemID(s) as
a parameter for the FAQ entry you want to get. You will receive the entire
FAQ record with all attachments included. Note that attachment contents will
be transferred as base64-encoded strings.
                    </p><p>
                        Setting GetAttachmentContents to 0 will prevent to fetch the content of the
attachment this will increase the performance of the operation when the
attachment contents are not really needed.
                    </p><p> 可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;PublicFAQGet&gt;
         &lt;ItemID&gt;?&lt;/ItemID&gt;
         &lt;!-- optional, defaults to 1 --&gt;
         &lt;GetAttachmentContents&gt;?&lt;/GetAttachmentContents&gt;
      &lt;/PublicFAQGet&gt;
                            
                        </pre><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-faq-connector-operations-publicfaqsearch"></a>PublicFAQSearch</h6></div></div></div><p>
                        For this operation you can specify the following optional parameters: Name,
Title, What (full text search), Keyword, LanguageIDs and CategoryIDs to
narrow the search results.  You may also specify the order of the results by
the following parameters: OrderBy and OrderByDirection.
                    </p><p>
                        Send a request to the web service with the operation name 'PublicFAQSearch'
as a response you will receive a list of FAQ item IDs.
                    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                            The full FAQ item data can be retrieved for each ID by using 'PublicFAQGet'
operation separately.
                        </p></div><p> 可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;PublicFAQSearch&gt;
         &lt;!--Optional:--&gt;
         &lt;Number&gt;?&lt;/Number&gt;
         &lt;!--Optional:--&gt;
         &lt;Title&gt;?&lt;/Title&gt;
         &lt;!--Optional:--&gt;
         &lt;What&gt;?&lt;/What&gt;
         &lt;!--Optional:--&gt;
         &lt;Keyword&gt;?&lt;/Keyword&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;LanguageIDs&gt;?&lt;/LanguageIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CategoryIDs&gt;?&lt;/CategoryIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;SortBy&gt;?&lt;/SortBy&gt;
         &lt;!--Optional:--&gt;
         &lt;OrderBy&gt;?&lt;/OrderBy&gt;
         &lt;!--Optional:--&gt;
         &lt;OprderByDirection&gt;?&lt;/OprderByDirection&gt;
      &lt;/PublicFAQSearch&gt;
                            
                        </pre><p>
                    </p></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="generic-session-connector"></a>会话连接器</h5></div></div></div><p>
                这个连接器可以创建一个有效的会话ID，能够用在其它任何操作中。
            </p><div class="itemizedlist"><p>
                    提供：
                </p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        操作：
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                SessionCreate（创建会话）
                            </p></li><li class="listitem"><p>
                                SessionGet（获取会话）
                            </p></li></ul></div></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-session-connector-operations"></a>操作</h6></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-session-connector-operations-sessioncreate"></a>SessionCreate（创建会话）</h6></div></div></div><p>
                        创建一个新的有效会话ID，用在其它连接器比如创建工单的其它操作中。
                    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                            要在其它连接器的其它操作中使用这个会话ID，需要该操作通过会话ID部署身份认证。所有剩下的捆绑操作都有能力接受一个有效的会话ID作为一个身份认证方法。
                        </p></div><p>可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;SessionCreate&gt;
         &lt;!--You have a MANDATORY CHOICE of the next 2 items at this level--&gt;
         &lt;!--Optional:--&gt;
         &lt;UserLogin&gt;?&lt;/UserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;CustomerUserLogin&gt;?&lt;/CustomerUserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;Password&gt;?&lt;/Password&gt;
      &lt;/SessionCreate&gt;
                            
                        </pre><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-session-connector-operations-sessionget"></a>SessionCreate（创建会话）</h6></div></div></div><p>
                        从一个有效的会话搜集数据，不包括用户密码或质疑令牌等敏感信息。
                    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                            If any of its values is a complex structure then it is automatically
converted to a JSON string.
                        </p></div><p>可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;SessionGet&gt;
         &lt;SessionID&gt;?&lt;/SessionID&gt;
      &lt;/SessionGet&gt;
                            
                        </pre><p>
                    </p></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="generic-ticket-connector"></a>工单连接器</h5></div></div></div><p>
                这个连接器提供与工单交互的基本功能。
            </p><div class="itemizedlist"><p>
                    提供：
                </p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        操作：
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                                工单创建
                            </p></li><li class="listitem"><p>
                                TicketUpdate（更新工单）
                            </p></li><li class="listitem"><p>
                                TicketGet（获取工单）
                            </p></li><li class="listitem"><p>
                                TicketSearch（搜索工单）
                            </p></li><li class="listitem"><p>
                                TicketHistoryGet（获取工单历史）
                            </p></li></ul></div></li></ul></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-ticket-connector-operations"></a>操作</h6></div></div></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-ticket-connector-operations-ticketcreate"></a>工单创建</h6></div></div></div><p>
                        提供一个接口以在OTRS中创建一个工单。一个工单必须包含一个信件并包含数个附件，所有定义的动态字段也可以在创建工单操作时设置。
                    </p><p>可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;TicketCreate&gt;
         &lt;!--You have a MANDATORY CHOICE of the next 3 items at this level--&gt;
         &lt;!--Optional:--&gt;
         &lt;UserLogin&gt;?&lt;/UserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;CustomerUserLogin&gt;?&lt;/CustomerUserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;SessionID&gt;?&lt;/SessionID&gt;
         &lt;!--Optional:--&gt;
         &lt;Password&gt;?&lt;/Password&gt;
         &lt;Ticket&gt;
            &lt;Title&gt;?&lt;/Title&gt;
            &lt;!--You have a MANDATORY CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;QueueID&gt;?&lt;/QueueID&gt;
            &lt;!--Optional:--&gt;
            &lt;Queue&gt;?&lt;/Queue&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;TypeID&gt;?&lt;/TypeID&gt;
            &lt;!--Optional:--&gt;
            &lt;Type&gt;?&lt;/Type&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;ServiceID&gt;?&lt;/ServiceID&gt;
            &lt;!--Optional:--&gt;
            &lt;Service&gt;?&lt;/Service&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;SLAID&gt;?&lt;/SLAID&gt;
            &lt;!--Optional:--&gt;
            &lt;SLA&gt;?&lt;/SLA&gt;
            &lt;!--You have a MANDATORY CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;StateID&gt;?&lt;/StateID&gt;
            &lt;!--Optional:--&gt;
            &lt;State&gt;?&lt;/State&gt;
            &lt;!--You have a MANDATORY CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;PriorityID&gt;?&lt;/PriorityID&gt;
            &lt;!--Optional:--&gt;
            &lt;Priority&gt;?&lt;/Priority&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;OwnerID&gt;?&lt;/OwnerID&gt;
            &lt;!--Optional:--&gt;
            &lt;Owner&gt;?&lt;/Owner&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;ResponsibleID&gt;?&lt;/ResponsibleID&gt;
            &lt;!--Optional:--&gt;
            &lt;Responsible&gt;?&lt;/Responsible&gt;
            &lt;CustomerUser&gt;?&lt;/CustomerUser&gt;
            &lt;!--Optional:--&gt;
            &lt;CustomerID&gt;?&lt;/CustomerID&gt;
            &lt;!--Optional:--&gt;
            &lt;PendingTime&gt;
               &lt;!--You have a CHOICE of the next and the other 5 items at this level--&gt;
               &lt;Diff&gt;?&lt;/Diff&gt;
               &lt;Year&gt;?&lt;/Year&gt;
               &lt;Month&gt;?&lt;/Month&gt;
               &lt;Day&gt;?&lt;/Day&gt;
               &lt;Hour&gt;?&lt;/Hour&gt;
               &lt;Minute&gt;?&lt;/Minute&gt;
            &lt;/PendingTime&gt;
         &lt;/Ticket&gt;
         &lt;Article&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;CommunicationChannelID&gt;?&lt;/CommunicationChannelID&gt;
            &lt;!--Optional: Possible values Email, Internal or Phone--&gt;
            &lt;CommunicationChannel&gt;?&lt;/CommunicationChannel&gt;
            &lt;IsVisibleForCustomer&gt;?&lt;/IsVisibleForCustomer&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;SenderTypeID&gt;?&lt;/SenderTypeID&gt;
            &lt;!--Optional:--&gt;
            &lt;SenderType&gt;?&lt;/SenderType&gt;
            &lt;!--Optional:--&gt;
            &lt;From&gt;?&lt;/From&gt;
            &lt;!--Optional:--&gt;
            &lt;To&gt;?&lt;/To&gt;
            &lt;!--Optional:--&gt;
            &lt;Cc&gt;?&lt;/Cc&gt;
            &lt;!--Optional:--&gt;
            &lt;Bcc&gt;?&lt;/Bcc&gt;
            &lt;Subject&gt;?&lt;/Subject&gt;
            &lt;Body&gt;?&lt;/Body&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;ContentType&gt;?&lt;/ContentType&gt;
            &lt;Charset&gt;?&lt;/Charset&gt;
            &lt;MimeType&gt;?&lt;/MimeType&gt;
            &lt;!--Optional:--&gt;
            &lt;HistoryType&gt;?&lt;/HistoryType&gt;
            &lt;!--Optional:--&gt;
            &lt;HistoryComment&gt;?&lt;/HistoryComment&gt;
            &lt;!--Optional:--&gt;
            &lt;AutoResponseType&gt;?&lt;/AutoResponseType&gt;
            &lt;!--Optional:--&gt;
            &lt;TimeUnit&gt;?&lt;/TimeUnit&gt;
            &lt;!--Optional:--&gt;
            &lt;NoAgentNotify&gt;?&lt;/NoAgentNotify&gt;
            &lt;!--Zero or more repetitions:--&gt;
            &lt;ForceNotificationToUserID&gt;?&lt;/ForceNotificationToUserID&gt;
            &lt;!--Zero or more repetitions:--&gt;
            &lt;ExcludeNotificationToUserID&gt;?&lt;/ExcludeNotificationToUserID&gt;
            &lt;!--Zero or more repetitions:--&gt;
            &lt;ExcludeMuteNotificationToUserID&gt;?&lt;/ExcludeMuteNotificationToUserID&gt;
         &lt;/Article&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;DynamicField&gt;
            &lt;Name&gt;?&lt;/Name&gt;
            &lt;!--1 or more repetitions:--&gt;
            &lt;Value&gt;?&lt;/Value&gt;
         &lt;/DynamicField&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;Attachment&gt;
            &lt;Content&gt;cid:61886944659&lt;/Content&gt;
            &lt;ContentType&gt;?&lt;/ContentType&gt;
            &lt;Filename&gt;?&lt;/Filename&gt;
         &lt;/Attachment&gt;
      &lt;/TicketCreate&gt;
                            
                        </pre><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-ticket-connector-operations-ticketupdate"></a>TicketUpdate（更新工单）</h6></div></div></div><p>
                        ‘更新工单’操作用来修改已有工单的属性或者添加一个新的信件（包括附件和所有定义的工单和信件的动态字段）。
                    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注意</h3><p>
                            没有必要创建一个信件来修改一个工单的属性。
                        </p></div><p>可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;TicketUpdate&gt;
         &lt;!--You have a MANDATORY CHOICE of the next 3 items at this level--&gt;
         &lt;!--Optional:--&gt;
         &lt;UserLogin&gt;?&lt;/UserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;CustomerUserLogin&gt;?&lt;/CustomerUserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;SessionID&gt;?&lt;/SessionID&gt;
         &lt;!--Optional:--&gt;
         &lt;Password&gt;?&lt;/Password&gt;
         &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
         &lt;TicketID&gt;?&lt;/TicketID&gt;
         &lt;TicketNumber&gt;?&lt;/TicketNumber&gt;
         &lt;!--Optional:--&gt;
         &lt;Ticket&gt;
            &lt;!--Optional:--&gt;
            &lt;Title&gt;?&lt;/Title&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;QueueID&gt;?&lt;/QueueID&gt;
            &lt;!--Optional:--&gt;
            &lt;Queue&gt;?&lt;/Queue&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;TypeID&gt;?&lt;/TypeID&gt;
            &lt;!--Optional:--&gt;
            &lt;Type&gt;?&lt;/Type&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;ServiceID&gt;?&lt;/ServiceID&gt;
            &lt;!--Optional:--&gt;
            &lt;Service&gt;?&lt;/Service&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;SLAID&gt;?&lt;/SLAID&gt;
            &lt;!--Optional:--&gt;
            &lt;SLA&gt;?&lt;/SLA&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;StateID&gt;?&lt;/StateID&gt;
            &lt;!--Optional:--&gt;
            &lt;State&gt;?&lt;/State&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;PriorityID&gt;?&lt;/PriorityID&gt;
            &lt;!--Optional:--&gt;
            &lt;Priority&gt;?&lt;/Priority&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;OwnerID&gt;?&lt;/OwnerID&gt;
            &lt;!--Optional:--&gt;
            &lt;Owner&gt;?&lt;/Owner&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;ResponsibleID&gt;?&lt;/ResponsibleID&gt;
            &lt;!--Optional:--&gt;
            &lt;Responsible&gt;?&lt;/Responsible&gt;
            &lt;!--Optional:--&gt;
            &lt;CustomerUser&gt;?&lt;/CustomerUser&gt;
            &lt;!--Optional:--&gt;
            &lt;CustomerID&gt;?&lt;/CustomerID&gt;
            &lt;!--Optional:--&gt;
            &lt;PendingTime&gt;
               &lt;!--You have a CHOICE of the next and the other 5 items at this level--&gt;
               &lt;Diff&gt;?&lt;/Diff&gt;
               &lt;Year&gt;?&lt;/Year&gt;
               &lt;Month&gt;?&lt;/Month&gt;
               &lt;Day&gt;?&lt;/Day&gt;
               &lt;Hour&gt;?&lt;/Hour&gt;
               &lt;Minute&gt;?&lt;/Minute&gt;
            &lt;/PendingTime&gt;
         &lt;/Ticket&gt;
         &lt;!--Optional:--&gt;
         &lt;Article&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;CommunicationChannelID&gt;?&lt;/CommunicationChannelID&gt;
            &lt;!--Optional: Possible values Email, Internal or Phone--&gt;
            &lt;CommunicationChannel&gt;?&lt;/CommunicationChannel&gt;
            &lt;IsVisibleForCustomer&gt;?&lt;/IsVisibleForCustomer&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;SenderTypeID&gt;?&lt;/SenderTypeID&gt;
            &lt;!--Optional:--&gt;
            &lt;SenderType&gt;?&lt;/SenderType&gt;
            &lt;!--Optional:--&gt;
            &lt;From&gt;?&lt;/From&gt;
            &lt;!--Optional:--&gt;
            &lt;To&gt;?&lt;/To&gt;
            &lt;!--Optional:--&gt;
            &lt;Cc&gt;?&lt;/Cc&gt;
            &lt;!--Optional:--&gt;
            &lt;Bcc&gt;?&lt;/Bcc&gt;
            &lt;Subject&gt;?&lt;/Subject&gt;
            &lt;Body&gt;?&lt;/Body&gt;
            &lt;!--You have a CHOICE of the next 2 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;ContentType&gt;?&lt;/ContentType&gt;
            &lt;Charset&gt;?&lt;/Charset&gt;
            &lt;MimeType&gt;?&lt;/MimeType&gt;
            &lt;!--Optional:--&gt;
            &lt;HistoryType&gt;?&lt;/HistoryType&gt;
            &lt;!--Optional:--&gt;
            &lt;HistoryComment&gt;?&lt;/HistoryComment&gt;
            &lt;!--Optional:--&gt;
            &lt;AutoResponseType&gt;?&lt;/AutoResponseType&gt;
            &lt;!--Optional:--&gt;
            &lt;TimeUnit&gt;?&lt;/TimeUnit&gt;
            &lt;!--Optional:--&gt;
            &lt;NoAgentNotify&gt;?&lt;/NoAgentNotify&gt;
            &lt;!--Zero or more repetitions:--&gt;
            &lt;ForceNotificationToUserID&gt;?&lt;/ForceNotificationToUserID&gt;
            &lt;!--Zero or more repetitions:--&gt;
            &lt;ExcludeNotificationToUserID&gt;?&lt;/ExcludeNotificationToUserID&gt;
            &lt;!--Zero or more repetitions:--&gt;
            &lt;ExcludeMuteNotificationToUserID&gt;?&lt;/ExcludeMuteNotificationToUserID&gt;
         &lt;/Article&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;DynamicField&gt;
            &lt;Name&gt;?&lt;/Name&gt;
            &lt;!--1 or more repetitions:--&gt;
            &lt;Value&gt;?&lt;/Value&gt;
         &lt;/DynamicField&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;Attachment&gt;
            &lt;Content&gt;cid:166861569966&lt;/Content&gt;
            &lt;ContentType&gt;?&lt;/ContentType&gt;
            &lt;Filename&gt;?&lt;/Filename&gt;
         &lt;/Attachment&gt;
      &lt;/TicketUpdate&gt;
                            
                        </pre><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-ticket-connector-operations-ticketget"></a>TicketGet（获取工单）</h6></div></div></div><p>
                        这个操作用来获取一个工单的所有属性，包括动态字段、所有信件和属于工单的所有附件。
                    </p><p>可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;TicketGet&gt;
         &lt;!--You have a MANDATORY CHOICE of the next 3 items at this level--&gt;
         &lt;!--Optional:--&gt;
         &lt;UserLogin&gt;?&lt;/UserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;CustomerUserLogin&gt;?&lt;/CustomerUserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;SessionID&gt;?&lt;/SessionID&gt;
         &lt;!--Optional:--&gt;
         &lt;Password&gt;?&lt;/Password&gt;
         &lt;!--1 or more repetitions:--&gt;
         &lt;TicketID&gt;?&lt;/TicketID&gt;
         &lt;!--Optional:--&gt;
         &lt;DynamicFields&gt;?&lt;/DynamicFields&gt;
         &lt;!--Optional:--&gt;
         &lt;Extended&gt;?&lt;/Extended&gt;
         &lt;!--Optional:--&gt;
         &lt;AllArticles&gt;?&lt;/AllArticles&gt;
         &lt;!--Optional:--&gt;
         &lt;ArticleSenderType&gt;?&lt;/ArticleSenderType&gt;
         &lt;!--Optional:--&gt;
         &lt;ArticleOrder&gt;?&lt;/ArticleOrder&gt;
         &lt;!--Optional:--&gt;
         &lt;ArticleLimit&gt;?&lt;/ArticleLimit&gt;
         &lt;!--Optional:--&gt;
         &lt;Attachments&gt;?&lt;/Attachments&gt;
         &lt;!--Optional:--&gt;
         &lt;GetAttachmentContents&gt;?&lt;/GetAttachmentContents&gt;
         &lt;!--Optional:--&gt;
         &lt;HTMLBodyAsAttachment&gt;?&lt;/HTMLBodyAsAttachment&gt;
      &lt;/TicketGet&gt;
                            
                        </pre><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-ticket-connector-operations-ticketsearch"></a>TicketSearch（搜索工单）</h6></div></div></div><p>
                        ‘搜索工单’操作返回匹配一个预定义条件的工单编号列表。
                    </p><p>可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;TicketSearch&gt;
         &lt;!--You have a MANDATORY CHOICE of the next 3 items at this level--&gt;
         &lt;!--Optional:--&gt;
         &lt;UserLogin&gt;?&lt;/UserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;CustomerUserLogin&gt;?&lt;/CustomerUserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;SessionID&gt;?&lt;/SessionID&gt;
         &lt;!--Optional:--&gt;
         &lt;Password&gt;?&lt;/Password&gt;
         &lt;!--Optional:--&gt;
         &lt;Limit&gt;?&lt;/Limit&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;TicketNumber&gt;?&lt;/TicketNumber&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;Title&gt;?&lt;/Title&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;Queues&gt;?&lt;/Queues&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;QueueIDs&gt;?&lt;/QueueIDs&gt;
         &lt;!--Optional:--&gt;
         &lt;UseSubQueues&gt;?&lt;/UseSubQueues&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;Types&gt;?&lt;/Types&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;TypeIDs&gt;?&lt;/TypeIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;States&gt;?&lt;/States&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;StateIDs&gt;?&lt;/StateIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;StateType&gt;?&lt;/StateType&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;StateTypeIDs&gt;?&lt;/StateTypeIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;Priorities&gt;?&lt;/Priorities&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;PriorityIDs&gt;?&lt;/PriorityIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;Services&gt;?&lt;/Services&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;ServiceIDs&gt;?&lt;/ServiceIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;SLAs&gt;?&lt;/SLAs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;SLAIDs&gt;?&lt;/SLAIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;Locks&gt;?&lt;/Locks&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;LockIDs&gt;?&lt;/LockIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;OwnerIDs&gt;?&lt;/OwnerIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;ResponsibleIDs&gt;?&lt;/ResponsibleIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;WatchUserIDs&gt;?&lt;/WatchUserIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CustomerID&gt;?&lt;/CustomerID&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CustomerUserLogin&gt;?&lt;/CustomerUserLogin&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CreatedUserIDs&gt;?&lt;/CreatedUserIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CreatedTypes&gt;?&lt;/CreatedTypes&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CreatedTypeIDs&gt;?&lt;/CreatedTypeIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CreatedPriorities&gt;?&lt;/CreatedPriorities&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CreatedPriorityIDs&gt;?&lt;/CreatedPriorityIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CreatedStates&gt;?&lt;/CreatedStates&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CreatedStateIDs&gt;?&lt;/CreatedStateIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CreatedQueues&gt;?&lt;/CreatedQueues&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CreatedQueueIDs&gt;?&lt;/CreatedQueueIDs&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;DynamicField&gt;
            &lt;Name&gt;?&lt;Name&gt;
            &lt;!--You have a MANDATORY CHOICE of the next 6 items at this level--&gt;
            &lt;!--Optional:--&gt;
            &lt;Equals&gt;?&lt;/Equals&gt;
            &lt;!--Optional:--&gt;
            &lt;Like&gt;?&lt;/Like&gt;
            &lt;!--Optional:--&gt;
            &lt;GreaterThan&gt;?&lt;/GreaterThan&gt;
            &lt;!--Optional:--&gt;
            &lt;GreaterThanEquals&gt;?&lt;/GreaterThanEquals&gt;
            &lt;!--Optional:--&gt;
            &lt;SmallerThan&gt;?&lt;/SmallerThan&gt;
            &lt;!--Optional:--&gt;
            &lt;SmallerThanEquals&gt;?&lt;/SmallerThanEquals&gt;
         &lt;/DynamicField&gt;
         &lt;!--Optional:--&gt;
         &lt;Ticketflag&gt;
            &lt;!--Optional:--&gt;
            &lt;Seen&gt;?&lt;/Seen&gt;
         &lt;/Ticketflag&gt;
         &lt;!--Optional:--&gt;
         &lt;From&gt;?&lt;/From&gt;
         &lt;!--Optional:--&gt;
         &lt;To&gt;?&lt;/To&gt;
         &lt;!--Optional:--&gt;
         &lt;Cc&gt;?&lt;/Cc&gt;
         &lt;!--Optional:--&gt;
         &lt;Subject&gt;?&lt;/Subject&gt;
         &lt;!--Optional:--&gt;
         &lt;Body&gt;?&lt;/Body&gt;
         &lt;!--Optional:--&gt;
         &lt;FullTextIndex&gt;?&lt;/FullTextIndex&gt;
         &lt;!--Optional:--&gt;
         &lt;ContentSearch&gt;?&lt;/ContentSearch&gt;
         &lt;!--Optional:--&gt;
         &lt;ConditionInline&gt;?&lt;/ConditionInline&gt;
         &lt;!--Optional:--&gt;
         &lt;ArticleCreateTimeOlderMinutes&gt;?&lt;/ArticleCreateTimeOlderMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;ArticleCreateTimeNewerMinutes&gt;?&lt;/ArticleCreateTimeNewerMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;ArticleCreateTimeNewerDate&gt;?&lt;/ArticleCreateTimeNewerDate&gt;
         &lt;!--Optional:--&gt;
         &lt;ArticleCreateTimeOlderDate&gt;?&lt;/ArticleCreateTimeOlderDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketCreateTimeOlderMinutes&gt;?&lt;/TicketCreateTimeOlderMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;ATicketCreateTimeNewerMinutes&gt;?&lt;/ATicketCreateTimeNewerMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketCreateTimeNewerDate&gt;?&lt;/TicketCreateTimeNewerDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketCreateTimeOlderDate&gt;?&lt;/TicketCreateTimeOlderDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketLastChangeTimeOlderMinutes&gt;?&lt;/TicketLastChangeTimeOlderMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketLastChangeTimeNewerMinutes&gt;?&lt;/TicketLastChangeTimeNewerMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketLastChangeTimeNewerDate&gt;?&lt;/TicketLastChangeTimeNewerDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketLastChangeTimeOlderDate&gt;?&lt;/TicketLastChangeTimeOlderDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketChangeTimeOlderMinutes&gt;?&lt;/TicketChangeTimeOlderMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketChangeTimeNewerMinutes&gt;?&lt;/TicketChangeTimeNewerMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketChangeTimeNewerDate&gt;?&lt;/TicketChangeTimeNewerDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketChangeTimeOlderDate&gt;?&lt;/TicketChangeTimeOlderDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketCloseTimeOlderMinutes&gt;?&lt;/TicketCloseTimeOlderMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketCloseTimeNewerMinutes&gt;?&lt;/TicketCloseTimeNewerMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketCloseTimeNewerDate&gt;?&lt;/TicketCloseTimeNewerDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketCloseTimeOlderDate&gt;?&lt;/TicketCloseTimeOlderDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketPendingTimeOlderMinutes&gt;?&lt;/TicketPendingTimeOlderMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketPendingTimeNewerMinutes&gt;?&lt;/TicketPendingTimeNewerMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketPendingTimeNewerDate&gt;?&lt;/TicketPendingTimeNewerDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketPendingTimeOlderDate&gt;?&lt;/TicketPendingTimeOlderDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketEscalationTimeOlderMinutes&gt;?&lt;/TicketEscalationTimeOlderMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TTicketEscalationTimeNewerMinutes&gt;?&lt;/TTicketEscalationTimeNewerMinutes&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketEscalationTimeNewerDate&gt;?&lt;/TicketEscalationTimeNewerDate&gt;
         &lt;!--Optional:--&gt;
         &lt;TicketEscalationTimeOlderDate&gt;?&lt;/TicketEscalationTimeOlderDate&gt;
         &lt;!--Optional:--&gt;
         &lt;ArchiveFlags&gt;?&lt;/ArchiveFlags&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;OrderBy&gt;?&lt;/OrderBy&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;SortBy&gt;?&lt;/SortBy&gt;
         &lt;!--Zero or more repetitions:--&gt;
         &lt;CustomerUserID&gt;?&lt;/CustomerUserID&gt;
      &lt;/TicketSearch&gt;
                            
                        </pre><p>
                    </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="generic-ticket-connector-operations-tickethistoryget"></a>TicketHistoryGet（获取工单历史）</h6></div></div></div><p>
                        这个操作用于从一个或多个工单中获取所有历史记录。
                    </p><p>可能的属性：</p><p>
                        </p><pre class="programlisting">
                            
      &lt;TicketHistoryGet&gt;
         &lt;!--You have a MANDATORY CHOICE of the next 2 items at this level--&gt;
         &lt;!--Optional:--&gt;
         &lt;UserLogin&gt;?&lt;/UserLogin&gt;
         &lt;!--Optional:--&gt;
         &lt;SessionID&gt;?&lt;/SessionID&gt;
         &lt;!--Optional:--&gt;
         &lt;Password&gt;?&lt;/Password&gt;
         &lt;!--1 or more repetitions:--&gt;
         &lt;TicketID&gt;?&lt;/TicketID&gt;
      &lt;/TicketHistoryGet&gt;
                            
                        </pre><p>
                    </p></div></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="genericinterface-bundled-connectors-examples"></a>例子：</h4></div></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.10.7.2"></a>WEB服务配置</h5></div></div></div><p>
                下面是一个基本但完整的YAML格式的WEB服务配置文件，通过SOAP网络传输方法使用了所有的工单连接器操作。为了在OTRS中使用它，你需要复制它的内容到一个叫<code class="filename">GenericTicketConnectorSOAP.yml</code>的文件，并且在系统管理页面进入WEB服务窗口，然后在WEB服务概览窗口点击“添加WEB服务”按钮，然后在添加WEB服务窗口点击“导入WEB服务”按钮，将这个文件导入到OTRS中。
            </p><p>
                </p><pre class="programlisting">
                    
---
Debugger:
  DebugThreshold: debug
  TestMode: 0
Description: Ticket Connector SOAP Sample
FrameworkVersion: 3.4.x git
Provider:
  Operation:
    SessionCreate:
      Description: Creates a Session
      MappingInbound: {}
      MappingOutbound: {}
      Type: Session::SessionCreate
    TicketCreate:
      Description: Creates a Ticket
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketCreate
    TicketUpdate:
      Description: Updates a Ticket
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketUpdate
    TicketGet:
      Description: Retrieves Ticket data
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketGet
    TicketSearch:
      Description: Search for Tickets
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketSearch
    TicketHistoryGet:
      Description: Retrieves history of a Ticket
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketHistoryGet
  Transport:
    Config:
      MaxLength: 100000000
      NameSpace: http://www.otrs.org/TicketConnector/
    Type: HTTP::SOAP
RemoteSystem: ''
Requester:
  Transport:
    Type: ''
                    
                </pre><p>
            </p><p>
                类似的例子可以用REST网络传输做到，REST
WEB服务使用HTTP操作比如“POST”、“GET”、“PUT”、“PATCH”等等。这个操作连同一个叫做资源的URI路径一起定义一个OTRS通用接口操作或调用程序（取决于通讯方式）。
            </p><p>
                下列的例子为‘创建会话’使用/Session资源，为搜索工单和创建工单使用
/Ticket资源，为获取工单和更新工单使用/Ticket/{TicketID}郑源（这里{TicketID}是一个工单的实际工单ID，例如/Ticket/123）。为了在OTRS中使用它，你需要复制它的内容到一个叫<code class="filename">GenericTicketConnectorREST.yml</code>的文件，并且在系统管理页面进入WEB服务窗口，然后在WEB服务概览窗口点击“添加WEB服务”按钮，然后在添加WEB服务窗口点击“导入WEB服务”按钮，将这个文件导入到OTRS中。
            </p><p>
                </p><pre class="programlisting">
                    
---
Debugger:
  DebugThreshold: debug
  TestMode: '0'
Description: Ticket Connector REST Sample
FrameworkVersion: 3.4.x git
Provider:
  Operation:
    SessionCreate:
      Description: Creates a Session
      MappingInbound: {}
      MappingOutbound: {}
      Type: Session::SessionCreate
    TicketCreate:
      Description: Creates a Ticket
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketCreate
    TicketGet:
      Description: Retrieves Ticket data
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketGet
    TicketSearch:
      Description: Search for Tickets
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketSearch
    TicketUpdate:
      Description: Updates a Ticket
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketUpdate
    TicketHistoryGet:
      Description: Retrieves history of a Ticket
      MappingInbound: {}
      MappingOutbound: {}
      Type: Ticket::TicketHistoryGet
  Transport:
    Config:
      KeepAlive: ''
      MaxLength: '100000000'
      RouteOperationMapping:
        SessionCreate:
          RequestMethod:
          - POST
          Route: /Session
        TicketCreate:
          RequestMethod:
          - POST
          Route: /Ticket
        TicketGet:
          RequestMethod:
          - GET
          Route: /Ticket/:TicketID
        TicketSearch:
          RequestMethod:
          - GET
          Route: /Ticket
        TicketUpdate:
          RequestMethod:
          - PATCH
          Route: /Ticket/:TicketID
        TicketHistoryGet:
          RequestMethod:
          - GET
          Route: /TicketHistory/:TicketID
    Type: HTTP::REST
RemoteSystem: ''
Requester:
  Transport:
    Type: ''
                    
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.10.7.3"></a>Perl SOAP请求者</h5></div></div></div><p>
                下列代码是一个Perl脚本，可以通过通用接口连接到OTRS。为了执行工单连接器提供的操作，它使用了两个Perl的CPAN模块：SOAP::Lite和Data::Dumper。在你尝试运行这个脚本之前，请确保你的环境能够使用这些模块。
            </p><p>
                </p><pre class="programlisting">
                    
#!/usr/bin/perl -w
# --
# otrs.SOAPRequest.pl - sample to send a SOAP request to OTRS Generic Interface Ticket Connector
# Copyright (C) 2001-2018 OTRS AG, https://otrs.com/
# --
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.txt.
# --

use strict;
use warnings;

# use ../ as lib location
use File::Basename;
use FindBin qw($RealBin);
use lib dirname($RealBin);

use SOAP::Lite;
use Data::Dumper;

# ---
# Variables to be defined.

# this is the URL for the web service
# the format is
# &lt;HTTP_TYPE&gt;:://&lt;OTRS_FQDN&gt;/nph-genericinterface.pl/Webservice/&lt;WEB_SERVICE_NAME&gt;
# or
# &lt;HTTP_TYPE&gt;:://&lt;OTRS_FQDN&gt;/nph-genericinterface.pl/WebserviceID/&lt;WEB_SERVICE_ID&gt;
my $URL = 'http://localhost/otrs/nph-genericinterface.pl/Webservice/GenericTicketConnector';

# this name space should match the specified name space in the SOAP transport for the web service.
my $NameSpace = 'http://www.otrs.org/TicketConnector/';

# this is operation to execute, it could be TicketCreate, TicketUpdate, TicketGet, TicketSearch
# or SessionCreate. and they must to be defined in the web service.
my $Operation = 'TicketCreate';

# this variable is used to store all the parameters to be included on a request in XML format. Each
# operation has a determined set of mandatory and non mandatory parameters to work correctly. Please
# check the OTRS Admin Manual in order to get a complete list of parameters.
my $XMLData = '
&lt;UserLogin&gt;some user login&lt;/UserLogin&gt;
&lt;Password&gt;some password&lt;/Password&gt;
&lt;Ticket&gt;
    &lt;Title&gt;some title&lt;/Title&gt;
    &lt;CustomerUser&gt;some customer user login&lt;/CustomerUser&gt;
    &lt;Queue&gt;some queue&lt;/Queue&gt;
    &lt;State&gt;some state&lt;/State&gt;
    &lt;Priority&gt;some priority&lt;/Priority&gt;
&lt;/Ticket&gt;
&lt;Article&gt;
    &lt;Subject&gt;some subject&lt;/Subject&gt;
    &lt;Body&gt;some body&lt;/Body&gt;
    &lt;ContentType&gt;text/plain; charset=utf8&lt;/ContentType&gt;
&lt;/Article&gt;
';

# ---

# create a SOAP::Lite data structure from the provided XML data structure.
my $SOAPData = SOAP::Data
    -&gt;type( 'xml' =&gt; $XMLData );

my $SOAPObject = SOAP::Lite
    -&gt;uri($NameSpace)
    -&gt;proxy($URL)
    -&gt;$Operation($SOAPData);

# check for a fault in the soap code.
if ( $SOAPObject-&gt;fault ) {
    print $SOAPObject-&gt;faultcode, " ", $SOAPObject-&gt;faultstring, "\n";
}

# otherwise print the results.
else {

    # get the XML response part from the SOAP message.
    my $XMLResponse = $SOAPObject-&gt;context()-&gt;transport()-&gt;proxy()-&gt;http_response()-&gt;content();

    # deserialize response (convert it into a perl structure).
    my $Deserialized = eval {
        SOAP::Deserializer-&gt;deserialize($XMLResponse);
    };

    # remove all the headers and other not needed parts of the SOAP message.
    my $Body = $Deserialized-&gt;body();

    # just output relevant data and no the operation name key (like TicketCreateResponse).
    for my $ResponseKey ( keys %{$Body} ) {
        print Dumper( $Body-&gt;{$ResponseKey} );
    }
}
                    
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.10.7.4"></a>Perl REST请求者</h5></div></div></div><p>
                下列的代码是一个Perl脚本，可以通过通用接口连接到OTRS。为了执行工单连接器提供的操作，它使用了三个Perl的CPAN模块：JSON、REST::Client和Data::Dumper。在你尝试运行这个脚本之前，请确保你的环境能够使用这些模块。
            </p><p>
                </p><pre class="programlisting">
                    
#!/usr/bin/perl
# --
# Copyright (C) 2001-2018 OTRS AG, https://otrs.com/
# --
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.txt.
# --

use strict;
use warnings;
use utf8;

## nofilter(TidyAll::Plugin::OTRS::Perl::Dumper)

# use ../ as lib location
use File::Basename;
use FindBin qw($RealBin);
use lib dirname($RealBin);

use JSON;
use REST::Client;

# This is the HOST for the web service the format is:
# &lt;HTTP_TYPE&gt;:://&lt;OTRS_FQDN&gt;/nph-genericinterface.pl
my $Host = 'http://localhost/otrs/nph-genericinterface.pl';

my $RestClient = REST::Client-&gt;new(
    {
        host =&gt; $Host,
    }
);

# These are the Controllers and Providers the format is:
# /Webservice/&lt;WEB_SERVICE_NAME&gt;/&lt;RESOURCE&gt;/&lt;REQUEST_VALUE&gt;
# or
# /WebserviceID/&lt;WEB_SERVICE_ID&gt;/&lt;RESOURCE&gt;/&lt;REQUEST_VALUE&gt;
#
# See the documentation on how to setup Providers.
#
# This example will retrieve the Ticket with the TicketID = 1 (&lt;REQUEST_VALUE&gt;)
my $GetControllerAndRequest = '/Webservice/GenericTicketConnectorREST/Ticket/1';

# This example is the base URL for Ticket Create
my $CreateControllerAndRequest = '/Webservice/GenericTicketConnectorREST/Ticket';

# This example will update the Ticket with the TicketID = 1 (&lt;REQUEST_VALUE&gt;)
my $UpdateControllerAndRequest = '/Webservice/GenericTicketConnectorREST/Ticket/1';

# This is the base URL for Ticket Search
my $SearchControllerAndRequest = '/Webservice/GenericTicketConnectorREST/Ticket';

# This is the base URL for Ticket history with the TicketID = 1 (&lt;REQUEST_VALUE&gt;)
my $HistoryControllerAndRequest = '/Webservice/GenericTicketConnectorREST/TicketHistory/1';

# TicketGet Example
# See the documentation of OTRSGenericInterfaceREST on how to setup
#   - webservice
#   - transport
#   - operations
my $GetParams = {
    UserLogin =&gt; "some agent user login",       # to be filled with valid agent login
    Password  =&gt; "some agent user password",    # to be filled with valid agent password
};

# Build GetParams as part of the URL for REST-GET requests
my $QueryParams = $RestClient-&gt;buildQuery( %{$GetParams} );
$GetControllerAndRequest .= $QueryParams;

$RestClient-&gt;GET($GetControllerAndRequest);

my $GetResponseCode = $RestClient-&gt;responseCode();

if ( $GetResponseCode ne '200' ) {
    print "Get request failed, response code was: $GetResponseCode\n";
}
else {

    # If the request was answered correctly, we receive a JSON string here.
    my $ResponseContent = $RestClient-&gt;responseContent();

    my $Data = decode_json $ResponseContent;

    # Just to print out the returned Data structure:
    use Data::Dumper;
    print "Get response was:\n";
    print Dumper($Data);

}

# TicketSearch Example
# See the documentation of OTRSGenericInterfaceREST on how to setup
#   - webservice
#   - transport
#   - operations
my $SearchParams = {
    UserLogin =&gt; "some agent user login",       # to be filled with valid agent login
    Password  =&gt; "some agent user password",    # to be filled with valid agent password
    Queues    =&gt; ['Raw'],
};

# Build SearchParams as part of the URL for REST-GET requests
$QueryParams = $RestClient-&gt;buildQuery( %{$SearchParams} );
$SearchControllerAndRequest .= $QueryParams;

$RestClient-&gt;GET($SearchControllerAndRequest);

# If the host isn't reachable, wrong configured or couldn't serve the requested page:
my $SearchResponseCode = $RestClient-&gt;responseCode();

if ( $SearchResponseCode ne '200' ) {
    print "Search request failed, response code was: $SearchResponseCode\n";
}
else {

    # If the request was answered correctly, we receive a JSON string here.
    my $ResponseContent = $RestClient-&gt;responseContent();

    my $Data = decode_json $ResponseContent;

    # Just to print out the returned Data structure:
    use Data::Dumper;
    print "Search Response was:\n";
    print Dumper($Data);

}

# TicketCreate Example
# See the documentation of OTRSGenericInterfaceREST on how to setup
# - webservice
# - transport
# - operations
my $CreateOrUpdateParams = {
    UserLogin =&gt; "some agent user login",       # to be filled with valid agent login
    Password  =&gt; "some agent user password",    # to be filled with valid agent password
    Ticket    =&gt; {
        Title        =&gt; 'some ticket title',
        Queue        =&gt; 'Raw',
        Lock         =&gt; 'unlock',
        Type         =&gt; 'Unclassified',
        State        =&gt; 'new',
        Priority     =&gt; '3 normal',
        Owner        =&gt; 'some agent user login',
        CustomerUser =&gt; 'customer-1',
    },
    Article =&gt; {
        Subject     =&gt; 'some subject',
        Body        =&gt; 'some body',
        ContentType =&gt; 'text/plain; charset=utf8',
    },
};

my $CreateJSONParams = encode_json $CreateOrUpdateParams;

my @CreateRequestParam = (
    $CreateControllerAndRequest,
    $CreateJSONParams
);

# We have to use REST-POST requests in order to send UserLogin and Password correctly
# though other REST methods would fit better.
$RestClient-&gt;POST(@CreateRequestParam);

# If the host isn't reachable, wrong configured or couldn't serve the requested page:
my $CreateResponseCode = $RestClient-&gt;responseCode();

if ( $CreateResponseCode ne '200' ) {
    print "Create request failed, response code was: $CreateResponseCode\n";
}
else {

    # If the request was answered correctly, we receive a JSON string here.
    my $ResponseContent = $RestClient-&gt;responseContent();

    my $Data = decode_json $ResponseContent;

    # Just to print out the returned Data structure:
    use Data::Dumper;
    print "Create Response was:\n";
    print Dumper($Data);

}

# TicketUpdate Example
# See the documentation of OTRSGenericInterfaceREST on how to setup
#   - webservice
#   - transport
#   - operations
my $UpdateJSONParams = encode_json $CreateOrUpdateParams;

my @UpdateRequestParam = (
    $UpdateControllerAndRequest,
    $UpdateJSONParams
);

# We have to use REST-PATCH requests in order to send UserLogin and Password correctly
# though other REST methods would fit better.
$RestClient-&gt;PATCH(@UpdateRequestParam);

# If the host isn't reachable, wrong configured or couldn't serve the requested page:
my $UpdateResponseCode = $RestClient-&gt;responseCode();
if ( $UpdateResponseCode ne '200' ) {
    print "Update request failed, response code was: $UpdateResponseCode\n";
}
else {

    # If the request was answered correctly, we receive a JSON string here.
    my $ResponseContent = $RestClient-&gt;responseContent();

    my $Data = decode_json $ResponseContent;

    # Just to print out the returned Data structure:
    use Data::Dumper;
    print "Update response was:\n";
    print Dumper($Data);

}

# TicketHistoryGet Example
# See the documentation of OTRSGenericInterfaceREST on how to setup
#   - webservice
#   - transport
#   - operations
my $HistoryParams = {
    UserLogin =&gt; "some agent user login",       # to be filled with valid agent login
    Password  =&gt; "some agent user password",    # to be filled with valid agent password
    TicketID  =&gt; [1],
};

# Build SearchParams as part of the URL for REST-GET requests
$QueryParams = $RestClient-&gt;buildQuery( %{$HistoryParams} );
$HistoryControllerAndRequest .= $QueryParams;

$RestClient-&gt;GET($HistoryControllerAndRequest);

# If the host isn't reachable, wrong configured or couldn't serve the requested page:
my $HistoryResponseCode = $RestClient-&gt;responseCode();

if ( $HistoryResponseCode ne '200' ) {
    print "History request failed, response code was: $HistoryResponseCode\n";
}
else {

    # If the request was answered correctly, we receive a JSON string here.
    my $ResponseContent = $RestClient-&gt;responseContent();

    my $Data = decode_json $ResponseContent;

    # Just to print out the returned Data structure:
    use Data::Dumper;
    print "History Response was:\n";
    print Dumper($Data);

}

                    
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="id-1.6.12.10.7.5"></a>REST请求的cURL例子</h5></div></div></div><p>
                用上面给出的通用工单连接器REST配置的例子，我们可以：
            </p><p>
                <span class="command"><strong>创建工单：</strong></span>在/Ticket路径上使用POST方法。
            </p><p>
                <span class="command"><strong>搜索工单：</strong></span>在/Ticket路径上使用GET方法。
            </p><p>
                <span class="command"><strong>更新工单：</strong></span>在/Ticket/{TicketID}路径上使用PATCH方法，{TicketID}是代表传输配置中:TicketID的模板。
            </p><p>
                <span class="command"><strong>获取工单：</strong></span>在/Ticket/{TicketID}路径上使用GET方法，{TicketID}是代表传输配置中:TicketID的模板。
            </p><p>
                <span class="command"><strong>获取工单历史：
</strong></span>在/TicketHistory/{TicketID}路径上使用GET方法，{TicketID}是代表传输配置中:TicketID的模板。
            </p><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.10.7.5.8"></a>创建一个新工单</h6></div></div></div><p>cURL命令：</p><p>
                    </p><pre class="screen">

shell&gt; curl "http://localhost/otrs/nph-genericinterface.pl/Webservice/GenericTicketConnectorREST/Ticket?UserLogin=agent&amp;Password=123" -H "Content-Type: application/json" -d "{\"Ticket\":{\"Title\":\"REST Create Test\", \"Type\": \"Unclassified\", \"Queue\":\"Raw\",\"State\":\"open\",\"Priority\":\"3 normal\",\"CustomerUser\":\"customer\"},\"Article\":{\"Subject\":\"Rest Create Test\",\"Body\":\"This is only a test\",\"ContentType\":\"text/plain; charset=utf8\"}}"  -X POST

                    </pre><p>
                </p><p>响应：</p><p>
                    </p><pre class="screen">
{
  "ArticleID":5484,
  "TicketNumber":"1001936",
  "TicketID":"1686"
}
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.10.7.5.9"></a>获取工单详细信息</h6></div></div></div><p>cURL命令：</p><p>
                    </p><pre class="screen">

curl "http://localhost/otrs/nph-genericinterface.pl/Webservice/GenericTicketConnectorREST/Ticket/1686?UserLogin=agent&amp;Password=123"

                    </pre><p>
                </p><p>响应：</p><p>
                    </p><pre class="screen">
{
  "Ticket": [
    {
      "Age": 777,
      "PriorityID": 3,
      "ServiceID": "",
      "Type": "Unclassified",
      "Responsible": "root@localhost",
      "StateID": 4,
      "ResponsibleID": 1,
      "ChangeBy": 2,
      "EscalationTime": 0,
      "Changed": "2014-06-30 19:08:14",
      "OwnerID": 2,
      "RealTillTimeNotUsed": 0,
      "GroupID": 1,
      "Owner": "agent",
      "CustomerID": "OTRS",
      "TypeID": 1,
      "Created": "2014-06-30 19:08:12",
      "Priority": "3 normal",
      "UntilTime": 0,
      "EscalationUpdateTime": 0,
      "QueueID": 2,
      "Queue": "Raw",
      "State": "open",
      "Title": "REST Create Test",
      "CreateBy": 2,
      "TicketID": 1686,
      "StateType": "open",
      "EscalationResponseTime": 0,
      "UnlockTimeout": 0,
      "EscalationSolutionTime": 0,
      "LockID": 1,
      "TicketNumber": "1001936",
      "ArchiveFlag": "n",
      "Lock": "unlock",
      "CreateTimeUnix": 1404173292,
      "SLAID": "",
      "CustomerUserID": "customer"
    }
  ]
}
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.10.7.5.10"></a>更新工单</h6></div></div></div><p>cURL命令：</p><p>
                    </p><pre class="screen">

curl "http://localhost/otrs/nph-genericinterface.pl/Webservice/GenericTicketConnectorREST/Ticket/1686?UserLogin=agent&amp;Password=123" -H "Content-Type: application/json" -d "{\"Ticket\":{\"Queues\":\"Postmaster\"}}"  -X PATCH

                    </pre><p>
                </p><p>响应：</p><p>
                    </p><pre class="screen">
{
  "TicketNumber":"1001936",
  "TicketID":"1686"
}
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.10.7.5.11"></a>搜索工单</h6></div></div></div><p>cURL命令：</p><p>
                    </p><pre class="screen">

curl "http://localhost/otrs/nph-genericinterface.pl/Webservice/GenericTicketConnectorREST/Ticket?UserLogin=agent&amp;Password=123&amp;Queue=Postmaster"

                    </pre><p>
                </p><p>响应：</p><p>
                    </p><pre class="screen">
{
  "TicketID": [
    "1686",
    "102",
    "100",
    "1"
  ]
}
                    </pre><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="id-1.6.12.10.7.5.12"></a>获取工单历史详情</h6></div></div></div><p>cURL命令：</p><p>
                    </p><pre class="screen">

curl "http://localhost/otrs/nph-genericinterface.pl/Webservice/GenericTicketConnectorREST/TicketHistory/1686?UserLogin=agent&amp;Password=123"

                    </pre><p>
                </p><p>响应：</p><p>
                    </p><pre class="screen">
{
  "TicketHistory":[
    {
      "History":[
        {
          "CreateBy":1,
          "HistoryType":"NewTicket",
          "TicketID":"1",
          "CreateTime":"2017-06-08 22:44:48",
          "TypeID":1,
          "OwnerID":1,
          "QueueID":1,
          "Name":"New Ticket [2015071510123456] created.",
          "StateID":1,
          "PriorityID":3,
          "ArticleID":"1",
          "HistoryTypeID":1
        }
      ],
      "TicketID":"1"
    }
  ]
}
                    </pre><p>
                </p></div></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dynamicfields.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="administration.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="daemon.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">动态字段 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> OTRS守护进程</td></tr></table></div></body></html>
