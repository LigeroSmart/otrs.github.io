<html><head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
$(document).ready(function() {

    // Hint languages to prevent false matches (php for example).
    hljs.configure({
        languages: ['perl', 'javascript', 'xml', 'html', 'css', 'json', 'yaml']
    });

    // programlistings in manuals
    $('pre.programlisting').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    // code snippets in Perl API docs
    $('.pod pre').addClass('perl').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});</script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Video and Audio Calls</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OTRS 7 - Admin Manual"><link rel="up" href="features.html" title="Chapter 6. Features"><link rel="prev" href="chat.html" title="The Chat"><link rel="next" href="performance-tuning.html" title="Chapter 7. Performance Tuning"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Video and Audio Calls</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chat.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Features</th><td width="20%" align="right"> <a accesskey="n" href="performance-tuning.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="video-calls"></a>Video and Audio Calls</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="video-calls.html#id-1.8.11.2">Description</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.8.11.3">Configuration</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.8.11.4">Setup</a></span></dt><dd><dl><dt><span class="section"><a href="video-calls.html#id-1.8.11.4.3">Chat Setup</a></span></dt><dt><span class="section"><a href="video-calls.html#chrome-ssl-required">HTTPS Enabled Web Server</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.8.11.4.5">Availability for calls</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.8.11.4.6">On-line User Dashboard Widget</a></span></dt></dl></dd><dt><span class="section"><a href="video-calls.html#id-1.8.11.5">Usage</a></span></dt><dd><dl><dt><span class="section"><a href="video-calls.html#id-1.8.11.5.2">Chat Requirement</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.8.11.5.3">Making the Video Calls</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.8.11.5.4">Audio Calls</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.8.11.5.5">Call Invitations</a></span></dt><dt><span class="section"><a href="video-calls.html#id-1.8.11.5.6">Other ways to start Video and Audio Calls</a></span></dt></dl></dd><dt><span class="section"><a href="video-calls.html#id-1.8.11.6">Connection</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.11.2"></a>Description</h3></div></div></div><p>
            The video and audio calls feature provides real-time calls between two users right from the comfort of the OTRS frontend. The calls will be provided over a direct peer-to-peer connection established between two users, where possible. This feature depends heavily on the chat, which must be active for video and audio calls to be possible.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                Video and audio calls are based on a quite young technology called WebRTC. The implementation of WebRTC APIs in modern browsers is an ongoing effort. Currently, OTRS video and audio calls are supported only in the latest versions of Mozilla Firefox and Google Chrome (for Chrome a <a class="link" href="video-calls.html#chrome-ssl-required" title="HTTPS Enabled Web Server">HTTPS Enabled Web Server</a> is required).
            </p><p>
                To use this feature correctly the OTRS system must have a valid contract with the OTRS group.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.11.3"></a>Configuration</h3></div></div></div><p>
            The following system configuration options are relevant for this feature.
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ChatEngine::Active</code></span></dt><dd><p>
                    Controls whether or not the video and audio calling feature is enabled. Please note that the same switch will control <a class="link" href="chat.html" title="The Chat">the chat</a> feature too.
                </p></dd><dt><span class="term"><code class="literal">ChatEngine::PermissionGroup::VideoChatAgents</code></span></dt><dd><p>
                    Defines the group for the video and audio calling features. Only agents with permission in this group will be able to make video and audio calls.
                </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.11.4"></a>Setup</h3></div></div></div><p>
            In order to be able to start video and audio calls, you need to setup certain things in your OTRS instance.
        </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.8.11.4.3"></a>Chat Setup</h4></div></div></div><p>
                You need a working chat setup in your system. Make sure to carefully read the <a class="link" href="chat.html#chat-setup-availability" title="Agents: Set up Availability">Setup</a> section of the chat feature.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="chrome-ssl-required"></a>HTTPS Enabled Web Server</h4></div></div></div><p>
                Currently, Google Chrome will allow access to a user's media streams only to web applications served over the HTTPS protocol (SSL) with valid signed certificates. Make sure you have set the <span class="bold"><strong>HttpType</strong></span> config option to <span class="emphasis"><em>https</em></span>, too. Setting up a web server to be accessible via HTTPS is outside of the scope of this manual.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.8.11.4.5"></a>Availability for calls</h4></div></div></div><p>
                To be available for video and audio calls, you have to make sure you are available for chats too. Please refer to the instructions in <a class="link" href="chat.html#chat-setup-availability" title="Agents: Set up Availability">Agents: Set up Availability</a> for more information.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.8.11.4.6"></a>On-line User Dashboard Widget</h4></div></div></div><p>
                For a convenient way to start the calls, please activate the <span class="emphasis"><em>On-line</em></span> widget on the Dashboard.
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                        Go to the Dashboard and expand the <span class="emphasis"><em>Settings</em></span> widget.
                    </p></li><li class="listitem"><p>
                        Check the <span class="emphasis"><em>On-line</em></span> widget and make sure to click <span class="emphasis"><em>Save settings</em></span>.
                    </p><p>
                        </p><div class="figure"><a name="id-1.8.11.4.6.3.2.2.1"></a><p class="title"><b>Figure 6.86. Setting up the On-line widget on Dashboard</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/dashboard-settings-online-widget.png" alt="Setting up the On-line widget on Dashboard"></div></div></div></div><p><br class="figure-break">
                    </p></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.11.5"></a>Usage</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.8.11.5.2"></a>Chat Requirement</h4></div></div></div><p>
                Video and audio calls are tied to existing chats. As an agent, you will be able to initiate calls inside and outside of chats. Customer users will be able to initiate calls only from an active chat.
            </p><p>
                If a chat does not yet exist, it will be created when the call is initiated. In these "ad-hoc" chats, the chat parties are joined automatically. When a call is terminated, these chats will remain active until they are closed manually.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.8.11.5.3"></a>Making the Video Calls</h4></div></div></div><p>
                To make a call inside of an active chat, simply click on the small video camera button in the chat header.
            </p><p>
                </p><div class="figure"><a name="id-1.8.11.5.3.3.1"></a><p class="title"><b>Figure 6.87. Making a call inside the chat</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-chat-video-buttons.png" alt="Making a call inside the chat"></div></div></div></div><p><br class="figure-break">
            </p><p>
                A popup window will open, and depending on your browser, you will be asked to share your video and audio streams. On systems with several cameras and microphones, you will be able to choose exactly the one you would like to use from the drop down list.
            </p><p>
                </p><div class="figure"><a name="id-1.8.11.5.3.5.1"></a><p class="title"><b>Figure 6.88. Media Permission Request</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/media-permission-request.png" alt="Media Permission Request"></div></div></div></div><p><br class="figure-break">
            </p><p>
                Once you confirm your choice, an invitation will be sent to the other party asking them to join. You will be notified of the progress via a message in the center of the screen.
            </p><p>
                </p><div class="figure"><a name="id-1.8.11.5.3.7.1"></a><p class="title"><b>Figure 6.89. Waiting for the other party</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-video-waiting-other-party.png" alt="Waiting for the other party"></div></div></div></div><p><br class="figure-break">
            </p><p>
                Please just wait a little while until the connection is established. Then you will be able to see and hear the other party.
            </p><p>
                </p><div class="figure"><a name="id-1.8.11.5.3.9.1"></a><p class="title"><b>Figure 6.90. Established Connection</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-video-established-connection.png" alt="Established Connection"></div></div></div></div><p><br class="figure-break">
            </p><p>
                To control your streams, simply toggle the mute buttons on the left side.
            </p><p>
                </p><div class="figure"><a name="id-1.8.11.5.3.11.1"></a><p class="title"><b>Figure 6.91. Mute Buttons</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-video-mute-buttons.png" alt="Mute Buttons"></div></div></div></div><p><br class="figure-break">
            </p><p>
                To leave a call, simply click on the big red <span class="emphasis"><em>Close</em></span> button. The other party will be notified.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.8.11.5.4"></a>Audio Calls</h4></div></div></div><p>
                The only difference between video and audio calls is that audio calls will mute your video stream initially (which you will be able to turn on later in the call). The video stream will be muted for both parties by default, but they will be able to control it.
            </p><p>
                If the other party has muted their video stream, instead of the video you will see a large microphone icon in the center, along with their name. The icon will reflect the state of their audio stream, and if they mute it too, it will be crossed.
            </p><p>
                </p><div class="figure"><a name="id-1.8.11.5.4.4.1"></a><p class="title"><b>Figure 6.92. Audio Only</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-audio-only.png" alt="Audio Only"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.8.11.5.5"></a>Call Invitations</h4></div></div></div><p>
                If you have made yourself available for chats (either internal or external), video and audio call invitations are received automatically by one of the active tabs in the same user session. When you receive an invitation, a modal dialog will be displayed on your screen, allowing you to accept or decline the invitation.
            </p><p>
                </p><div class="figure"><a name="id-1.8.11.5.5.3.1"></a><p class="title"><b>Figure 6.93. Call Invitation</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-video-invitation-dialog.png" alt="Call Invitation"></div></div></div></div><p><br class="figure-break">
            </p><p>
                Your browser may also present you a notification with sound. This heavily depends on the used browser and operating system settings, and if permission has been granted to OTRS to trigger such notifications. A permission request will be displayed the first time you change your chat availability.
            </p><p>
                </p><div class="figure"><a name="id-1.8.11.5.5.5.1"></a><p class="title"><b>Figure 6.94. Notification Permission Request</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-notification-permission-request.png" alt="Notification Permission Request"></div></div></div></div><p><br class="figure-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.8.11.5.6"></a>Other ways to start Video and Audio Calls</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em>Agent to Agent</em></span></p><p>
                        To start a video or audio call with another agent, with whom you do not have an active chat, you can use the <span class="emphasis"><em>On-line</em></span> widget on the dashboard.
                    </p><p>
                        </p><div class="figure"><a name="id-1.8.11.5.6.2.1.3.1"></a><p class="title"><b>Figure 6.95. Online widget on the Dashboard</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/dashboard-online-widget-agents.png" alt="Online widget on the Dashboard"></div></div></div></div><p><br class="figure-break">
                    </p><p>
                        Agents who are able to receive calls will have a video camera and microphone icon next to their name which you can click on. Once clicked, a popup window will open, asking you to share your media streams. The connection will be established afterwards.
                    </p><p>
                        Calling other agents is possible also via Owner and Responsible fields in ticket zoom. In this case, check will also be done to make sure the other agent is available, before allowing the call to be initiated.
                    </p><p>
                        </p><div class="figure"><a name="id-1.8.11.5.6.2.1.6.1"></a><p class="title"><b>Figure 6.96. Calling other agents from Ticket Zoom</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-video-ticket-zoom-owner.png" alt="Calling other agents from Ticket Zoom"></div></div></div></div><p><br class="figure-break">
                    </p></li><li class="listitem"><p><span class="emphasis"><em>Agent to Customer</em></span></p><p>
                        To start a video or audio call with a customer, with whom you do not have an active chat, you can use the customer user widget in the Customer Information Center when viewing a certain customer. Available customers will have call icons next to their name which you can click on. Once clicked, a popup window will open asking you to share your media streams. The connection will be established afterwards.
                    </p><p>
                        </p><div class="figure"><a name="id-1.8.11.5.6.2.2.3.1"></a><p class="title"><b>Figure 6.97. Making a call from Customer Information Center</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-video-cic.png" alt="Making a call from Customer Information Center"></div></div></div></div><p><br class="figure-break">
                    </p><p>
                        Another possibility is to make a call directly from the ticket zoom. If the customer user who is assigned to this ticket is currently on-line, you'll be able to use call buttons next to their user name in customer information box in right sidebar.
                    </p><p>
                        </p><div class="figure"><a name="id-1.8.11.5.6.2.2.5.1"></a><p class="title"><b>Figure 6.98. Making a call from Ticket Zoom</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/agent-video-ticket-zoom-customer.png" alt="Making a call from Ticket Zoom"></div></div></div></div><p><br class="figure-break">
                    </p></li><li class="listitem"><p><span class="emphasis"><em>Customer to Agent</em></span></p><p>
                        Customer users will be able to initiate calls from an active chat only. To do this, customers can use the video and audio call links in the header of an active chat to initiate calls.
                    </p><p>
                        </p><div class="figure"><a name="id-1.8.11.5.6.2.3.3.1"></a><p class="title"><b>Figure 6.99. Starting a Video Call from Customer interface</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/features/video-calls/customer-video-call.png" alt="Starting a Video Call from Customer interface"></div></div></div></div><p><br class="figure-break">
                    </p><p>
                        When customers click on a link, they will be asked for permission to their media streams, similar to agents. An invitation will be sent and the connection will be established if the agent on the other side accepts the request.
                    </p><p>
                        The difference between video and audio calls in the customer interface compared to the agent interface is minimal. Customers will see their calls inside the same window as the chat. Only one additional button is provided: Fullscreen. It will resize the video to the extent of the browser window. Other than that, everything as in the agent interface applies.
                    </p></li><li class="listitem"><p><span class="emphasis"><em>Public to Agent</em></span></p><p>
                        Users of the public interface are not able to make audio and video calls.
                    </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.8.11.6"></a>Connection</h3></div></div></div><p>
            In the best case scenario, video and audio calls will be streamed over a direct peer-to-peer connection between users' browsers. The requirement is that the user's network allows connection over a high port that WebRTC uses, and can advertise this to the other party. To this end, there are several mechanisms in place to aid in connecting.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em>STUN (Session Traversal Utilities for NAT)</em></span></p><p>
                    STUN is a standardized set of methods and a network protocol to allow an end host to discover its public IP address if it is located behind a NAT. OTRS provides a cloud service with STUN to all systems with a valid contract, and this data is shared with the other party to allow the connection to be established.
                </p><p>
                    In case of a connection via STUN, only the connection data is stored on the OTRS servers, the connection itself is still directly between two users.
                </p></li><li class="listitem"><p><span class="emphasis"><em>TURN (Traversal Using Relays around NAT) over UDP</em></span></p><p>
                    TURN is a protocol that assists in traversal of network address translators or firewalls for multimedia applications. OTRS also provides TURN cloud service which can help clients on networks masqueraded by symmetric NAT devices and it supports the connection of a user behind a NAT.
                </p><p>
                    In case of a connection established via TURN server, media streams will be routed through the server (like a proxy). In this situation, all packets are securely transmitted to the other side. The access to the TURN server is encrypted and secured by often changed credentials, which are provided automatically.
                </p></li><li class="listitem"><p><span class="emphasis"><em>TURN over TCP</em></span></p><p>
                    In case all UDP traffic is blocked between two users, the TURN server over TCP is a last resort for a successful connection. While TCP is not an ideal protocol for transmitting media packets, it's a last resort in an effort to connect two users and share their streams.
                </p><p>
                    Same as with TURN over UDP, media streams will be routed through the server and sent to the other side. The infrastructure for all STUN and TURN services is highly scalable based on demand and can even be provided for different geographic locations, in order to provide the best possible throughput.
                </p></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chat.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="features.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="performance-tuning.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">The Chat </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 7. Performance Tuning</td></tr></table></div></body></html>
