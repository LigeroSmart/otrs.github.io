<html><head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>OTRS auf Windows</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="OTRS 4 - Administrator-Handbuch"><link rel="up" href="installation.html" title="Kapitel 2. Installation"><link rel="prev" href="web-installer.html" title="Benutzen des Web-Installers"><link rel="next" href="upgrading.html" title="Upgrade von OTRS 3.3 auf OTRS 4"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">OTRS auf Windows</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="web-installer.html">Zurück</a> </td><th width="60%" align="center">Kapitel 2. Installation</th><td width="20%" align="right"> <a accesskey="n" href="upgrading.html">Weiter</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="installation-on-windows"></a>OTRS auf Windows</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="installation-on-windows.html#migrating-otrs-from-windows-into-appliance">Wie eine existierende Windows-Installation in die Appliance migriert wird</a></span></dt><dd><dl><dt><span class="section"><a href="installation-on-windows.html#introduction-and-preparation">Einführung und Vorbereitung</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#get-otrsclonedb-script-to-clone-databases">Downloaden Sie das OTRSCloneDB-Skript um Datenbanken zu klonen</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#enable-remote-access-for-appliance-database">Aktivieren Sie den Remote-Zugang für die PostgreSQL-Datenbank in Ihrer
Appliance</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#backup-appliance-manangement-package">Backup des Paketes OTRSApplianceManagement</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#stop-all-otrs-services">OTRS-Dienste stoppen</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#id-1.4.6.3.7">Droppen Sie die bereits existierende Datenbank Ihrer Appliance, um für die
geklonte Datenbank eine leere Datenbank zu besitzen.</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#get-password-of-otrs-database">Geben Sie das PostgreSQL-Passwort Ihrer Datenbank ein</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#clone-database-to-remote-appliance">Klonen Sie die Datenbank in die neue Appliance</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#copy-otrs-base-files-to-remote-appliance">Kopieren Sie die folgenden Dateien von Ihrer Windows-basierten Installation
in die Appliance</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#reinstall-packages-install-otrs-appliance-management">Installieren Sie alle Pakete neu und installieren Sie das
OTRSApplianceManagement</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#disable-remote-access-for-appliance-database">Deaktivieren Sie den Remote-Zugang für die PostgreSQL-Datenbank in Ihrer
Appliance</a></span></dt><dt><span class="section"><a href="installation-on-windows.html#start-all-otrs-services">OTRS-Dienste starten</a></span></dt></dl></dd></dl></div><p>
        Um OTRS auf Windows zu betreiben empfehlen wir die <a class="ulink" href="http://otrs.github.io/doc/manual/appliance/stable/en/html/index.html" target="_top">OTRS
Appliance</a> zu verwenden.
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="migrating-otrs-from-windows-into-appliance"></a>Wie eine existierende Windows-Installation in die Appliance migriert wird</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="introduction-and-preparation"></a>Einführung und Vorbereitung</h4></div></div></div><p>
                Diese Anleitung wird Ihnen dabei helfen wenn Sie ein OTRS-System unter
Windows betreiben und zur Appliance wechseln wollen. Alle notwendigen
Schritte zur Migration von OTRS unter Windows zur Appliance werden hier
beschrieben.
            </p><p>
                First of all we need to update our OTRS to the latest version of 3.3.x to
prevent migration problems.
            </p><p>
                Nach dem Upgrade Ihres OTRS-Systems benötigen Sie eine separate Installation
einer OTRS Appliance mit der gleichen OTRS-Version wie auf Ihrem
Windows-System. Wenn Sie z.B. OTRS 3.3.x verwenden, dann benötigen Sie eine
OTRS Appliance 3.3.x. Eine detaillierte Anleitung finden Sie hier:
            </p><p>
                <a class="ulink" href="http://otrs.github.io/doc/manual/appliance/3.3/en/html/" target="_top">
<em class="citetitle">Appliance-Installationsanleitung</em> </a>
            </p><p>
                Eine Liste aller verfügbaren Appliance Downloads kann unter folgender
Adresse gefunden werden:
            </p><p>
                <a class="ulink" href="http://ftp.otrs.org/pub/otrs/" target="_top">
<em class="citetitle">http://ftp.otrs.org/pub/otrs/</em> </a>
            </p><p>
                In unserem Beispiel benötigen wir die Appliance für OTRS 3.3.10:
            </p><p>
                <a class="ulink" href="http://ftp.otrs.org/pub/otrs/otrs-3.3.10-appliance-1.0.10.iso" target="_top">
<em class="citetitle">http://ftp.otrs.org/pub/otrs/otrs-3.3.10-appliance-1.0.10.iso</em>
</a>
            </p><p>
                Wir haben nun 2 Systeme und müssen die Datenbank vom ersten System auf das
zweite System verschieben.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="get-otrsclonedb-script-to-clone-databases"></a>Downloaden Sie das OTRSCloneDB-Skript um Datenbanken zu klonen</h4></div></div></div><p>
                Bitte gehen Sie zum Admin-Menü in Ihrem Windows-System und installieren Sie
die neueste Version des OTRSCloneDB-Paketes in Ihr OTRS.
            </p><p>
                Sie können das OTRSCloneDB-Paket direkt aus dem Paket-Manager
installieren. Wählen Sie "OTRS Extensions" aus der Dropdown-Liste auf der
linken Seite aus und klicken Sie auf den Button "Verzeichnis
aktualisieren". Das Paket OTRSCloneDB wird dann in einer Liste angezeigt,
klicken Sie dann auf "Installieren".
            </p><p>
                You could also download the package manually from the OTRS FTP server and
install the package manually as described below.  <a class="ulink" href="http://ftp.otrs.org/pub/otrs/packages/" target="_top">
<em class="citetitle">http://ftp.otrs.org/pub/otrs/packages/</em> </a>
            </p><p>
                Downloaden Sie das Paket mit der höchsten Versionsnummer:
            </p><p>
                </p><pre class="screen">
OTRSCloneDB-1.0.10.opm
                </pre><p>
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win-download-otrsclonedb.png"></div></div><p>
            </p><p>
                und installieren Sie es auf Ihrer Windows-basierten Installation:
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win-install-otrsclonedb.png"></div></div><p>
            </p><p>
                It is also no problem if you have installed some feature addons or custom
developments on your OTRS.  You just need to take care that all of your
installed packages are also compatible with unix based systems.  For
packages provided by OTRS this is the case.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="enable-remote-access-for-appliance-database"></a>Aktivieren Sie den Remote-Zugang für die PostgreSQL-Datenbank in Ihrer
Appliance</h4></div></div></div><p>
                Das OTSRCloneDB-Script kopiert die Datenbank via Netzwerk, deshalb müssen
wir den Netzwerk-Zugriff auf der Ziel-Datenbank einrichten.
            </p><p>
                Stellen Sie eine SSH-Verbindung zu Ihrer Appliance her. Sie können dies mit
einem kostenlosen Tool wie z.B. "PuTTY" erledigen (suchen Sie im Internet
nach "putty ssh"). Die IP-Adresse der Appliance wird im Startbildschirm der
Appliance angezeigt. Nach der Verbindung per SSH wechseln Sie in das
postgresql Verzeichnis:
            </p><p>
                </p><pre class="screen">
shell&gt; cd /etc/postgresql/8.4/main
shell&gt; vi postgresql.conf
                </pre><p>
            </p><p>
                Fügen Sie folgende Zeile am Ende der Datei hinzu:
            </p><p>
                </p><pre class="screen">
listen_addresses = '*'
                </pre><p>
            </p><p>
                Speichern Sie die Datei.
            </p><p>
                </p><pre class="screen">
Shell&gt; vi pg_hba.conf
                </pre><p>
            </p><p>
                Fügen Sie folgende Zeile am Ende der Datei hinzu:
            </p><p>
                </p><pre class="screen">
host all all  0.0.0.0/0 md5
                </pre><p>
            </p><p>
                Speichern Sie die Datei.
            </p><p>
                Starten Sie Ihren postgresql-Server neu
            </p><p>
                </p><pre class="screen">
Shell&gt; service postgresql restart
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="backup-appliance-manangement-package"></a>Backup des Paketes OTRSApplianceManagement</h4></div></div></div><p>
                In der Appliance ist immer das Paket OTRSApplianceManagement instaliert, das
zusätzliche Administrationsfunktionen zur Verfügung stellt. Bevor wir die
Datenbank der Appliance löschen, müssen wir dieses Paket herunterladen.
            </p><p>
                Rufen Sie den Paket-Manager in Ihrer Appliance auf.
            </p><p>
                Wählen Sie das Paket OTRSApplianceManagement und downloaden Sie das Paket.
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win-download-appliance-package.png"></div></div><p>
            </p><p>
                Dieses Paket wird erneut benötigt nachdem die Migration abgeschlossen ist.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stop-all-otrs-services"></a>OTRS-Dienste stoppen</h4></div></div></div><p>
                Stoppen Sie alle laufenden Services der Appliance:
            </p><p>
                </p><pre class="screen">
shell&gt; service cron stop
shell&gt; service apache2 stop
shell&gt; su - otrs
shell&gt; cd /opt/otrs/
shell&gt; bin/Cron.sh stop
shell&gt; bin/otrs.Scheduler.pl -a stop
shell&gt; exit
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.6.3.7"></a>Droppen Sie die bereits existierende Datenbank Ihrer Appliance, um für die
geklonte Datenbank eine leere Datenbank zu besitzen.</h4></div></div></div><p>
                Das OTRSCloneDB-Skript wird keine Daten in der existierenden
Appliance-Datenbank entfernen, somit müssen Sie das manuell erledigen:
            </p><p>
                Wechseln Sie zu dem PostgreSQL-Benutzer: </p><pre class="screen">
Shell&gt; su - postgres
                </pre><p>
            </p><p>
                Droppen Sie die existierende OTRS-Datenbank: </p><pre class="screen">
Shell&gt; dropdb otrs
                </pre><p>
            </p><p>
                Erstellen Sie eine neue OTRS-Datenbank für den OTRS-User: </p><pre class="screen">
Shell&gt; createdb --owner=otrs --encoding=utf8 otrs
                </pre><p>
            </p><p>
                Wechseln Sie zurück zum Root-User: </p><pre class="screen">
Shell&gt; exit
                </pre><p>
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win-empty-db-appliance.png"></div></div><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="get-password-of-otrs-database"></a>Geben Sie das PostgreSQL-Passwort Ihrer Datenbank ein</h4></div></div></div><p>
                Wechsel Sie in das OTRS-Verzeichnis Ihrer Appliance:
            </p><p>
                </p><pre class="screen">
Shell&gt; cd /opt/otrs
                </pre><p>
            </p><p>
                und schauen Sie sich die Konfigurationsdatei Ihres Appliance-Systems an:
            </p><p>
                </p><pre class="screen">
Shell&gt; less Kernel/Config.pm
                </pre><p>
            </p><p>
                Sie finden das Datenbank-Passwort, wenn Sie ein wenig scrollen:
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win-gather-db-data-1.png"></div></div><p>
            </p><p>
                In unserem Beispiel:
            </p><p>
                </p><pre class="screen">
I88cm34A1B6xrl3
                </pre><p> Notieren Sie sich das Passwort.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="clone-database-to-remote-appliance"></a>Klonen Sie die Datenbank in die neue Appliance</h4></div></div></div><p>
                Wechseln Sie zu Ihrem Windows-System und öffnen das
Sysconfig-Admin-Menü. Wählen Sie die Gruppe "OTRSCloneDB" und die
Untergruppe "Configuration":
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win_configurate_otrsclonedb_sysconfig-1.png"></div></div><p>
            </p><p>
                Sie müssen in der SysConfig die Option OTRSCloneDB::TargetSettings mit den
folgenden Werten konfigurieren:
            </p><p>
                </p><pre class="screen">
TargetDatabaseHost =&gt; 192.168.137.20 (Here you need to enter the ip address of your appliance)
TargetDatabase =&gt; otrs
TargetDatabaseUser =&gt; otrs
TargetDatabasePw =&gt; I88cm34A1B6xrl3 (Here you need to set the password of your appliance)
TargetDatabaseType =&gt; postgresql
                </pre><p>
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win-configurate-otrsclonedb-sysconfig-2.png"></div></div><p>
            </p><p>
                Um das Skript OTRSCloneDB auszuführen, müssen Sie die in der Kommandozeile
des Windows-basierten Systems in das OTRS-Verzeichnis wechseln:
            </p><p>
                </p><pre class="screen">
Shell&gt; cd "C:\otrs"
                </pre><p>
            </p><p>
                Wenn Sie StrawberryPerl benutzen, müssen Sie eventuell Perl für Ihre Shell
aktivieren:
            </p><p>
                </p><pre class="screen">
Shell&gt; StrawberryPerl\portableshell.bat
                </pre><p>
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win-run-otrsclonedb-1.png"></div></div><p>
            </p><p>
                Das OTRSCloneDB-Skript befindet sich im bin-Verzeichnis des
OTRS-Verzeichnisses.
            </p><p>
                </p><pre class="screen">
Shell&gt; cd "OTRS\bin"
                </pre><p>
            </p><p>
                Führen Sie das OTRSCloneDB-Skript aus:
            </p><p>
                </p><pre class="screen">
Shell&gt; perl otrs.OTRSCloneDB.pl
                </pre><p>
            </p><p>
                Nun sollten Sie einige Informationen und Parameter des Skriptes sehen.
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win-run-otrsclonedb-2.png"></div></div><p>
            </p><p>
                Anmerkung... Fehler die während einer Ausführung ohne Parameter auftreten,
können mit falschen Login-Daten für die Datenbank oder mit Problemen in der
Datenbankverbindung zusammenhängen.
            </p><p>
                Wenn keine Fehler aufgetreten sind, überprüfen Sie über der Trockenlauf
erfolgreich war:
            </p><p>
                </p><pre class="screen">
Shell&gt; perl otrs.OTRSCloneDB.pl -n
                </pre><p>
            </p><p>
                </p><div class="screenshot"><div><img src="screenshots/win-run-otrsclonedb-3.png"></div></div><p>
            </p><p>
                Starten Sie das Klonen der Datenbank:
            </p><p>
                </p><pre class="screen">
Shell&gt; perl otrs.OTRSCloneDB.pl -r
                </pre><p>
            </p><p>
                Ein Beispiel für eine erfolgreiche Migration sieht wie folgt aus:
            </p><p>
                </p><pre class="screen">
Generating DDL for OTRS.
Generating DDL for package OTRSCloneDB.
Creating structures in target database (phase 1/2)
...
...
Creating structures in target database (phase 2/2)
...
done.
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="copy-otrs-base-files-to-remote-appliance"></a>Kopieren Sie die folgenden Dateien von Ihrer Windows-basierten Installation
in die Appliance</h4></div></div></div><p>
                Sie müssen einige Dateien von Ihrem Windows-System auf die Appliance
kopieren. Sie können dies z.B. mit einem kostenlosen Tool wie "WinSCP"
erledigen (suchen Sie im Internet nach "WinSCP"). Kopieren Sie die folgenden
Dateien von Ihrem Windows-System:
            </p><p>
                </p><pre class="screen">
C:/otrs/OTRS/Kernel/Config/GenericAgent.pm
C:/otrs/OTRS/Kernel/Config/Files/ZZZAuto.pm
C:/otrs/OTRS/var/article/*
C:/otrs/OTRS/var/log/TicketCounter.log
                </pre><p>
            </p><p>
                zu Ihrer Appliance:
            </p><p>
                </p><pre class="screen">
/opt/otrs/Kernel/Config/GenericAgent.pm
/opt/otrs/Kernel/Config/Files/ZZZAuto.pm
/opt/otrs/var/article/*
/opt/otrs/var/log/TicketCounter.log
                </pre><p> Öffnen Sie die Datei
/opt/otrs/Kernel/Config/Files/ZZZAuto.pm in der Appliance und ersetzen Sie
alle Pfade wie "C:/otrs/OTRS/" mit "/opt/otrs/"!
            </p><p>
                Falls Sie manuelle Änderungen in der Datei Kernel/Config.pm gemacht haben,
dann müssen Sie diese manuell in die Appliance übernehmen. Kopieren Sie die
Änderungen jedoch nicht 1:1, da es auf der Appliance nun andere
Datenbankeinstellungen und andere Datei-Pfade gibt als unter Windows!
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="reinstall-packages-install-otrs-appliance-management"></a>Installieren Sie alle Pakete neu und installieren Sie das
OTRSApplianceManagement</h4></div></div></div><p>
                Re-Installieren Sie alle Pakete um angepassten Dateien zurück zu erhalten
und installieren Sie erneut das Paket OTRSApplianceManagement, das Sie zuvor
herunter geladen haben.
            </p><p>
                Kopieren Sie das Backup des OTRSApplianceManagement-1.0.4.opm in das
root-Verzeichnis des OTRS-Systems nach /opt/otrs.
            </p><p>
                </p><pre class="screen">
shell&gt; bin/otrs.SetPermissions.pl --otrs-user=otrs --otrs-group=otrs --web-user=www-data --web-group=www-data /opt/otrs
shell&gt; su - otrs
shell&gt; cd /opt/otrs
shell&gt; perl bin/otrs.DeleteCache.pl
shell&gt; perl bin/otrs.LoaderCache.pl -o delete
shell&gt; perl bin/otrs.PackageManager.pl -a reinstall-all
shell&gt; perl bin/otrs.PackageManager.pl -a install -p OTRSApplianceManagement-1.0.4.opm
shell&gt; exit
                </pre><p>
            </p><p>
                Setzen Sie alle Berechtigungen in Ihrem OTRS-System erneut:
            </p><p>
                </p><pre class="screen">
shell&gt; bin/otrs.SetPermissions.pl --otrs-user=otrs --otrs-group=otrs --web-user=www-data --web-group=www-data /opt/otrs
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="disable-remote-access-for-appliance-database"></a>Deaktivieren Sie den Remote-Zugang für die PostgreSQL-Datenbank in Ihrer
Appliance</h4></div></div></div><p>
                Setzen Sie alle Einstellung für den PostgreSQL-Remote-Zugang, die sie vorher
getätigt haben,zurück.
            </p><p>
                Wechseln Sie in das PostgreSQL-Verzeichnis:
            </p><p>
                </p><pre class="screen">
shell&gt; cd /etc/postgresql/8.4/main
shell&gt; vi postgresql.conf
                </pre><p>
            </p><p>
                Entfernen Sie die folgenden Zeilen am Ende der Datei:
            </p><p>
                </p><pre class="screen">
listen_addresses = '*'
                </pre><p>
            </p><p>
                Speichern Sie die Datei.
            </p><p>
                </p><pre class="screen">
Shell&gt; vi pg_hba.conf
                </pre><p>
            </p><p>
                Entfernen Sie die folgenden Zeilen am Ende der Datei:
            </p><p>
                </p><pre class="screen">
host all all  0.0.0.0/0 md5
                </pre><p>
            </p><p>
                Speichern Sie die Datei.
            </p><p>
                Starten Sie Ihren postgresql-Server neu
            </p><p>
                </p><pre class="screen">
Shell&gt; service postgresql restart
                </pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="start-all-otrs-services"></a>OTRS-Dienste starten</h4></div></div></div><p>
                Starten Sie alle Services der Appliance:
            </p><p>
                </p><pre class="screen">
Shell&gt; service cron start
Shell&gt; service apache2 start
Shell&gt; su - otrs
Shell&gt; cd /opt/otrs/
Shell&gt; bin/Cron.sh start
Shell&gt; bin/otrs.Scheduler.pl -a start
                </pre><p>
            </p><p>
                Nun sollten Sie sich via Web-Interface in das OTRS auf Ihrer Appliance
einloggen können.
            </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="web-installer.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="installation.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="upgrading.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">Benutzen des Web-Installers </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> Upgrade von OTRS 3.3 auf OTRS 4</td></tr></table></div></body></html>
