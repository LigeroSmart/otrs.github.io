(window.webpackJsonp=window.webpackJsonp||[]).push([[191,59,325],{"3Hfo":function(t,e,n){"use strict";var i=n("8CHY");e.a={methods:{filter:function(t){var e=this,n="";n+=this.$locale.translate(this.label,this.labelPlaceholder);return["description","localPlaceholder"].forEach(function(t){n+=e.$locale.translate(e[t])}),Object(i.a)(n,t)}}}},"5ZVq":function(t,e,n){"use strict";n.r(e);n("U8p0"),n("W1QL"),n("K/PF"),n("t91x"),n("75LO");var i=n("VixF"),a=n("8CHY"),o={name:"FormNotificationEvents",components:{CommonCheckIcon:function(){return n.e(20).then(n.bind(null,"70Qt"))}},mixins:[i.a],props:{value:{type:Object},name:{type:String,default:""},label:{type:String},labelPlaceholder:{type:Array},description:{type:String},error:{type:String},hidden:{type:Boolean,default:!1},transports:{type:Object,required:!0},notifications:{type:Object,required:!0}},data:function(){return{localValue:null,oldLocalValue:null,runningInput:!1}},computed:{transportsList:function(){var t=this;return Object.keys(this.transports).map(function(e){return t.transports[e]}).sort(function(t,e){return t.Prio-e.Prio})},notificationsList:function(){var t=this;return Object.keys(this.notifications).map(function(e){return t.notifications[e]}).sort(function(t,e){var n=t.Name.toLowerCase(),i=e.Name.toLowerCase();return n<i?-1:n>i?1:0})},anyNotificationWithRequired:function(){var t=!1;return this.notificationsList.forEach(function(e){return!e.Required||(t=!0,!1)}),t}},watch:{value:function(){this.buildLocalValue()}},created:function(){this.buildLocalValue()},methods:{onInput:function(t,e,n){var i=this;this.runInput(function(){i.setValue(t,e,n),i.emitValue()})},onTransportInput:function(t,e){var n=this;this.runInput(function(){n.notificationsList.forEach(function(i){n.isNotificationTransportDisabled(i,t)||n.setValue(i,t,e)}),n.emitValue()})},buildLocalValue:function(){var t=this.value&&this.value instanceof Object?JSON.parse(JSON.stringify(this.value)):{};this.localValue=t,this.oldLocalValue=JSON.parse(JSON.stringify(t))},emitValue:function(){var t=this,e=function(){var e=JSON.parse(JSON.stringify(t.localValue)),n=JSON.parse(JSON.stringify(e));t.$emit("input",e,t.oldLocalValue),t.oldLocalValue=n};return this.oldLocalValue?Object.keys(this.localValue).length!==Object.keys(this.oldLocalValue).length?e():(Object.keys(this.localValue).every(function(n){return Object.prototype.hasOwnProperty.call(t.oldLocalValue,n)&&t.localValue[n]===t.oldLocalValue[n]||(e(),!1)}),null):e()},notificationTransportValue:function(t,e){if(this.isNotificationTransportDisabled(t,e))return!1;var n=this.localValue[t.ID]||{};return Object.prototype.hasOwnProperty.call(n,e.Name)?Boolean(n[e.Name]):Boolean(t.EnabledTransports[e.Name])},isNotificationTransportDisabled:function(t,e){return!t.Transports[e.Name]},isTransportDisabled:function(t){var e=this,n=!0;return this.notificationsList.forEach(function(i){return!!e.isNotificationTransportDisabled(i,t)||(n=!1,!1)}),n},transportValue:function(t){var e=this,n=!0;return this.notificationsList.forEach(function(i){var a=e.isNotificationTransportDisabled(i,t),o=e.notificationTransportValue(i,t);return!(!a&&!o)||(n=!1,!1)}),n},setValue:function(t,e,n){var i=this.localValue[t.ID]||{};if(!n&&t.Required){var a=!1;if(this.transportsList.forEach(function(t){return t.Name===e.Name||(!Object.prototype.hasOwnProperty.call(i,t.Name)||!i[t.Name]||(a=!0,!1))}),!a)return!1}return i[e.Name]=n?1:0,this.$set(this.localValue,t.ID,i),!0},filter:function(t){var e=this,n="";n+=this.$locale.translate(this.label,this.labelPlaceholder);return["description"].forEach(function(t){n+=e.$locale.translate(e[t])}),this.notificationsList.forEach(function(t){n+=t.Name+t.Description}),Object(a.a)(n,t)},runInput:function(t){var e=this;this.runningInput||(this.runningInput=!0,t(),this.$nextTick(function(){e.runningInput=!1}))}}},r=(n("Fc5e"),n("psIG")),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!hidden"}],attrs:{state:!Boolean(t.error)&&null,"invalid-feedback":t._f("translate")(t.error),"aria-label":t._f("translate")(t.label,t.labelPlaceholder)}},[n("table",{staticClass:"table table-sm"},[n("thead",[n("tr",[n("th",{staticClass:"LabelCol",attrs:{scope:"col"}},[n("label",[t._v(t._s(t._f("translate")(t.label,t.labelPlaceholder)))]),t._v(" "),t.description?n("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html",modifiers:{html:!0}}],attrs:{title:t._f("translate")(t.description)}},[n("CommonIcon",{staticClass:"mx-2 Font--Small",attrs:{weight:"regular",icon:"messages-bubble-square-information"}})],1):t._e()],1),t._v(" "),n("th",{staticClass:"SelectAllCol"},[t._v("\n                    "+t._s(t._f("translate")("all/none"))+"\n                ")]),t._v(" "),t._l(t.transportsList,function(e){return n("th",{key:e.Name,staticClass:"IconCol text-center",attrs:{scope:"col"}},[n("CommonCheckIcon",{attrs:{title:e.Name,name:"Transport-"+e.Name,"weight-with-icon":e.CommonIcon,disabled:t.isTransportDisabled(e),value:t.transportValue(e)},on:{input:function(n){return t.onTransportInput(e,n)}}})],1)})],2)]),t._v(" "),n("tbody",t._l(t.notificationsList,function(e){return n("tr",{key:e.ID},[n("td",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html",modifiers:{html:!0}}],attrs:{title:t._f("translate")(e.Description)}},[1==e.Required?n("span",[t._v("\n                        *\n                    ")]):t._e(),t._v(t._s(t._f("translate")(e.Name))+"\n                ")]),t._v(" "),n("td"),t._v(" "),t._l(t.transportsList,function(i){return n("td",{key:e.ID+"-"+i.Name,staticClass:"text-center"},[n("CommonCheckIcon",{attrs:{name:"Notification-"+e.ID+"-"+i.Name,"weight-with-icon":i.CommonIcon,value:t.notificationTransportValue(e,i),disabled:t.isNotificationTransportDisabled(e,i)},on:{input:function(n){return t.onInput(e,i,n)}}})],1)})],2)}),0),t._v(" "),t.anyNotificationWithRequired?n("tfoot",{staticClass:"RequiredHint"},[n("tr",[n("td",{attrs:{colspan:2+t.transportsList.length}},[t._v("\n                    * "+t._s(t._f("translate")("To activate this notification, at least one transport method must be activated."))+"\n                ")])])]):t._e()])])},[],!1,null,null,null);e.default=l.exports},A86J:function(t,e,n){"use strict";e.a={directives:{focus:{inserted:function(t,e){e.value&&t.focus()}}},props:{autoFocus:{type:Boolean,default:!1}},watch:{autoFocus:function(t){t&&"function"==typeof this.focus&&this.focus()}},methods:{focus:function(){this.$el&&"function"==typeof this.$el.focus&&this.$el.focus()}}}},Fc5e:function(t,e,n){"use strict";var i=n("Zdip");n.n(i).a},VixF:function(t,e,n){"use strict";var i=n("A86J"),a=n("3Hfo"),o=n("rpZP");e.a={mixins:[i.a,a.a,{data:function(){return{localPlaceholder:""}},watch:{labelSrOnly:function(){this.buildLocalPlaceholder()},required:function(){this.buildLocalPlaceholder()},placeholder:function(){this.buildLocalPlaceholder()}},created:function(){var t=this;this.$bus.$on("forceUpdate",function(){t.buildLocalPlaceholder()}),this.buildLocalPlaceholder()},methods:{buildLocalPlaceholder:function(){if(this.placeholder){var t=this.$locale.translate(this.placeholder);this.labelSrOnly&&this.required&&(t="".concat(t,"*")),this.localPlaceholder=t}else this.localPlaceholder=""}}},o.a],mounted:function(){var t=this;this.$nextTick(function(){t.$emit("loaded")})}}},Zdip:function(t,e,n){}}]);