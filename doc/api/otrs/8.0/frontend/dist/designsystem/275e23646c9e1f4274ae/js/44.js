(window.webpackJsonp=window.webpackJsonp||[]).push([[44,59,335],{"+p0e":function(t,e,o){"use strict";o.r(e);o("2Tod"),o("ABKx"),o("GkPX"),o("IKQL");var n=o("OvAC"),i=o.n(n),a=(o("W1QL"),o("K/PF"),o("t91x"),o("75LO"),o("9va6")),l=o("8CHY"),s=o("Q6E5"),r=o.n(s),u=o("A86J"),c=o("3Hfo"),m=o("rpZP");function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)}return o}function h(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(o,!0).forEach(function(e){i()(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}var f={name:"FormColumnsLayout",components:{VueDraggable:r.a},mixins:[u.a,c.a,m.a],props:{name:{type:String},value:{type:Object},hidden:{type:Boolean,default:!1},availableWidgets:{type:Object,default:function(){return{}}},label:{type:String},labelPlaceholder:{type:Array},labelSrOnly:{type:Boolean,default:!1},description:{type:String},error:{type:String},hideDescription:{type:Boolean,default:!1},isMultipleWidgetsHintHidden:{type:Boolean,default:!0}},data:function(){return{oldLocalValue:null,addingInCol:null}},computed:{fieldId:function(){return"formColumnsLayout-".concat(this.uuid)},localValue:{get:function(){return this.value},set:function(t,e){this.$emit("input",t,e)}},isOneColumnLayout:function(){return"OneColumn"===this.activeColumnLayout},isTwoColumnsLayout:function(){return"TwoColumns"===this.activeColumnLayout},isThreeColumnsLayout:function(){return"ThreeColumns"===this.activeColumnLayout},columnLayoutConfig:function(){return this.localValue[this.activeColumnLayout]||this.$set(this.localValue,this.activeColumnLayout,{}),this.localValue[this.activeColumnLayout]},activeColumnLayout:function(){return this.localValue.ActiveColumnLayout||this.$set(this.localValue,"ActiveColumnLayout","OneColumn"),this.localValue.ActiveColumnLayout},availableWidgetsList:function(){var t=this;return Object.keys(this.availableWidgets).map(function(e){return h({Name:e},t.availableWidgets[e])})},columns:function(){return new Array({OneColumn:1,TwoColumns:2,ThreeColumns:3}[this.activeColumnLayout]).fill().map(function(t,e){return e+1})},realLabel:function(){return this.label===this.name?null:this.label}},methods:{switchLayout:function(t){this.addingInCol=null,this.$set(this.localValue,"ActiveColumnLayout",t),this.emitValue()},widgets:function(t){this.columnLayoutConfig[t]||this.$set(this.localValue[this.activeColumnLayout],t,{});var e=this.columnLayoutConfig[t];return e||this.$set(e,[]),e},setWidgets:function(t,e){this.columnLayoutConfig[t]=e,this.emitValue()},deleteWidget:function(t,e){var o=this;this.$bus.$emit("showModalMessage",{id:"deleteColumnConfigWidgetOne",heading:"Remove widget",text:"Do you really want to remove this widget from the layout?",buttonBehavior:"yesNo",okCallback:function(){o.columnLayoutConfig[t].splice(e,1),o.emitValue()}})},openWidgetSelection:function(t){t!==this.addingInCol?this.addingInCol=t:this.addingInCol=null},addWidget:function(t){this.columnLayoutConfig[this.addingInCol].push(h({},t,{ID:this.getUuid()})),this.emitValue()},emitValue:function(){Object(a.isEqual)(this.localValue,this.oldLocalValue)||(this.$emit("input",this.localValue,this.oldLocalValue),this.$emit("changed",this.localValue,this.oldLocalValue),this.oldLocalValue=Object(a.cloneDeep)(this.localValue))},colMDForSection:function(t){return{OneColumn:{container:12,widgetName:11,deleteButton:1},TwoColumns:{container:6,widgetName:10,deleteButton:2},ThreeColumns:{container:4,widgetName:9,deleteButton:3}}[this.activeColumnLayout][t]},isTheLastColumn:function(t){return t>1&&t===this.columns.length},filter:function(t){var e=this,o="";o+=this.$locale.translate(this.label,this.labelPlaceholder);return["description"].forEach(function(t){o+=e.$locale.translate(e[t])}),Object.keys(this.availableWidgets).forEach(function(t){var n=e.availableWidgets[t];o+=e.$locale.translate(n.Title)}),Object(l.a)(o,t)},hideMultipleWidgetsHint:function(){this.$store.commit("Apps/Agent/Plugins/Store/ScreenBase/isMultipleWidgetsHintHidden",{isMultipleWidgetsHintHidden:!0})},getFullWidgetTitle:function(t){var e="";return t.Config&&t.Config.CustomTitle&&(e="".concat(t.Config.CustomTitle," - ")),e+=this.$locale.translate(t.Title)}}},C=(o("oswe"),o("psIG")),g=Object(C.a)(f,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!hidden"}],staticClass:"ColumnsConfig",attrs:{state:!Boolean(t.error)&&null,label:t._f("translate")(t.realLabel,t.labelPlaceholder),"label-for":t.fieldId,"label-sr-only":t.labelSrOnly,description:t._f("translate")(t.description),"invalid-feedback":t._f("translate")(t.error),"aria-label":t._f("translate")(t.realLabel,t.labelPlaceholder)},scopedSlots:t._u([t.label&&t.description&&t.hideDescription?{key:"label",fn:function(){return[t._v("\n        "+t._s(t._f("translate")(t.realLabel,t.labelPlaceholder))+"\n        "),o("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html",modifiers:{html:!0}}],attrs:{title:t._f("translate")(t.description)}},[o("CommonIcon",{staticClass:"mx-2 Font--Small",attrs:{weight:"regular",icon:"messages-bubble-square-information"}})],1)]},proxy:!0}:null,t.label&&t.description&&t.hideDescription?{key:"description",fn:function(){return[o("small",{staticClass:"sr-only"},[t._v("\n            "+t._s(t._f("translate")(t.description))+"\n        ")])]},proxy:!0}:null],null,!0)},[t._v(" "),t._v(" "),o("b-row",{staticClass:"border-bottom pb-2",attrs:{"align-v":"center"}},[o("b-col",{staticClass:"ColumnLayoutSwitch",attrs:{md:"12"}},[o("span",{staticClass:"mr-2"},[t._v("\n                "+t._s(t._f("translate")("Select the layout you want to edit"))+"\n            ")]),t._v(" "),o("CommonLink",{directives:[{name:"focus",rawName:"v-focus",value:t.autoFocus,expression:"autoFocus"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"Icon--OpenOneColumnView mr-2",class:{ActiveColumnLayout:t.isOneColumnLayout},attrs:{title:t._f("translate")("Settings for one-column layout")},on:{click:function(e){return t.switchLayout("OneColumn")}}},[o("CommonIcon",{attrs:{icon:"layout-top"}})],1),t._v(" "),o("CommonLink",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"Icon--OpenTwoColumsView mr-2",class:{ActiveColumnLayout:t.isTwoColumnsLayout},attrs:{title:t._f("translate")("Settings for two-column layout")},on:{click:function(e){return t.switchLayout("TwoColumns")}}},[o("CommonIcon",{attrs:{icon:"layout-4"}})],1),t._v(" "),o("CommonLink",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"Icon--OpenThreeColumsView",class:{ActiveColumnLayout:t.isThreeColumnsLayout},attrs:{title:t._f("translate")("Settings for three-column layout")},on:{click:function(e){return t.switchLayout("ThreeColumns")}}},[o("CommonIcon",{attrs:{icon:"layout-3"}})],1)],1)],1),t._v(" "),o("b-row",{staticClass:"pt-2",attrs:{"align-v":"center"}},[o("b-col",[t._v("\n            "+t._s(t._f("translate")("You are editing the %s column layout",t.columns.length))+"\n        ")])],1),t._v(" "),o("b-row",{staticClass:"mt-2",attrs:{"no-gutters":""}},t._l(t.columns,function(e){return o("b-col",{key:e,staticClass:"px-4 py-3 ColumnLayoutSettings__Box",attrs:{cols:t.colMDForSection("container")}},[o("b-row",{attrs:{"no-gutters":""}},[o("b-col",[o("VueDraggable",{attrs:{value:t.widgets(e),group:"threeColumnLayout",animation:"200","ghost-class":"DragDropGhost",handle:".FormColumnsLayout__DragAndDrop"},on:{input:function(o){return t.setWidgets(e,o)}}},t._l(t.widgets(e),function(n,i){return o("b-row",{key:n.ID,staticClass:"mb-2",attrs:{"no-gutters":"","align-v":"center"}},[o("b-col",{attrs:{md:t.colMDForSection("widgetName")}},[o("b-row",{staticClass:"p-2 ColumnLayoutSettings__Item",attrs:{"no-gutters":""}},[o("b-col",{staticClass:"pl-3 py-1 text-truncate",attrs:{md:"10",title:t.getFullWidgetTitle(n)}},[t._v("\n                                        "+t._s(t.getFullWidgetTitle(n))+"\n                                    ")]),t._v(" "),o("b-col",{staticClass:"pr-3 text-right",attrs:{md:"2",lg:"2"}},[o("CommonIcon",{staticClass:"FormColumnsLayout__DragAndDrop",attrs:{icon:"direction-button-arrows"}})],1)],1)],1),t._v(" "),o("b-col",{staticClass:"text-center",attrs:{md:t.colMDForSection("deleteButton")}},[o("CommonLink",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"Delete",attrs:{title:t._f("translate")("Remove widget")},on:{click:function(o){return t.deleteWidget(e,i)}}},[o("CommonIcon",{staticClass:"Color--Alert",attrs:{icon:"bin-2-alternate"}})],1)],1)],1)}),1),t._v(" "),o("b-row",{staticClass:"mt-4 text-center",attrs:{"no-gutters":""}},[o("b-col",{staticClass:"position-relative"},[t.addingInCol===e?o("div",{staticClass:"ColumnLayoutSettings__AddLayer position-absolute",class:{"ColumnLayoutSettings__AddLayer--Inverted":t.isTheLastColumn(e)}},t._l(t.availableWidgetsList,function(e){return o("b-row",{key:e.Name,staticClass:"my-2 mx-1",attrs:{"no-gutters":""}},[o("b-col",{staticClass:"text-truncate"},[o("CommonLink",{staticClass:"HoverUnderline d-block ColumnLayoutSettings__Item",on:{click:function(o){return t.addWidget(e)}}},[t._v("\n                                            "+t._s(t._f("translate")(e.Title))+"\n                                        ")])],1)],1)}),1):t._e(),t._v(" "),o("CommonLink",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-2 ColumnLayoutSettings__AddButton",class:{"ColumnLayoutSettings__AddButton--Active":t.addingInCol===e},attrs:{title:t._f("translate")("Add new widget")},on:{click:function(o){return t.openWidgetSelection(e)}}},[o("CommonIcon",{staticClass:"icon",attrs:{weight:"bold",icon:t.addingInCol==e?"close":"add"}})],1)],1)],1)],1)],1)],1)}),1),t._v(" "),o("b-row",{staticClass:"my-2"},[o("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[o("p",{staticClass:"m-0"},[t._v("\n                "+t._s(t._f("translate")("Here you can design the column layout of the detail view according to your requirements."))+"\n            ")]),t._v(" "),o("p",{staticClass:"m-0"},[t._v("\n                "+t._s(t._f("translate")("Please press the add button at the bottom to add a widget you want to get displayed."))+"\n            ")]),t._v(" "),o("p",{staticClass:"m-0"},[t._v("\n                "+t._s(t._f("translate")("You can remove a widget by clicking the trash icon."))+"\n            ")]),t._v(" "),o("p",{staticClass:"m-0"},[t._v("\n                "+t._s(t._f("translate")("You can change the settings of each widget directly from itself."))+"\n            ")])])],1),t._v(" "),t.isMultipleWidgetsHintHidden?t._e():o("div",{staticClass:"p-2 Hint"},[o("b-row",[o("b-col",{attrs:{cols:"10"}},[o("CommonIcon",{attrs:{size:"sm",icon:"study-light-idea",decorative:""}}),t._v("\n                "+t._s(t._f("translate")("Hint: You can add widgets multiple times. Each widget has its own settings."))+"\n            ")],1),t._v(" "),o("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[o("CommonLink",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:t._f("translate")("Hide the hint")},on:{click:t.hideMultipleWidgetsHint}},[o("CommonIcon",{attrs:{size:"sm",weight:"bold",icon:"close"}})],1)],1)],1)],1)],1)},[],!1,null,null,null);e.default=g.exports},"3Hfo":function(t,e,o){"use strict";var n=o("8CHY");e.a={methods:{filter:function(t){var e=this,o="";o+=this.$locale.translate(this.label,this.labelPlaceholder);return["description","localPlaceholder"].forEach(function(t){o+=e.$locale.translate(e[t])}),Object(n.a)(o,t)}}}},"9ygP":function(t,e,o){},A86J:function(t,e,o){"use strict";e.a={directives:{focus:{inserted:function(t,e){e.value&&t.focus()}}},props:{autoFocus:{type:Boolean,default:!1}},watch:{autoFocus:function(t){t&&"function"==typeof this.focus&&this.focus()}},methods:{focus:function(){this.$el&&"function"==typeof this.$el.focus&&this.$el.focus()}}}},oswe:function(t,e,o){"use strict";var n=o("9ygP");o.n(n).a}}]);