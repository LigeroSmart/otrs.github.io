(window.webpackJsonp=window.webpackJsonp||[]).push([[22,29],{"+J7U":function(e,t,i){var o,r,n=i("We69"),s=i("4feL"),a=0,l=0;e.exports=function(e,t,i){var c=t&&i||0,u=t||[],d=(e=e||{}).node||o,h=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==h){var m=n();null==d&&(d=o=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==h&&(h=r=16383&(m[6]<<8|m[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),p=void 0!==e.nsecs?e.nsecs:l+1,v=f-a+(p-l)/1e4;if(v<0&&void 0===e.clockseq&&(h=h+1&16383),(v<0||f>a)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,l=p,r=h;var g=(1e4*(268435455&(f+=122192928e5))+p)%4294967296;u[c++]=g>>>24&255,u[c++]=g>>>16&255,u[c++]=g>>>8&255,u[c++]=255&g;var F=f/4294967296*1e4&268435455;u[c++]=F>>>8&255,u[c++]=255&F,u[c++]=F>>>24&15|16,u[c++]=F>>>16&255,u[c++]=h>>>8|128,u[c++]=255&h;for(var b=0;b<6;++b)u[c+b]=d[b];return t||s(u)}},"4feL":function(e,t){for(var i=[],o=0;o<256;++o)i[o]=(o+256).toString(16).substr(1);e.exports=function(e,t){var o=t||0,r=i;return[r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]]].join("")}},GgUG:function(e,t,i){"use strict";i.r(t);i("2Tod"),i("ABKx"),i("asZ9"),i("9ovy"),i("75LO"),i("DbwS"),i("W1QL"),i("K/PF"),i("t91x");var o=i("OvAC"),r=i.n(o),n=i("rpZP"),s=i("9va6"),a=i("ihrN");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(i,!0).forEach(function(t){r()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var u={name:"Form",components:{CommonAlert:function(){return i.e(371).then(i.bind(null,"L3zo"))},FormGroup:function(){return i.e(367).then(i.bind(null,"yFPx"))},CommonCollisionDetectionMessage:function(){return i.e(99).then(i.bind(null,"JKnt"))}},mixins:[n.a],props:{url:{type:String},xhr:{type:Boolean,default:!1},params:{type:Object},propOverride:{type:Object},testMode:{type:Boolean,default:!1},noAutofocus:{type:Boolean,default:!1},hideDescription:{type:Boolean,default:!1},filterText:{type:String},enableCollisionDetection:{type:Boolean,default:!1},collisionDetectionEvents:{type:Array,default:function(){return[]}},collisionDetectionHandler:{type:Function},collisionDetectionMessageClass:{type:String},emitValuesInComplexObject:{type:Boolean,default:!1},initialValues:{type:Object,default:function(){return{}}},showHorizontalBar:{type:Boolean}},data:function(){return{showCollisionDetection:null,schema:{},values:Object(s.cloneDeep)(this.initialValues),errors:{},serverErrors:{},clientValidators:Object(a.a)(),formId:this.getUuid(),testSchema:{HiddenFields:{HiddenField1:"hidden-field-1","HiddenGroup.Field2":"hidden-field-2"},Fields:[{Name:"",Type:"FormGroup",IsFormGroup:1,Config:{Fields:[{Name:"FormInput",Label:"Input Field",Type:"FormInput",Placeholder:"This is a placeholder",Description:"This is an input field description.",Hint:"It even has a hint below.",Required:!0,Validators:["Required"]}]}},{Name:"",Type:"FormGroup",IsFormGroup:1,Config:{Fields:[{Name:"FormSelect",Label:"Select Field",Type:"FormSelect",Placeholder:"Select...",Description:"This is a select field description.",Props:{Options:[{id:1,label:"Option 1"},{id:2,label:"Option 2"},{id:3,label:"Option 3"}]}}]}},{Name:"",Type:"FormGroup",IsFormGroup:1,Config:{Fields:[{Name:"FormTextArea",Label:"Text Field",Type:"FormTextArea",Placeholder:"This is a placeholder",Description:"This is a text field description.",Required:!0,Validators:["Required"]}]}},{Name:"",Type:"FormGroup",IsFormGroup:1,Config:{Fields:[{Name:"FormCheckbox",Label:"Checkbox Field",Type:"FormCheckbox",Description:"This is a checkbox field description."}]}},{Name:"",Type:"FormGroup",IsFormGroup:1,Config:{Fields:[{Name:"FormRadio",Label:"Radio Field",Type:"FormRadio",Description:"This is a radio field description.",Props:{Options:[{id:1,label:"First choice"},{id:2,label:"Second choice"}]}}]}}]}}},computed:{localPropOverride:function(){return c({},this.propOverride,{formId:this.formId})},body:function(){return c({},this.params,{},this.values,{},this.hiddenValues,{FormID:this.formId})},hiddenValues:function(){return this.schema.HiddenFields?this.schema.HiddenFields:{}}},watch:{url:function(){this.getSchema()}},mounted:function(){this.getSchema({NoAutofocus:this.noAutofocus},this.$route.query)},methods:{removeValue:function(e,t){var i=this,o=this.values[t];if(this.$delete(this.values,t),this.$delete(this.errors,t),e.SubmitForm)return this.clientValidation(this.schema)?void this.submit().then(function(){i.emitChanged(t,o,void 0)}):void this.emitChanged(t,o,void 0);e.UpdateForm?this.getSchemaAsync().then(function(){i.emitChanged(t,o,void 0)}):this.emitChanged(t,o,void 0)},setValue:function(e,t,i){var o=this,r=Object.hasOwnProperty.call(this.values,t),n=this.values[t];if(this.$set(this.values,t,i),r){var s=this.validateField(e,t,i);if(e.SubmitForm)return s&&this.clientValidation(this.schema)?void this.submit().then(function(){o.emitChanged(t,n,i)}):void this.emitChanged(t,n,i);e.UpdateForm?this.getSchemaAsync({ChangedField:{Name:t,NewValue:i,OldValue:n}}).then(function(){o.emitChanged(t,n,i)}):this.emitChanged(t,n,i)}},getSchema:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e){return o?Object.prototype.hasOwnProperty.call(e,"then")?e:new Promise(function(t){return t(e)}):null};return this.testMode?r(this.processSchema(this.testSchema)):r(this.clientSendRequest({Path:this.url,Method:"post",Query:i,Body:c({},this.body,{Meta:t})},{xhr:this.xhr}).then(function(t){e.processSchema(t.Body.Schema),Promise.resolve(t)}).catch(function(t){e.$log.error(t),Promise.reject(t)}))},getSchemaAsync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getSchema(e,t,!0)},processSchema:function(e){var t=this,i=e;this.values={},this.initValues({Name:"",Fields:i.Fields}),this.schema=i,i.Fields.length&&this.$nextTick(function(){t.$emit("ready",t.body)}),this.errors&&this.clientValidation(this.schema,null,!0),this.$nextTick(function(){t.$test.setFlag("Form::Update",t.url)})},initValues:function(e){var t=this,i=e.Name.length>0?"".concat(e.Name,"."):"";e.Fields.forEach(function(e){e.IsFormGroup?t.initValues({Name:i+e.Name,Fields:e.Config.Fields}):t.$set(t.values,"".concat(i).concat(e.Name),e.Value)})},validateForm:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=Object(s.cloneDeep)(this.body);if(Object.keys(i).forEach(function(e){void 0===i[e]&&(i[e]=null)}),this.enableCollisionDetection&&this.$refs.collisionDetection.close(),this.testMode)return t?Promise.resolve(i):(this.$emit("valid",i),null);var o={};return this.schema.ChangeTime&&(o.ChangeTime=this.schema.ChangeTime),this.clientSendRequest({Path:this.url,Method:"post",Body:c({},i,{Meta:o}),Headers:{"X-OTRS-API-ValidateFormData":1}},{xhr:this.xhr}).then(function(){e.$set(e,"errors",{});var i=e.getValues(!0);return t?Promise.resolve(i):(e.$emit("valid",i),e.$nextTick(function(){e.$test.setFlag("Form::Valid",e.url)}),Promise.resolve(),null)}).catch(function(i){var o=i.response;return o.Body.Errors&&(e.serverErrors=o.Body.Errors),o.Body.Schema&&(e.schema=o.Body.Schema,e.initValues({Name:"",Fields:e.schema.Fields})),422===o.Code&&e.showServerErrors(),e.enableCollisionDetection&&409===o.Code&&(e.schema.ChangeTime=o.Body.ChangeTime,e.$refs.collisionDetection.open()),t?Promise.reject(i):(e.$emit("invalid",i),e.$nextTick(function(){e.$test.setFlag("Form::Invalid",e.url)}),Promise.reject(),null)})},submit:function(){return this.validateForm()},submitAsync:function(){return this.validateForm(!0)},showServerErrors:function(){var e=this;this.$set(this,"errors",{}),Object.keys(this.serverErrors).forEach(function(t){var i=Object(s.upperFirst)(Object(s.camelCase)(e.serverErrors[t].Validator)),o=e.clientValidators[i];if(o&&"function"==typeof o.errorMessage){var r=o.errorMessage(e.serverErrors[t].Attributes.Arguments);r&&e.$set(e.errors,t,r)}else e.serverErrors[t].Message&&e.$set(e.errors,t,[e.serverErrors[t].Message,e.serverErrors[t].Data])})},clientValidation:function(e,t,i){var o=this,r=!0;return e.Fields.forEach(function(e){var n;n=t?"".concat(t,".").concat(e.Name):e.Name,e.IsFormGroup?o.clientValidation(e.Config,n,i)||(r=!1):i?o.errors[n]&&(o.validateField(e,n,o.values[n])||(r=!1)):o.validateField(e,n,o.values[n])||(r=!1)}),r},validateField:function(e,t,i){var o=this;if(this.errors[t]&&this.$delete(this.errors,t),void 0===e.Validators)return!0;var r=!1;return e.Validators.forEach(function(n){if(!r&&(e.Required||null!==i&&void 0!==i&&""!==i)){var a=[],l=n;n instanceof Object&&(l=n.Validator,a=n.Arguments),l=Object(s.upperFirst)(Object(s.camelCase)(l));var c=o.clientValidators[l];if(c&&"function"==typeof c.validate&&!c.validate(i,a)&&(r=!0,"function"==typeof c.errorMessage)){var u=c.errorMessage(a);u&&o.$set(o.errors,t,u)}}}),!r},resetForm:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this.$set(this,"schema",{}),this.$set(this,"values",{}),this.formId=this.getUuid(),t&&this.getSchema(),this.$nextTick(function(){e.$set(e,"errors",{})})},onSubmit:function(){this.clientValidation(this.schema)&&this.submit()},onReset:function(){this.resetForm()},onCollisionDetected:function(e){var t=this,i=function(i,o){if(t.collisionDetectionHandler){var r=t.collisionDetectionHandler(e);r&&r.then instanceof Function?r.then(function(e){return i(e)}).catch(function(e){return o(e)}):i(r)}else i({})};return new Promise(function(e,o){t.testMode?i(e,o):t.clientSendRequest({Path:t.url,Method:"post",Headers:{"X-OTRS-API-OnlyFormChangeTime":1}},{xhr:t.xhr}).then(function(r){t.schema.ChangeTime=r.Body.ChangeTime,i(e,o)}).catch(function(e){return t.$log.error(e),o(e)})})},closeCollisionDetectionMessage:function(){this.enableCollisionDetection&&this.$refs.collisionDetection.close()},onFiltered:function(e){this.$emit("filtered",e)},onLoaded:function(){var e=this;this.$nextTick(function(){e.$test.setFlag("Form::Loaded",e.url)})},buildValuesToEmit:function(){var e=c({},this.values,{},this.hiddenValues);if(!this.emitValuesInComplexObject)return e;var t={};return Object.keys(e).forEach(function(i){var o=e[i];if(i.match(/\./)){var r=t,n=i.split(".");n.forEach(function(e,t){if(t+1<n.length)return r[e]||(r[e]={}),void(r=r[e]);r[e]=o})}else t[i]=o}),t},getValues:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.buildValuesToEmit();return e&&(t=c({},this.params,{},t,{FormID:this.formId})),t},emitChanged:function(e,t,i){this.$emit("changed",this.body,{fullName:e,oldValue:t,newValue:i})}}},d=i("psIG"),h=Object(d.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.schema.Fields?i("b-form",{on:{reset:function(t){return t.preventDefault(),e.onReset(t)},submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e.enableCollisionDetection?i("CommonCollisionDetectionMessage",{ref:"collisionDetection",class:e.collisionDetectionMessageClass,attrs:{events:e.collisionDetectionEvents,handler:e.onCollisionDetected,"test-mode":e.testMode},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("collision-detection-message",null,null,t)]}}],null,!0)}):e._e(),e._v(" "),e._t("before-form-fields"),e._v(" "),i("FormGroup",{attrs:{"set-value":e.setValue,"remove-value":e.removeValue,fields:e.schema.Fields,errors:e.errors,"prop-override":e.localPropOverride,"hide-description":e.hideDescription,"filter-text":e.filterText,"show-horizontal-bar":e.showHorizontalBar,"is-root":""},on:{loaded:e.onLoaded,filtered:function(t){return e.onFiltered(t)}},model:{value:e.values,callback:function(t){e.values=t},expression:"values"}}),e._v(" "),e._t("after-form-fields"),e._v(" "),e._t("submit-buttons")],2):e._e()},[],!1,null,null,null);t.default=h.exports},We69:function(e,t){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var o=new Uint8Array(16);e.exports=function(){return i(o),o}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},rpZP:function(e,t,i){"use strict";var o=i("+J7U"),r=i.n(o);t.a={data:function(){return{uuid:this.getUuid()}},methods:{getUuid:function(){return r()()}}}}}]);