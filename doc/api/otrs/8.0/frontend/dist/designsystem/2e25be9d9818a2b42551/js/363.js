(window.webpackJsonp=window.webpackJsonp||[]).push([[363],{"4tAG":function(e,l,t){},N66M:function(e,l,t){"use strict";t.r(l);t("oMRA"),t("6d4m"),t("4aJ6"),t("2UZ+"),t("W1QL"),t("K/PF"),t("t91x"),t("3DBk");var a=t("VixF"),i=t("9va6"),n=t("8CHY"),o=t("DxZF"),r=t("rAvA"),s={name:"FormRecipients",components:{CommonBadge:function(){return t.e(32).then(t.bind(null,"B2Ms"))},FormAutocomplete:function(){return t.e(360).then(t.bind(null,"1BT7"))}},mixins:[a.a,o.a,r.a],props:{value:{type:null},multiple:{type:Boolean,default:!0},url:{type:String,required:!0},searchPromptText:{type:String},noResultsText:{type:String},testMode:{type:Boolean,default:!1},highlightValues:{type:Array,default:function(){return[]}},onlyMobilePhoneNumber:{type:Boolean,default:!1},isMainRecipientField:{type:Boolean,default:!1}},data:function(){return{localValue:[],oldValue:[],index:{}}},computed:{fieldId:function(){return"formRecipients-".concat(this.uuid)},params:function(){return{OnlyMobilePhoneNumber:this.onlyMobilePhoneNumber?1:0,DisabledOptions:this.connectedSelectedRecipientValues}}},watch:{value:function(e){Object(i.isEqual)(e,this.localValue)||this.buildLocalValue()}},created:function(){this.buildLocalValue()},methods:{buildLocalValue:function(){var e=this,l=this.value?Object(i.cloneDeep)(this.value):[];Object(i.isArray)(l)||(l=[l]),this.localValue=l,this.oldValue=Object(i.cloneDeep)(l),Object.values(this.localValue).forEach(function(l){e.index[l.Key]=l.Value})},emitValue:function(){var e={value:Object(i.cloneDeep)(this.localValue),oldValue:this.oldValue};this.multiple||(e.value=e.value.shift(),e.oldValue=e.oldValue.shift()),this.$emit("input",e.value,e.oldValue),this.oldValue=Object(i.cloneDeep)(this.localValue)},onSelect:function(e){this.$refs.autocomplete.clear(),e&&e.id&&e.label&&(this.index[e.id]||(this.multiple||(this.index={},this.localValue=[]),this.index[e.id]=e.label,this.localValue.push({Key:e.id,Value:e.label,Highlight:0}),this.emitValue()))},remove:function(e){this.$delete(this.index,e);var l=this.localValue.findIndex(function(l){return l.Key===e});this.$delete(this.localValue,l),this.emitValue()},guessRecipientVariant:function(e){var l=e.Highlight;return l&&"1"===l.toString()?"highlight":this.highlightValues.includes(e.Key)?"highlight":"info"},filter:function(e){var l=this,t="";t+=this.$locale.translate(this.label);return["description","localPlaceholder"].forEach(function(e){t+=l.$locale.translate(l[e])}),this.localValue.forEach(function(e){t+=e.Key+e.Value}),Object(n.a)(t,e)}}},u=(t("vWSz"),t("psIG")),c=Object(u.a)(s,function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!hidden"}],staticClass:"FormRecipients",attrs:{state:!Boolean(e.error)&&null,label:e._f("translate").apply(void 0,[e.label].concat(e.localLabelPlaceholder)),"label-for":e.fieldId,"label-class":e.required?"required":null,"label-sr-only":e.labelSrOnly,description:e._f("translate")(e.description),"invalid-feedback":e._f("translate")(e.error),"aria-label":e._f("translate").apply(void 0,[e.label].concat(e.localLabelPlaceholder))},scopedSlots:e._u([e.label&&e.description&&e.hideDescription?{key:"label",fn:function(){return[e._v("\n        "+e._s(e._f("translate").apply(void 0,[e.label].concat(e.localLabelPlaceholder)))+"\n        "),t("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html",modifiers:{html:!0}}],attrs:{title:e._f("translate")(e.description)}},[t("CommonIcon",{staticClass:"mx-2 Font--Small",attrs:{weight:"regular",icon:"messages-bubble-square-information"}})],1)]},proxy:!0}:null,e.label&&e.description&&e.hideDescription?{key:"description",fn:function(){return[t("small",{staticClass:"sr-only"},[e._v("\n            "+e._s(e._f("translate")(e.description))+"\n        ")])]},proxy:!0}:null],null,!0)},[e._v(" "),e._v(" "),t("b-form-row",[t("b-col",[t("FormAutocomplete",{ref:"autocomplete",attrs:{name:e.name,url:e.url,"test-mode":e.testMode,"no-results-text":e.noResultsText,disabled:e.disabled,required:e.required,"search-prompt-text":e.searchPromptText,placeholder:e.placeholder,params:e.params,"clear-on-select":""},on:{select:e.onSelect},scopedSlots:e._u([e.addressBookMode?{key:"append-inline",fn:function(){return[t("CommonLink",{on:{click:e.onActionClick}},[t("CommonIcon",{staticClass:"mt-1",attrs:{icon:"single-neutral-book"}})],1)]},proxy:!0}:null],null,!0)})],1)],1),e._v(" "),t("b-form-row",[t("b-col",e._l(e.localValue,function(l){return t("CommonBadge",{key:l.Key,staticClass:"mr-3 my-2 p-1",attrs:{title:l.Value,variant:e.guessRecipientVariant(l),inline:"","show-remove-button":"","disable-tooltip":""},on:{remove:function(t){return e.remove(l.Key)}}})}),1)],1)],1)},[],!1,null,null,null);l.default=c.exports},vWSz:function(e,l,t){"use strict";var a=t("4tAG");t.n(a).a}}]);