(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{Iptl:function(e,t,n){"use strict";n("GkPX");var s=n("nS/B");t.a={components:{CommonNotice:function(){return n.e(168).then(n.bind(null,"mkLc"))},DocsExample:function(){return n.e(25).then(n.bind(null,"GD02"))},DocsComponentAPI:function(){return n.e(27).then(n.bind(null,"8txu"))}},computed:{doc:function(){var e=this.componentNamespace||"Components";return this.$store.getters.componentDoc[e][this.$options.name]||[]},summary:function(){return Object(s.b)(this.doc,"summary")},version:function(){return Object(s.b)(this.doc,"version")},description:function(){return Object(s.b)(this.doc,"description")},props:function(){return Object(s.a)(this.doc,"prop")},slots:function(){return Object(s.a)(this.doc,"slot")},events:function(){return Object(s.a)(this.doc,"event")},methods:function(){return Object(s.a)(this.doc,"method")}},mounted:function(){var e=this;this.$nextTick(function(){e.$test.setFlag("DocComponent::".concat(e.component.name,"::Mounted"))})}}},uCJ7:function(e,t,n){"use strict";n.r(t);var s=n("Iptl"),o=(n("lQyR"),n("YhIr"),n("6DIm")),i=n("0NuS"),r=n.n(i),a=n("nxTg"),c=n.n(a),u=(n("+jjx"),n("ABKx"),n("J8hF"),n("GkPX"),n("e+GP")),h=n.n(u),l=(n("75LO"),n("Z8gF"),n("DbwS"),n("W1QL"),n("K/PF"),n("t91x"),n("zx98"),n("5hJT"),n("SDJZ")),p=n.n(l),d=n("NToG"),v=n.n(d),f=n("akKz"),m=n.n(f),b=(n("5Nsu"),n("kmNX")),_=n.n(b),y=function(){function e(){p()(this,e),this._items=new Map}return v()(e,[{key:"create",value:function(e,t,n){return this._rejectExistingRequest(e),this._createNewRequest(e,t,n)}},{key:"resolve",value:function(e,t){e&&this._items.has(e)&&this._items.get(e).resolve(t)}},{key:"reject",value:function(e,t){if(e&&this._items.has(e)){var n=new Error("Error getting valid response.");n.response=t,this._items.get(e).reject(n)}}},{key:"rejectAll",value:function(e){Object.keys(this._items).forEach(function(t){return t.isPending?t.reject(e):null})}},{key:"_rejectExistingRequest",value:function(e){var t=this._items.get(e);t&&t.isPending&&t.reject(new Error("WebSocket request is replaced, id: ".concat(e)))}},{key:"_createNewRequest",value:function(e,t,n){var s=this,o=new m.a;return this._items.set(e,o),o.timeout(n,"WebSocket request was rejected by timeout (".concat(n," ms). RequestId: ").concat(e)),_()(o.call(t),function(){return s._deleteRequest(e,o)})}},{key:"_deleteRequest",value:function(e,t){this._items.get(e)===t&&this._items.delete(e)}}]),e}(),g=(n("9ovy"),n("tb9w")),P=function(){function e(){p()(this,e),this._messages={},this._lastUid=-1}return v()(e,[{key:"_callSubscriber",value:function(e,t){setTimeout(function(){return e(t)},0)}},{key:"_deliverMessage",value:function(e,t){var n=this;g.a.debug("PubSub - _deliverMessage() - message",e),Object.keys(this._messages).forEach(function(s){n._messageFilter(n._messages[s],e)&&n._callSubscriber(n._messages[s].function,t)})}},{key:"_messageFilter",value:function(e,t){return!(Object.prototype.hasOwnProperty.call(e,"codes")&&e.codes.indexOf(parseInt(t.code,10))<0)&&(!(Object.prototype.hasOwnProperty.call(e,"methods")&&e.methods.indexOf(t.method.toUpperCase())<0)&&(!(Object.prototype.hasOwnProperty.call(e,"types")&&e.types.indexOf(t.type.toUpperCase())<0)&&!(Object.prototype.hasOwnProperty.call(e,"path")&&!t.path.match(e.path))))}},{key:"_messageHasSubscribers",value:function(e){var t=this,n=!1;return Object.keys(this._messages).forEach(function(s){t._messageFilter(t._messages[s],e)&&(n=!0)}),n}},{key:"_createDeliveryFunction",value:function(e,t){var n=this;return function(){n._deliverMessage(e,t)}}},{key:"publish",value:function(e,t){var n=this;return Object.prototype.hasOwnProperty.call(e,"path")?Object.prototype.hasOwnProperty.call(e,"method")?Object.prototype.hasOwnProperty.call(e,"code")?Object.prototype.hasOwnProperty.call(e,"type")?(setTimeout(function(){n._messageHasSubscribers(e)&&n._createDeliveryFunction(e,t)()},0),!0):(g.a.error("PubSub.js - publish()",'Parameter "message" requires "type".'),!1):(g.a.error("PubSub.js - publish()",'Parameter "message" requires "code".'),!1):(g.a.error("PubSub.js - publish()",'Parameter "message" requires "method".'),!1):(g.a.error("PubSub.js - publish()",'Parameter "message" requires "path".'),!1)}},{key:"subscribe",value:function(e,t){var n=this;if("function"!=typeof t)return!1;var s="uid_".concat(String(++this._lastUid));return Object.prototype.hasOwnProperty.call(this._messages,s)||(this._messages[s]={}),this._messages[s].function=t,Object.prototype.hasOwnProperty.call(e,"path")&&(this._messages[s].path=new RegExp(e.path)),Object.prototype.hasOwnProperty.call(e,"methods")&&e.methods.length&&(this._messages[s].methods=[],Object.keys(e.methods).forEach(function(t){n._messages[s].methods.push(e.methods[t].toUpperCase())})),Object.prototype.hasOwnProperty.call(e,"codes")&&e.codes.length&&(this._messages[s].codes=[],Object.keys(e.codes).forEach(function(t){n._messages[s].codes.push(parseInt(e.codes[t],10))})),Object.prototype.hasOwnProperty.call(e,"types")&&e.types.length&&(this._messages[s].types=[],Object.keys(e.types).forEach(function(t){n._messages[s].types.push(e.types[t].toUpperCase())})),{token:s,unsubscribe:function(){n.unsubscribe(s)}}}},{key:"clearAllSubscriptions",value:function(){this._messages={}}},{key:"unsubscribe",value:function(e){delete this._messages[e]}}]),e}(),E=function(){function e(){p()(this,e),this._pushEvents={},this._lastUid=-1}return v()(e,[{key:"_callSubscriber",value:function(e,t){setTimeout(function(){return e(t)},0)}},{key:"_deliverPushEvent",value:function(e){var t=this;g.a.debug("PushEvents - _deliverPushEvent() - pushEvent",e),Object.keys(this._pushEvents).forEach(function(n){t._pushEventFilter(t._pushEvents[n].name,e)&&t._callSubscriber(t._pushEvents[n].function,e)})}},{key:"_pushEventFilter",value:function(e,t){var n=e;return n=n.replace("<:PositiveInt>","\\d+"),!!new RegExp(n).test(t)}},{key:"_pushEventHasSubscribers",value:function(e){var t=this,n=!1;return Object.keys(this._pushEvents).forEach(function(s){t._pushEventFilter(t._pushEvents[s].name,e)&&(n=!0)}),n}},{key:"_createDeliveryFunction",value:function(e){var t=this;return function(){t._deliverPushEvent(e)}}},{key:"_publishPushEvent",value:function(e){var t=this;return e?(setTimeout(function(){t._pushEventHasSubscribers(e)&&t._createDeliveryFunction(e)()},0),!0):(g.a.error("PushEvents.js - publish()",'Parameter "pushEvent" is requird.'),!1)}},{key:"publish",value:function(e){var t=this;return Object.keys(e).forEach(function(n){t._publishPushEvent(e[n].Name)}),!0}},{key:"subscribe",value:function(e,t){var n=this;if("function"!=typeof t||!e)return!1;var s="uid_".concat(String(++this._lastUid));return Object.prototype.hasOwnProperty.call(this._pushEvents,s)||(this._pushEvents[s]={}),this._pushEvents[s].function=t,this._pushEvents[s].name=e,{token:s,unsubscribe:function(){n.unsubscribe(s)}}}},{key:"subscriptions",value:function(){var e=this,t=[];return Object.keys(this._pushEvents).forEach(function(n){t.push(e._pushEvents[n].name)}),t}},{key:"clearAllSubscriptions",value:function(){this._pushEvents={}}},{key:"unsubscribe",value:function(e){delete this._pushEvents[e]}}]),e}(),I=(n("it7j"),n("U8p0"),n("4aJ6"),new(function(){function e(){p()(this,e),this._registry={}}return v()(e,[{key:"enable",value:function(e,t){if(!(e instanceof RegExp||"string"==typeof e&&0!==e.length))throw new Error("invalid value for 'path' parameter, regexp or string is expected.");if("string"!=typeof t||0===t.length)throw new Error("invalid value for 'profile' parameter, string is expected");return this._registry[e.toString()]={type:e instanceof RegExp?"regexp":"string",name:t},!0}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==e)return this._registry={},!0;if(!(e instanceof RegExp||"string"==typeof e&&0!==e.length))throw new Error("invalid value for 'path' parameter, regexp or string is expected.");return delete this._registry[e.toString()],!0}},{key:"profileForPath",value:function(e){var t=this;if(!(e instanceof RegExp||"string"==typeof e&&0!==e.length))throw new Error("invalid value for 'path' parameter, regexp or string is expected.");var n=Object.keys(this._registry).sort().reverse().find(function(n){var s=n;if("regexp"===t._registry[n].type){var o=s.match(/^\/(.*)\/([^\/]*)$/);s=new RegExp(o[1],o[2])}return!!e.match(s)});return n?this._registry[n].name:null}},{key:"addFromObject",value:function(e){var t=this;return Object.keys(e).forEach(function(n){t._registry[n]={type:e[n].type,name:e[n].name}}),!0}},{key:"toObject",value:function(){return JSON.parse(JSON.stringify(this._registry))}}]),e}())),S=function(e){var t="";return"object"!==h()(e)?t:(Object.keys(e).forEach(function(n,s){t+=0===s?"?":"&";var o=e[n];switch(h()(o)){case"object":Array.isArray(o)?o.forEach(function(e,s){s>0&&(t+="&"),t+="".concat(n,"=").concat(encodeURIComponent(e))}):t+="".concat(n,"=").concat(encodeURIComponent(JSON.stringify(o)));break;case"boolean":t+="".concat(n,"="),t+=o?1:0;break;case"string":case"number":default:t+="".concat(n,"=").concat(encodeURIComponent(e[n]))}}),t)},k=n("+J7U"),w=n.n(k),C=0,R=1,O=2,T=3,j={wsServer:{protocol:"ws:",hostname:"localhost",port:80,prefixPath:"",path:"/websocket"},xhrServer:{protocol:"http:",hostname:"localhost",port:80,prefixPath:""},primaryProtocol:"xhr",webSocketUpgrade:!0,createWebSocket:function(e){var t;try{t=new WebSocket(e)}catch(t){g.a.error("APIClient: Error connecting to '".concat(e,"'!"),t)}return t},packMessage:function(e){return JSON.stringify(e)},unpackMessage:function(e){return JSON.parse(e)},attachRequestId:function(e,t){return e.RequestID=t,e},extractRequestId:function(e){return e&&e.RequestID},openTimeout:0,closeTimeout:0,responseTimeout:3e4,reconnect:!0,reconnectionDelayIncrement:1e3,maxReconnectionDelay:1e4,maxReconnectionAttempts:10,pollingPushEventHandlerInterval:1e4,refreshPushEventSubscriptionsInterval:6e4,refreshPushEventSubscriptionsTimeout:2e3,accessToken:"",throwError:!0},A=new(function(){function e(){p()(this,e),this._options=Object.assign({},j),this._opening=new m.a,this._closing=new m.a,this._requests=new y,this._requestCount=0,this._ws=null,this._wsSubscription={},this._reconnectTimeoutId=null,this._reconnectionCount=0,this._reconnectionAttempt=0,this._reconnectionDelay=0,this._reconnectResetAttemptsTimeoutId=null,this._pubSub=new P,this._eventListeners=new Map,this._pushEvents=new E,this._pushEventHandlerIntervalId=null,this._pushEventSubscriptionRefreshIntervalId=null,this._pushEventSubscriptionRefreshTimeoutId=null,this._pushEventInitializeData=null,this._authenticatedUserId=null;var t=window.sessionStorage.getItem("frontendClientId");this._frontendClientId=t||w()(),t!==this._frontendClientId&&window.sessionStorage.setItem("frontendClientId",this._frontendClientId)}return v()(e,[{key:"open",value:function(){var e=this;return this.options.webSocketUpgrade?this.isClosing?(this._downgradeProtocol(),Promise.reject(new Error("Can't open WebSocket while closing."))):this.isOpened?this._opening.promise:(g.a.info("APIClient: Opening WebSocket connection..."),this._opening.call(function(){var t=e.options.openTimeout;e._opening.timeout(t,"Can't open WebSocket within allowed timeout: ".concat(t," ms.")),e._opening.promise.catch(function(t){return e._cleanup(t)}),e._createWS()})):(g.a.debug("APIClient: WebSocket protocol disabled, the connection cannot be open."),Promise.resolve())}},{key:"_reconnect",value:function(){var e=this;if(this.options.reconnect){if(this._reconnectionAttempt>=this.options.maxReconnectionAttempts)return this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId),g.a.debug("APIClient: Reconnection attempt limit reached (".concat(this._reconnectionAttempt,"), giving up.")),void(this._reconnectionAttempt=0);this._reconnectionDelay=this._reconnectionAttempt*this.options.reconnectionDelayIncrement,(this._reconnectionDelay>this.options.maxReconnectionDelay||this.options.fixedReconnectionDelay)&&(this._reconnectionDelay=this.options.maxReconnectionDelay),g.a.info("APIClient: Trying to reconnect in ".concat(this._reconnectionDelay/1e3,"s")),this._reconnectionCount++,this._reconnectionAttempt++,clearTimeout(this._reconnectTimeoutId),this._reconnectTimeoutId=setTimeout(function(){e.open()},this._reconnectionDelay)}else this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId)}},{key:"initializePushEvents",value:function(e){var t=this;return new Promise(function(n,s){t._pushEventInitializeData=e,"xhr"!==t.options.primaryProtocol?t._initializePushEventsWebSocket(e).then(function(){return n()}).catch(function(){return s()}):t._initializePushEventsXHR(e).then(function(){return n()}).catch(function(){return s()})})}},{key:"_initializePushEventsWebSocket",value:function(e){var t=this;return new Promise(function(n,s){t.sendRequest({Path:"/websocket/event/init",Method:"post",Body:{Token:t.options.accessToken,FrontendClientID:t._frontendClientId}}).then(function(){t._pushEventHandlerIntervalId&&(clearInterval(t._pushEventHandlerIntervalId),t._pushEventHandlerIntervalId=null),t._initializeRefreshPushEventSubscriptionsInterval(e.subscriptionPath).then(function(){return n()}).catch(function(){return s()})}).catch(function(e){g.a.error("APIClient: Could not initialize the push events!",e),s(e)})})}},{key:"_initializePushEventsXHR",value:function(e){var t=this;return clearInterval(this._pushEventHandlerIntervalId),this._pushEventHandlerIntervalId=setInterval(function(){t.sendRequest({Path:"".concat(e.handlerPath,"/").concat(t._frontendClientId),Method:"get"}).then(function(e){t._pushEvents.publish(e.Body.PushEvents)}).catch(function(e){g.a.error("APIClient: Could not fetch push event messages!",e)})},this.options.pollingPushEventHandlerInterval),new Promise(function(n,s){t._initializeRefreshPushEventSubscriptionsInterval(e.subscriptionPath).then(function(){return n()}).catch(function(){return s()})})}},{key:"_initializeRefreshPushEventSubscriptionsInterval",value:function(e){var t=this;return new Promise(function(n){clearTimeout(t._pushEventSubscriptionRefreshTimeoutId),clearInterval(t._pushEventSubscriptionRefreshIntervalId),t._pushEventSubscriptionRefreshTimeoutId=setTimeout(function(){t.refreshPushEventSubscriptions(e),t._pushEventSubscriptionRefreshIntervalId=setInterval(function(){t.refreshPushEventSubscriptions(e)},t.options.refreshPushEventSubscriptionsInterval),clearTimeout(t._pushEventSubscriptionRefreshTimeoutId),t._pushEventSubscriptionRefreshTimeoutId=null,n()},t.options.refreshPushEventSubscriptionsTimeout)})}},{key:"refreshPushEventSubscriptions",value:function(e){var t=this;return new Promise(function(n,s){t.sendRequest({Path:e,Method:"post",Body:{FrontendClientID:t._frontendClientId,Subscriptions:t._pushEvents.subscriptions()}}).then(function(){return n()}).catch(function(e){g.a.error("APIClient: Could not refresh push event subscriptions!",e),s(e)})})}},{key:"cleanupPushEvents",value:function(){"xhr"===this.options.primaryProtocol&&clearTimeout(this._pushEventHandlerIntervalId),clearTimeout(this._pushEventSubscriptionRefreshTimeoutId),clearInterval(this._pushEventSubscriptionRefreshIntervalId),this._pushEvents.clearAllSubscriptions(),this._pushEventInitializeData=null}},{key:"sendRequest",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=void 0!==n.responseTimeout?n.responseTimeout:this.options.responseTimeout;["Path","Method"].forEach(function(t){e[t]||g.a.error("APIClient: key '".concat(t,"' in param 'data' of the sendRequest() is required!"))}),e.Path=e.Path.replace(/^[/]/,""),n.apiPrefix&&!/[/]$/.test(n.apiPrefix)&&(n.apiPrefix+="/");var o=e.Path;e.Method=e.Method.toUpperCase(),e.Body&&Object.keys(e.Body).length&&("GET"===e.Method||"HEAD"===e.Method)&&g.a.error("APIClient: method ".concat(e.Method," does not support body parameters!"),e),Object.prototype.hasOwnProperty.call(e,"Headers")||(e.Headers={}),!n.skipAuthentication&&this.options.accessToken&&(e.Headers.Authentication="Bearer ".concat(this.options.accessToken)),"debug"===g.a.options.logLevel&&(e.Headers["X-OTRS-API-Debug"]="true"),e.Query&&(e.Path+=S(e.Query));var i=I.profileForPath(e.Path);if(i&&(e.Headers["X-OTRS-API-Debug-PerlProfiler"]=i),"xhr"===this.options.primaryProtocol&&(n.xhr=!0),this._isJsonReady(e.Body)||n.xhr||(n.xhr=!0,g.a.debug("APIClient: Falling back to XHR because of body unsuitable for JSON conversion:",e.Body)),n.xhr)return this._sendXHR(e,o,n,s);var r=n.requestId||++this._requestCount;return this._requests.create(r,function(){var n=t.options.attachRequestId(e,r);t._sendPacked(n,o)},s)}},{key:"_sendXHR",value:function(e,t,n,s){var o=this,i=new XMLHttpRequest,r=new m.a,a=this.options.xhrServer,c=a.port?":".concat(a.port):"",u="".concat(a.protocol,"//").concat(a.hostname).concat(c).concat(a.prefixPath,"/"),l=void 0!==n.apiPrefix?n.apiPrefix:"api/",p=n&&n.responseType||"json";return r.timeout(s,"Didn't get XHR response within allowed timeout (".concat(s," ms).")),r.call(function(){"function"==typeof n.onUploadProgress&&i.upload.addEventListener("progress",n.onUploadProgress),i.addEventListener("load",function(){var n=i.response;n&&"json"===p&&"object"!==h()(n)&&(n=JSON.parse(i.response));var s={Path:t,Method:Object.prototype.hasOwnProperty.call(e,"Method")?e.Method:"GET",Code:i.status,Body:n};if(i.status>=200&&i.status<300)r.resolve(s);else{var a=new Error("Error getting valid response.");a.response=s,r.reject(a)}g.a.debug("APIClient: Received XHR ".concat(s.Method," response for ").concat(s.Path,":"),s);var c={path:s.Path,method:s.Method,code:s.Code,type:"response"};i.getResponseHeader("X-OTRS-API-Debug-SQLTrace")&&o._debugSQL(i.getResponseHeader("X-OTRS-API-Debug-SQLTrace"),c),i.getResponseHeader("X-OTRS-API-Debug-STDERRLog")&&o._debugSTDERR(i.getResponseHeader("X-OTRS-API-Debug-STDERRLog"),c),o._pubSub.publish(c,s),o._dispatchEvent(new CustomEvent("message",{detail:s}))}),i.addEventListener("error",function(){return r.reject(i.statusText)}),i.addEventListener("abort",function(){return r.reject(i.statusText)}),i.open(e.Method||"GET",u+l+e.Path,!0),"XMLHttpRequest"===i.constructor.name&&(i.responseType=p),e.Headers&&Object.keys(e.Headers).forEach(function(t){i.setRequestHeader(t,e.Headers[t])}),o._isJsonReady(e.Body)?i.send(JSON.stringify(e.Body)):i.send(e.Body);var s={Path:t,Method:Object.prototype.hasOwnProperty.call(e,"Method")?e.Method:"GET",Code:200,Type:"request"};o._pubSub.publish({path:s.Path,method:s.Method,code:s.Code,type:s.Type},s),g.a.debug("APIClient: Sent XHR ".concat(e.Method," request to ").concat(e.Path,":"),e)})}},{key:"_isJsonReady",value:function(e){return!e||!(e instanceof FormData)}},{key:"_sendPacked",value:function(e,t){var n=this.options.packMessage(e);this._send(n,t)}},{key:"_send",value:function(e,t){var n=this;if(this.isOpened){this._ws.send(e);var s=this.options.unpackMessage(e),o={Path:t,Method:Object.prototype.hasOwnProperty.call(s,"Method")?e.Method:"GET",Code:200,Type:"request"};this._pubSub.publish({path:o.Path,method:o.Method,code:o.Code,type:o.Type},o),g.a.debug("APIClient: Sent WS ".concat(s.Method," request to ").concat(s.Path,":"),s)}else if(this.options.reconnect)setTimeout(function(){n._send(e)},this._reconnectionDelay);else if(this.options.throwError)throw new Error("Can't send data because WebSocket is not opened.")}},{key:"subscribe",value:function(e,t){var n=this._pubSub.subscribe(e,t);return g.a.debug("APIClient: Subscribed as ".concat(n.token)),n}},{key:"unsubscribe",value:function(e){var t=this;return Array.isArray(e)?Object.keys(e).forEach(function(n){g.a.debug("APIClient: Unsubscribing ".concat(e[n])),t._pubSub.unsubscribe(e[n])}):(g.a.debug("APIClient: Unsubscribing ".concat(e)),this._pubSub.unsubscribe(e)),!0}},{key:"subscribePushEvent",value:function(e,t){var n=this;if(Array.isArray(e)){var s=[];return Object.keys(e).forEach(function(o){s.push(n._preparePushEvent(e[o],t))}),this._pushEventInitializeData&&null===this._pushEventSubscriptionRefreshTimeoutId&&this._initializeRefreshPushEventSubscriptionsInterval(this._pushEventInitializeData.subscriptionPath),s}var o=this._preparePushEvent(e,t);return this._pushEventInitializeData&&null===this._pushEventSubscriptionRefreshTimeoutId&&this._initializeRefreshPushEventSubscriptionsInterval(this._pushEventInitializeData.subscriptionPath),o}},{key:"unsubscribePushEvent",value:function(e){var t=this;return Array.isArray(e)?Object.keys(e).forEach(function(n){g.a.debug("APIClient: Unsubscribing push event ".concat(e[n])),t._pushEvents.unsubscribe(e[n])}):(g.a.debug("APIClient: Unsubscribing push event ".concat(e)),this._pushEvents.unsubscribe(e)),!0}},{key:"_rejectDelay",value:function(e){return new Promise(function(t,n){setTimeout(n.bind(null,e),1e3)})}},{key:"_preparePushEvent",value:function(e,t){var n=this,s=new RegExp("<:AuthenticatedUserID>");return new Promise(function(o,i){if(s.test(e))if(n._authenticatedUserId){e=e.replace("<:AuthenticatedUserID>",n._authenticatedUserId);var r=n._pushEvents.subscribe(e,t);g.a.info("APIClient: Subscribed push event ".concat(e," as ").concat(r.token)),o(r)}else{for(var a=Promise.reject(),c=0;c<10;c++)a=a.catch(function(){return new Promise(function(e,t){n._authenticatedUserId?e():t()})}).catch(n._rejectDelay);a=a.then(function(){e=e.replace("<:AuthenticatedUserID>",n._authenticatedUserId);var s=n._pushEvents.subscribe(e,t);g.a.info("APIClient: Subscribed push event ".concat(e," as ").concat(s.token)),o(s)}).catch(function(){i(new Error("APIClient: Push event ".concat(e," could not be processed!")))})}else{var u=n._pushEvents.subscribe(e,t);g.a.debug("APIClient: Subscribed push event ".concat(e," as ").concat(u.token)),o(u)}})}},{key:"updateAuthenticatedUserId",value:function(e){return this._authenticatedUserId=e,!0}},{key:"close",value:function(){var e=this;return this.options.webSocketUpgrade?this.isClosed?Promise.resolve(this._closing.value):(g.a.info("APIClient: Closing WebSocket connection..."),this._closing.call(function(){var t=e.options.closeTimeout;e._closing.timeout(t,"Can't close WebSocket within allowed timeout: ".concat(t," ms.")),e._ws.close()})):(g.a.debug("APIClient: WebSocket protocol disabled, the connection cannot be closed."),Promise.resolve())}},{key:"_createWS",value:function(){var e=this,t=this.options.wsServer,n=t.port?":".concat(t.port):"",s="".concat(t.protocol,"//").concat(t.hostname).concat(n)+"".concat(t.prefixPath).concat(t.path);this._ws=this.options.createWebSocket(s),["open","message","error","close"].forEach(function(t){var n="_handle".concat(t.charAt(0).toUpperCase()+t.slice(1));e._ws.addEventListener(t,function(t){e[n](t)}),e._wsSubscription[t]=n})}},{key:"_handleOpen",value:function(e){var t=this;this._reconnectResetAttemptsTimeoutId=setTimeout(function(){t._reconnectionAttempt=0},this.options.reconnectionDelayIncrement),g.a.info("APIClient: WebSocket connected!"),"ws"!==this.options.primaryProtocol&&(this.options.primaryProtocol="ws",g.a.debug("APIClient: Upgraded primary protocol to WebSocket.")),this._pushEventInitializeData&&this._initializePushEventsWebSocket(this._pushEventInitializeData),this._opening.resolve(e),this._dispatchEvent(new CustomEvent("open"))}},{key:"_handleMessage",value:function(e){var t=e.data;this._handleUnpackedMessage(t)}},{key:"_handleUnpackedMessage",value:function(e){if(this.options.unpackMessage){var t=this.options.unpackMessage(e);void 0!==t&&(t.Headers&&t.Headers["X-OTRS-API-PushEvent-Message"]?g.a.debug("APIClient: Received WS push event message:",t):g.a.debug("APIClient: Received WS ".concat(t.Method," message for ").concat(t.Path,":"),t),this._handleResponse(t))}}},{key:"_handleResponse",value:function(e){if(this.options.extractRequestId){var t=this.options.extractRequestId(e);t&&(e.Code>=200&&e.Code<300?this._requests.resolve(t,e):this._requests.reject(t,e));var n={path:Object.prototype.hasOwnProperty.call(e,"Path")?e.Path:"",method:Object.prototype.hasOwnProperty.call(e,"Method")?e.Method:"",code:Object.prototype.hasOwnProperty.call(e,"Code")?e.Code:"",type:"response"};e.Headers&&e.Headers["X-OTRS-API-Debug-SQLTrace"]&&this._debugSQL(e.Headers["X-OTRS-API-Debug-SQLTrace"],n),e.Headers&&e.Headers["X-OTRS-API-Debug-STDERRLog"]&&this._debugSTDERR(e.Headers["X-OTRS-API-Debug-STDERRLog"],n),e.Headers&&e.Headers["X-OTRS-API-PushEvent-Message"]&&Object.prototype.hasOwnProperty.call(e,"PushEvents")&&this._pushEvents.publish(e.PushEvents),this._pubSub.publish(n,e),this._dispatchEvent(new CustomEvent("message",{detail:e}))}}},{key:"_handleError",value:function(){this._downgradeProtocol(),clearTimeout(this._reconnectResetAttemptsTimeoutId),this._reconnectResetAttemptsTimeoutId=null}},{key:"_handleClose",value:function(e){this._downgradeProtocol(),this._reconnect(),this._closing.resolve(e);var t=new Error("WebSocket closed with reason: ".concat(e.reason," (").concat(e.code,")."));this._opening.isPending&&this._opening.reject(t),this._cleanup(t),this._dispatchEvent(new CustomEvent("close",{detail:t}))}},{key:"_cleanupWS",value:function(){var e=this;this._ws&&(["open","message","error","close"].forEach(function(t){e._ws.removeEventListener(t,e[e._wsSubscription[t]])}),this._ws=null,this._wsSubscription={})}},{key:"_cleanup",value:function(e){this._cleanupWS(),this._requests.rejectAll(e)}},{key:"_downgradeProtocol",value:function(){"ws"===this.options.primaryProtocol&&(this.options.primaryProtocol="xhr",g.a.debug("APIClient: Downgraded primary protocol to XHR."))}},{key:"addEventListener",value:function(e,t){return!!/^(open|message|close)$/.test(e)&&("function"==typeof t&&(this._eventListeners.set(t.bind(this),{type:e,listener:t}),!0))}},{key:"removeEventListener",value:function(e,t){if(!/^(open|message|close)$/.test(e))return!1;if("function"!=typeof t)return!1;var n=!0,s=!1,o=void 0;try{for(var i,r=this._eventListeners[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var a=c()(i.value,2),u=a[0],h=a[1];h.type===e&&t===h.listener&&this._eventListeners.delete(u)}}catch(e){s=!0,o=e}finally{try{n||null==r.return||r.return()}finally{if(s)throw o}}return!0}},{key:"_dispatchEvent",value:function(e){Object.defineProperty(e,"target",{value:this});var t="on".concat(e.type);this[t]&&this[t](e);var n=!0,s=!1,o=void 0;try{for(var i,r=this._eventListeners[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var a=c()(i.value,2),u=a[0];a[1].type===e.type&&u(e)}}catch(e){s=!0,o=e}finally{try{n||null==r.return||r.return()}finally{if(s)throw o}}}},{key:"_debugSQL",value:function(e,t){var n=JSON.parse(e),s=n.length;if(s){var o=0;n.forEach(function(e){o+=e.Time}),o=o.toFixed(4),g.a.debug("".concat(t.method.toUpperCase()," message for ").concat(t.path," caused ").concat(s," SQL statements ")+"in ".concat(o,"s: "),n)}}},{key:"_debugSTDERR",value:function(e,t){var n=JSON.parse(e),s=n.length;s&&g.a.debug("".concat(t.method.toUpperCase()," message for ").concat(t.path," wrote ").concat(s," STDERR messages"),n)}},{key:"options",get:function(){return this._options},set:function(e){this._options=Object.assign({},this._options,e)}},{key:"isOpening",get:function(){return Boolean(this._ws&&this._ws.readyState===C)}},{key:"isOpened",get:function(){return Boolean(this._ws&&this._ws.readyState===R)}},{key:"isClosing",get:function(){return Boolean(this._ws&&this._ws.readyState===O)}},{key:"isClosed",get:function(){return Boolean(!this._ws||this._ws.readyState===T)}}]),e}());o.default.use(r.a,{color:"#8fffc7",failedColor:"#D12717",autoFinish:!1});var D={name:"CommonProgressBar",props:{testMode:{type:Boolean,default:!1}},data:function(){return{internalCounter:0,activeProgressBar:!1,errors:!1,intervalId:null,now:0,startTime:0}},computed:{counter:{get:function(){return this.internalCounter},set:function(e){var t=this;this.internalCounter=e,e>0?setTimeout(function(){!t.activeProgressBar&&t.internalCounter>0&&t.start()},150):0===e&&setTimeout(function(){t.activeProgressBar&&0===t.internalCounter&&t.finish()},300)}}},created:function(){var e=this;this.testMode?setInterval(function(){setTimeout(function(){e.increment(),setTimeout(function(){e.decrement({Code:200})},2e3)},500)},3e3):(new MutationObserver(function(t){t.forEach(function(t){Array.from(t.addedNodes).forEach(function(t){if(/^SCRIPT|LINK$/.test(t.tagName)){e.increment();var n=e;t.addEventListener("load",function(){n.decrement({Code:200}),t.removeEventListener("load",this)})}})})}).observe(document.head,{childList:!0}),A.subscribe({types:["request"]},function(){e.increment()}),A.subscribe({types:["response"]},function(t){e.decrement(t)}),this.$bus.$on("progressBarShow",function(){e.increment()}),this.$bus.$on("progressBarHide",function(){e.decrement({Code:200})}))},methods:{increment:function(){this.counter++},decrement:function(e){e.Code&&500!==e.Code||(this.errors=!0),0!==this.counter&&this.counter--},start:function(){var e=this;this.$Progress.start(),this.now=Date.now(),this.startTime=this.now,this.activeProgressBar=!0,this.intervalId||(this.intervalId=setInterval(function(){e.now=Date.now(),e.activeProgressBar&&e.now-e.startTime>=3e4?e.finish():e.activeProgressBar||e.clearIntervalId()},1e3))},finish:function(){this.errors?(this.$Progress.fail(),this.errors=!1):this.$Progress.finish(),this.counter=0,this.startTime=0,this.activeProgressBar=!1,this.clearIntervalId()},clearIntervalId:function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}}},x=n("psIG"),M=Object(x.a)(D,function(){var e=this.$createElement;return(this._self._c||e)("vue-progress-bar")},[],!1,null,null,null).exports,H={name:"CommonProgressBar",mixins:[s.a],data:function(){return{docVersion:"1.0.1",componentNamespace:"Components",componentPath:"Components/Common/CommonProgressBar",component:M,example:{testMode:{default:!0}},customCode:[{tag:"p",value:"Take a look at the top of this window."}]}}},q=Object(x.a)(H,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"DesignSystem__Main"},[n("h1",{staticClass:"DesignSystem"},[e._v("\n        "+e._s(e.summary)+"\n        "),n("b-badge",{attrs:{variant:e.docVersion!==e.version?"warning":"info"}},[e._v("\n            "+e._s(e.version)+"\n        ")])],1),e._v(" "),n("p",[e._v("\n        "+e._s(e.description)+"\n    ")]),e._v(" "),e.docVersion!==e.version?[n("CommonNotice",{attrs:{text:"Please verify all changes to the component API have been properly documented\n                ("+e.docVersion+" !== "+e.version+").",title:"Documentation for this component is out of date!",type:"Warning"}})]:e._e(),e._v(" "),n("h2",{staticClass:"DesignSystem"},[e._v("\n        Semi-automatic Mode\n    ")]),e._v(" "),n("p",[e._v("\n        While the component monitors network for any API requests and responses, it is still possible to activate it\n        manually. Just emit on the global event bus in order to start the progress bar:\n    ")]),e._v(" "),n("pre",{staticClass:"DesignSystem"},[e._v("this.$bus.$emit('progressBarShow');")]),e._v(" "),n("p",[e._v("In order to stop it, emit a different event:")]),e._v(" "),n("pre",{staticClass:"DesignSystem"},[e._v("this.$bus.$emit('progressBarHide');")]),e._v(" "),n("b-tabs",{staticClass:"DesignSystem__TabContent"},[n("b-tab",{staticClass:"tab-pane",attrs:{title:"Demo","title-link-class":"DesignSystem",active:""}},[n("DocsExample",{attrs:{component:e.component,"component-namespace":e.componentNamespace,"component-path":e.componentPath,"custom-code":e.customCode,props:e.props,events:e.events,slots:e.slots,example:e.example}})],1),e._v(" "),n("b-tab",{staticClass:"tab-pane",attrs:{title:"API Documentation","title-link-class":"DesignSystem"}},[n("DocsComponentAPI",{attrs:{props:e.props,events:e.events,slots:e.slots,methods:e.methods}})],1)],1)],2)},[],!1,null,null,null);t.default=q.exports}}]);