(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{"6WmC":function(t,e,n){"use strict";n.r(e);n("W1QL"),n("K/PF"),n("t91x"),n("uqQt"),n("75LO"),n("e2Kn");var a={name:"BusinessObjectPropertyUser",components:{CommonClock:function(){return n.e(63).then(n.bind(null,"X54R"))},CommonAvatarAgent:function(){return Promise.all([n.e(10),n.e(67)]).then(n.bind(null,"evpg"))},CommonCopyToClipboard:function(){return n.e(44).then(n.bind(null,"HvPz"))},BusinessObjectWidgetPropertyLayout:function(){return n.e(74).then(n.bind(null,"cZP/"))}},mixins:[{props:{itemId:{type:[Number,String]},readOnly:{type:[Boolean],default:!1},testMode:{type:Boolean,default:!1},testContent:{type:Object},formMode:{type:Boolean,default:!1},columnLayout:{type:String},screenType:{type:String}},data:function(){return{content:{}}},computed:{propertyLabel:function(){return this.content.Label||""},readWritePermission:function(){return!this.readOnly&&"rw"===this.content.Permission},hasData:function(){return Boolean(Object.keys(this.content).length)},fetchPropertyDataUrl:function(){return"frontend/agent/ticket/".concat(this.itemId,"/property/").concat(this.propertyName)},formSchemaUrl:function(){return"frontend/agent/form/ticket/".concat(this.itemId,"/detail/property/").concat(this.propertyName)},propertyUpdateUrl:function(){return"frontend/agent/ticket/".concat(this.itemId,"/property/").concat(this.propertyName)},propertyName:function(){return""},propertyActive:function(){return!!this.itemId},value:function(){return this.content.Value||""}},watch:{itemId:function(){this.fetchData()}},mounted:function(){this.itemId&&this.fetchData()},methods:{onFormMode:function(t){this.$emit("form-mode",t)},fetchData:function(){var t=this;this.itemId?this.testMode?this.content=this.testContent:this.clientSendRequest({Path:this.fetchPropertyDataUrl,Method:"get",Query:this.queryParams||{}}).then(function(e){t.content=e.Body,t.$nextTick(function(){t.$test.setFlag("WidgetPropertyFetch::".concat(t.propertyName,"::Data"))})}).catch(function(e){t.$bus.$emit("showToastMessage",{id:"fetch".concat(t.propertyName,"PropertyData"),heading:"Error loading ticket data",text:"The system was not able to fetch the data for the ticket property “%s”. Please contact the administrator.",textPlaceholders:[t.$locale.translate(t.propertyLabel)||t.propertyName],variant:"danger"}),t.$log.error("Fetching data failed for property ".concat(t.propertyName,"!"),e)}):this.content={}},confirmCancel:function(){return this.$refs.layout.confirmCancel()}}}],computed:{config:function(){return this.$store&&this.$store.getters&&this.$store.getters.config?this.$store.getters.config:{}},fetchDataUrl:function(){return null},personalInfo:function(){return this.content.PersonalInfo?this.content.PersonalInfo:{}},header:function(){if(!this.personalInfo.Header)return{};var t=this.personalInfo.Header;return this.config&&"Gravatar"===this.config["AgentFrontend::Avatar::Fallback"]&&(t.Avatar.GravatarEmailAddress=this.content.PersonalInfo.UserEmail),void 0===t.UserLanguage&&(t.UserLanguage=""),t},contact:function(){if(!this.personalInfo.Contact)return!1;var t=this.personalInfo.Contact;return(0!==Object.entries(t).length||t.constructor!==Object)&&t},chat:function(){if(!this.personalInfo.Chat)return!1;var t=this.personalInfo.Chat;return(0!==Object.entries(t).length||t.constructor!==Object)&&t},additional:function(){if(!this.personalInfo.Additional)return!1;var t=this.personalInfo.Additional;return(0!==Object.entries(t).length||t.constructor!==Object)&&t},hasData:function(){return!!this.personalInfo.UserID},canEdit:function(){return!(!this.readWritePermission||!this.editable)}}},o=(n("z0kW"),n("psIG")),r=Object(o.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasData?n("BusinessObjectWidgetPropertyLayout",{ref:"layout",attrs:{"property-name":t.propertyName,active:t.propertyActive,label:t.propertyLabel,"form-schema-url":t.formSchemaUrl,"property-update-url":t.propertyUpdateUrl,"is-editable":t.canEdit,"form-mode":t.formMode,"column-layout":t.columnLayout},on:{updated:function(e){return t.fetchData()},"form-mode":t.onFormMode}},[n("div",[n("b-row",[t.header.Avatar?n("b-col",{staticClass:"pr-0 text-center PropertyCard__Content",attrs:{cols:"12",md:"4"}},[n("CommonAvatarAgent",{staticClass:"Avatar--Big",attrs:{"user-type":"agent",image:t.header.Avatar.UserAvatar,"gravatar-email-address":t.header.Avatar.GravatarEmailAddress,title:t.header.Avatar.Title,user:t.header.Avatar.User}})],1):t._e(),t._v(" "),n("b-col",{staticClass:"mt-3 PropertyCard__Content",attrs:{cols:"12",md:t.header.Avatar?8:12}},[n("b-row",[n("b-col",[n("h4",{staticClass:"m-0"},[t._v("\n                            "+t._s(t._f("html")(t.personalInfo.UserFullname))+"\n                        ")]),t._v(" "),n("span",{staticStyle:{display:"inline-block"}},[t._v("\n                            "+t._s(t._f("translate")(t.header.UserTitle))+"\n                        ")])])],1),t._v(" "),n("b-row",[t.header.UserTimeZone?n("b-col",{staticClass:"pr-0",attrs:{sm:t.header.UserLanguage?6:12,cols:"12"}},[n("CommonClock",{attrs:{timezone:t.header.UserTimeZone}})],1):t._e(),t._v(" "),t.header.UserLanguage?n("b-col",{attrs:{sm:t.header.UserTimeZone?6:12,cols:"12"}},[n("b-row",[n("b-col",{staticClass:"pr-0",attrs:{cols:"auto"}},[n("CommonIcon",{attrs:{icon:"earth-3"}})],1),t._v(" "),n("b-col",{staticClass:"pl-2 pr-1"},[n("p",{},[t._v(t._s(t._f("translate")(t.header.UserLanguage)))])])],1)],1):t._e()],1)],1)],1),t._v(" "),n("b-row",{staticClass:"mt-1"},[n("b-col",{staticClass:"py-2 mx-3 InfoCard__Meta"},[n("b-row",{attrs:{"align-h":"start"}},[t.contact?n("b-col",{attrs:{cols:t.chat?6:12}},[n("div",{staticClass:"InfoCard__Label"},[t._v("\n                            "+t._s(t._f("translate")("Contact"))+"\n                        ")]),t._v(" "),t._l(t.contact,function(t,e){return n("CommonCopyToClipboard",{key:e,staticClass:"Copy position-relative Layout__Header__Link mr-2",attrs:{title:t.Value,copy:t.Value,icon:t.Icon}})})],2):t._e(),t._v(" "),t.chat?n("b-col",{attrs:{cols:t.contact?6:12}},[n("div",{staticClass:"InfoCard__Label"},[t._v("\n                            "+t._s(t._f("translate")("Chat"))+"\n                        ")]),t._v(" "),n("CommonLink",[n("CommonIcon",{class:{"CommonIcon--Disabled":!t.chat.IsVideoAvailable},attrs:{icon:"single-neutral-actions-mobilephone"}})],1),t._v(" "),n("CommonLink",{staticClass:"ml-2"},[n("CommonIcon",{class:{"CommonIcon--Disabled":!t.chat.IsOnline},attrs:{icon:"single-neutral-actions-chat"}})],1),t._v(" "),n("CommonLink",{staticClass:"ml-2"},[n("CommonIcon",{class:{"CommonIcon--Disabled":!t.chat.IsVideoAvailable},attrs:{icon:"single-neutral-actions-video"}})],1)],1):t._e()],1)],1)],1),t._v(" "),t.additional?n("b-row",{staticClass:"mt-1"},[n("b-col",{staticClass:"py-2 mx-3 InfoCard__Meta",attrs:{cols:"12"}},t._l(t.additional,function(e,a){return n("b-row",{key:a},[n("b-col",{staticClass:"AdditionalKey Bold",attrs:{cols:"4"}},[t._v("\n                        "+t._s(a)+"\n                    ")]),t._v(" "),n("b-col",{staticClass:"AdditionalValue",attrs:{cols:"8"}},[t._v("\n                        "+t._s(e)+"\n                    ")])],1)}),1)],1):t._e()],1)]):t._e()},[],!1,null,null,null);e.default=r.exports},oO88:function(t,e,n){},z0kW:function(t,e,n){"use strict";var a=n("oO88");n.n(a).a}}]);