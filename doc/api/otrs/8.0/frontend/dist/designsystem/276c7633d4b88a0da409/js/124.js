(window.webpackJsonp=window.webpackJsonp||[]).push([[124,16],{"3Hfo":function(t,n,i){"use strict";var e=i("8CHY");n.a={methods:{filter:function(t){var n=this,i="";return["label","description","localPlaceholder"].forEach(function(t){i+=n.$locale.translate(n[t])}),Object(e.a)(i,t)}}}},"5ZVq":function(t,n,i){"use strict";i.r(n);i("U8p0"),i("W1QL"),i("K/PF"),i("75LO");var e=i("3Hfo"),a=i("8CHY"),o={name:"FormNotificationEvents",components:{CommonCheckIcon:function(){return i.e(132).then(i.bind(null,"70Qt"))}},mixins:[e.a],props:{value:{type:Object},name:{type:String,default:""},label:{type:String},description:{type:String},error:{type:String},hidden:{type:Boolean,default:!1},transports:{type:Object,required:!0},notifications:{type:Object,required:!0}},data:function(){return{localValue:null,oldLocalValue:null,runningInput:!1}},computed:{transportsList:function(){var t=this;return Object.keys(this.transports).map(function(n){return t.transports[n]}).sort(function(t,n){return t.Prio-n.Prio})},notificationsList:function(){var t=this;return Object.keys(this.notifications).map(function(n){return t.notifications[n]}).sort(function(t,n){var i=t.Name.toLowerCase(),e=n.Name.toLowerCase();return i<e?-1:i>e?1:0})},anyNotificationWithRequired:function(){var t=!1;return this.notificationsList.forEach(function(n){return!n.Required||(t=!0,!1)}),t}},watch:{value:function(){this.buildLocalValue()}},created:function(){this.buildLocalValue()},methods:{onInput:function(t,n,i){var e=this;this.runInput(function(){e.setValue(t,n,i),e.emitValue()})},onTransportInput:function(t,n){var i=this;this.runInput(function(){i.notificationsList.forEach(function(e){i.isNotificationTransportDisabled(e,t)||i.setValue(e,t,n)}),i.emitValue()})},buildLocalValue:function(){var t=this.value&&this.value instanceof Object?JSON.parse(JSON.stringify(this.value)):{};this.localValue=t,this.oldLocalValue=JSON.parse(JSON.stringify(t))},emitValue:function(){var t=this,n=function(){var n=JSON.parse(JSON.stringify(t.localValue)),i=JSON.parse(JSON.stringify(n));t.$emit("input",n,t.oldLocalValue),t.oldLocalValue=i};return this.oldLocalValue?Object.keys(this.localValue).length!==Object.keys(this.oldLocalValue).length?n():(Object.keys(this.localValue).forEach(function(i){return Object.prototype.hasOwnProperty.call(t.oldLocalValue,i)&&t.localValue[i]===t.oldLocalValue[i]||(n(),!1)}),null):n()},notificationTransportValue:function(t,n){if(this.isNotificationTransportDisabled(t,n))return!1;var i=this.localValue[t.ID]||{};return Object.prototype.hasOwnProperty.call(i,n.Name)?Boolean(i[n.Name]):Boolean(t.EnabledTransports[n.Name])},isNotificationTransportDisabled:function(t,n){return!t.Transports[n.Name]},isTransportDisabled:function(t){var n=this,i=!0;return this.notificationsList.forEach(function(e){return!!n.isNotificationTransportDisabled(e,t)||(i=!1,!1)}),i},transportValue:function(t){var n=this,i=!0;return this.notificationsList.forEach(function(e){var a=n.isNotificationTransportDisabled(e,t),o=n.notificationTransportValue(e,t);return!(!a&&!o)||(i=!1,!1)}),i},setValue:function(t,n,i){var e=this.localValue[t.ID]||{};if(!i&&t.Required){var a=!1;if(this.transportsList.forEach(function(t){return t.Name===n.Name||(!Object.prototype.hasOwnProperty.call(e,t.Name)||!e[t.Name]||(a=!0,!1))}),!a)return!1}return e[n.Name]=i?1:0,this.$set(this.localValue,t.ID,e),!0},filter:function(t){var n=this,i="";return["label","description"].forEach(function(t){i+=n.$locale.translate(n[t])}),this.notificationsList.forEach(function(t){i+=t.Name+t.Description}),Object(a.a)(i,t)},runInput:function(t){var n=this;this.runningInput||(this.runningInput=!0,t(),this.$nextTick(function(){n.runningInput=!1}))}}},r=(i("Fc5e"),i("psIG")),s=Object(r.a)(o,function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!hidden"}],attrs:{state:t.error?"invalid":null,"invalid-feedback":t._f("translate")(t.error)}},[i("table",{staticClass:"table table-sm"},[i("thead",[i("tr",[i("th",{staticClass:"LabelCol",attrs:{scope:"col"}},[i("label",[t._v(t._s(t._f("translate")(t.label)))]),t._v(" "),t.description?i("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html",modifiers:{html:!0}}],attrs:{title:t._f("translate")(t.description)}},[i("CommonIcon",{staticClass:"mx-2",attrs:{weight:"bold",icon:"information-circle"}})],1):t._e()],1),t._v(" "),i("th",{staticClass:"SelectAllCol"},[t._v("\n                    "+t._s(t._f("translate")("all/none"))+"\n                ")]),t._v(" "),t._l(t.transportsList,function(n){return i("th",{key:n.Name,staticClass:"IconCol text-center",attrs:{scope:"col"}},[i("CommonCheckIcon",{attrs:{title:n.Name,name:"Transport-"+n.Name,"weight-with-icon":n.CommonIcon,disabled:t.isTransportDisabled(n),value:t.transportValue(n)},on:{input:function(i){return t.onTransportInput(n,i)}}})],1)})],2)]),t._v(" "),i("tbody",t._l(t.notificationsList,function(n){return i("tr",{key:n.ID},[i("td",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html",modifiers:{html:!0}}],attrs:{title:t._f("translate")(n.Description)}},[1==n.Required?i("span",[t._v("\n                        *\n                    ")]):t._e(),t._v(t._s(t._f("translate")(n.Name))+"\n                ")]),t._v(" "),i("td"),t._v(" "),t._l(t.transportsList,function(e){return i("td",{key:n.ID+"-"+e.Name,staticClass:"text-center"},[i("CommonCheckIcon",{attrs:{name:"Notification-"+n.ID+"-"+e.Name,"weight-with-icon":e.CommonIcon,value:t.notificationTransportValue(n,e),disabled:t.isNotificationTransportDisabled(n,e)},on:{input:function(i){return t.onInput(n,e,i)}}})],1)})],2)}),0),t._v(" "),t.anyNotificationWithRequired?i("tfoot",{staticClass:"RequiredHint"},[i("tr",[i("td",{attrs:{colspan:2+t.transportsList.length}},[t._v("\n                    * "+t._s(t._f("translate")("the notification requires at least one transport to be active."))+"\n                ")])])]):t._e()])])},[],!1,null,null,null);n.default=s.exports},Fc5e:function(t,n,i){"use strict";var e=i("sPPv");i.n(e).a},sPPv:function(t,n,i){}}]);