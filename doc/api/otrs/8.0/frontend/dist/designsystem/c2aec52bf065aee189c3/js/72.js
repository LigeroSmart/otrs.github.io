(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{"7CRW":function(t,e,o){},"cZP/":function(t,e,o){"use strict";o.r(e);o("DbwS"),o("t91x");var n={name:"BusinessObjectWidgetPropertyLayout",components:{Form:function(){return Promise.all([o.e(5),o.e(7),o.e(14)]).then(o.bind(null,"GgUG"))}},props:{propertyName:{type:String,required:!0},active:{type:[Boolean],default:!0},isEditable:{type:[Boolean],default:!1},label:{type:String,required:!0},formSchemaUrl:{type:String,required:!0},propertyUpdateUrl:{type:String,required:!0},formRequestParams:{type:Object}},data:function(){return{expanded:!1,dataChanged:!1,formMode:!1}},methods:{toggleProperty:function(){this.expanded=!this.expanded},toggleFormMode:function(){this.formMode?this.confirmCancel():this.formMode=!0},saveAndClose:function(){this.$refs["form".concat(this.propertyName,"Property")].submit()},onFormChanged:function(){this.dataChanged=!0},onFormValid:function(t){var e=this;if(!this.dataChanged)return this.$emit("cancel"),void(this.formMode=!1);this.formMode=!1;var o=t;this.clientSendRequest({Path:this.propertyUpdateUrl,Method:"post",Body:o}).then(function(){e.$emit("updated"),e.dataChanged=!1,e.formMode=!1,e.$nextTick(function(){e.$test.setFlag("WidgetPropertyUpdate::".concat(e.propertyName))})}).catch(function(t){e.$log.error(t),e.$bus.$emit("showToastMessage",{id:"propertyUpdate",text:"The property could not be updated.",variant:"danger",persistent:!1})})},confirmCancel:function(){var t=this;return new Promise(function(e){if(!t.dataChanged)return t.$emit("cancel"),t.formMode=!1,void e(!0);t.$bus.$emit("showModalMessage",{id:"confirmCancel",heading:"Discard Changes",text:"You have unsaved changes. Do you really want to close?",buttonBehavior:"yesNo",okCallback:function(){t.$refs["form".concat(t.propertyName,"Property")]&&t.$refs["form".concat(t.propertyName,"Property")].resetForm(!0,!0),t.$emit("cancel"),t.dataChanged=!1,t.formMode=!1,e(!0)},cancelCallback:function(){e(!1)}})})},onFormInValid:function(t){this.$emit("invalid",t)}}},r=(o("vjyK"),o("psIG")),a=Object(r.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.active?o("b-col",{attrs:{xl:t.expanded?12:3,md:t.expanded?12:6}},[o("b-row",[o("b-col",{staticClass:"border bg-white mr-3 mb-3 PropertyCard"},[o("b-row",{staticClass:"py-2 border-bottom",attrs:{"align-v":"center"}},[o("b-col",{staticClass:"PropertyCard__Header"},[o("h3",{staticClass:"p-0 m-0"},[t._v("\n                        "+t._s(t._f("translate")(t.label))+"\n                    ")])]),t._v(" "),o("b-col",{staticClass:"text-right",attrs:{cols:"auto"}},[t.isEditable?o("CommonLink",{on:{click:t.toggleFormMode}},[o("CommonIcon",{attrs:{icon:"content-pen-3"}})],1):t._e(),t._v(" "),o("CommonLink",{staticClass:"ml-2",on:{click:t.toggleProperty}},[o("CommonIcon",{attrs:{icon:t.expanded?"shrink-2":"expand-3"}})],1)],1)],1),t._v(" "),o("b-row",[o("b-col",{staticClass:"py-2 mx-3 px-0 PropertyCard__Content FixedHeight"},[t.formMode?o("div",[o("Form",{key:"form"+t.propertyName+"Property",ref:"form"+t.propertyName+"Property",attrs:{url:t.formSchemaUrl,params:t.formRequestParams,"hide-description":"","emit-values-in-complex-object":""},on:{changed:t.onFormChanged,invalid:t.onFormInValid,valid:t.onFormValid}}),t._v(" "),o("b-row",{attrs:{"no-gutters":""}},[o("b-col",{staticClass:"col-12 text-right"},[o("CommonLink",{staticClass:"btn btn-secondary Button Button--Secondary",on:{click:function(e){return t.confirmCancel()}}},[t._v("\n                                    "+t._s(t._f("translate")("Cancel"))+"\n                                ")]),t._v(" "),o("CommonLink",{staticClass:"btn btn-primary Button Button--Primary",on:{click:function(e){return t.saveAndClose()}}},[t._v("\n                                    "+t._s(t._f("translate")("Save"))+"\n                                ")])],1)],1)],1):t._t("default")],2)],1)],1)],1)],1):t._e()},[],!1,null,null,null);e.default=a.exports},vjyK:function(t,e,o){"use strict";var n=o("7CRW");o.n(n).a}}]);