(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{MKqb:function(t,e,a){"use strict";a.r(e);var s=a("tZmG"),r=a.n(s),i=a("Kz1y"),n=a.n(i),o=a("lOrp"),l={name:"FormAvatar",props:{value:{type:String},name:{type:String},error:{type:String},label:{type:String},required:{type:Boolean,default:!1},description:{type:String},hidden:{type:Boolean,default:!1}},data:function(){return{image:void 0,uploadText:"",uploadTextType:""}},computed:n()({},Object(o.b)(["userInfo"]),{initials:function(){var t="";return this.$store&&this.$store.getters&&void 0!==this.$store.getters.userInfo&&r()(this.$store.getters.userInfo).length?(t+=this.$store.getters.userInfo.UserFirstname.charAt(0).toUpperCase(),t+=this.$store.getters.userInfo.UserLastname.charAt(0).toUpperCase()):t="CU",t},avatarImage:function(){return null!==this.value&&void 0!==this.value?this.value:this.$store&&this.$store.getters&&this.$store.getters.config["Layout::DefaultAvatar"]?"/api/frontend/external/layout/image?Path="+this.$store.getters.config["Layout::DefaultAvatar"]:void 0}}),updated:function(){var t=this;void 0===this.value&&(this.uploadText=""),this.$nextTick(function(){t.$test.setFlag("FormAvatar::Updated")})},methods:{uploadImage:function(){var t=this;if(this.uploadText="Your avatar is being uploaded.",this.uploadTextType="notice",this.image.size>1048576)return this.uploadText="Image size exceeded (1MB).",this.uploadTextType="danger",void this.$nextTick(function(){t.$test.setFlag("FormAvatar::ImageTooBig")});var e=new FileReader;e.addEventListener("load",function(e){t.$emit("input",e.target.result),t.uploadText="Your avatar was uploaded successfully.",t.uploadTextType="success"}),e.addEventListener("error",function(){t.uploadText="An error occured during image upload.",t.uploadTextType="danger"}),e.readAsDataURL(this.image)},removeAvatar:function(){this.$emit("input",void 0)}}},u=(a("bZb6"),a("psIG")),d=Object(u.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!hidden"}],attrs:{state:Boolean(t.error)?"invalid":null,description:t._f("translate")(t.description),"invalid-feedback":t._f("translate")(t.error)}},[a("div",{staticClass:"Form__Avatar"},[a("div",{staticClass:"Avatar Avatar__Image"},[t.avatarImage?a("img",{attrs:{src:t.avatarImage}}):a("span",[t._v(t._s(t.initials))])]),t._v(" "),a("label",{staticClass:"btn btn-secondary Button Button--Secondary Avatar__ChangeButton"},[t._v("\n            "+t._s(t._f("translate")("Change Avatar Image"))+"\n            "),a("b-form-file",{ref:"uploadImage",attrs:{multiple:!1,accept:"image/*",plain:""},on:{input:function(e){t.uploadImage()}},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1),t._v(" "),t.uploadText?a("small",{staticClass:"form-text Form__Help",class:"text-"+t.uploadTextType},["success"==t.uploadTextType?a("i",{staticClass:"fas fa-check"}):a("i",{staticClass:"fas fa-exclamation-circle"}),t._v("\n            "+t._s(t._f("translate")(t.uploadText))+"\n        ")]):t._e(),t._v(" "),t.value?a("i",{staticClass:"fas fa-times fa-md Avatar__Remove",attrs:{title:t._f("translate")("Remove avatar")},on:{click:t.removeAvatar}}):t._e()])])},[],!1,null,null,null);e.default=d.exports},bZb6:function(t,e,a){"use strict";var s=a("me4K");a.n(s).a},me4K:function(t,e,a){}}]);